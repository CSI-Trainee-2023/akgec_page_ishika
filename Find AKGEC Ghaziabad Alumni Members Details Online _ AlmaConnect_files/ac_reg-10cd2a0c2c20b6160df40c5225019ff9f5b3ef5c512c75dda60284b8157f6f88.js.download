angular.module("AcLogin",["ngSanitize","ac"]),angular.module("AcLogin").controller("LoginController",["$scope","$http","$timeout","$window",function(n,t,i,o){setAngularCSRFToken(t);var e=function(){n.passwordForm=angular.copy(p)},a=function(){n.loginForm=angular.copy(_)},s=function(){d&&i.cancel(d);var e=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/;n.errors={},n.loginForm.email||(n.errors.email="Please enter your email."),n.loginForm.email&&!e.test(n.loginForm.email)&&(n.errors.email="Please enter valid email."),n.loginForm.password||(n.errors.password="Please enter your password."),n.state.otp_sent&&!n.loginForm.otp&&(n.errors.otp="Enter the One Time Password (OTP) sent to your email");var t=Object.keys(n.errors);return d=i(function(){n.errors=null},5e3),!(t&&0<t.length)},r=function(){d&&i.cancel(d);var e=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/;n.errors={},n.loginForm.email||(n.errors.email="Please enter your email."),n.loginForm.email&&!e.test(n.loginForm.email)&&(n.errors.email="Please enter valid email.");var t=Object.keys(n.errors);return d=i(function(){n.errors=null},5e3),!(t&&0<t.length)},l=function(){d&&i.cancel(d),n.errors={},n.loginForm.otp||(n.errors.otp="Enter the One Time Password (OTP) sent to your email");var e=Object.keys(n.errors);return d=i(function(){n.errors=null},5e3),!(e&&0<e.length)},c=function(){d&&i.cancel(d);var e=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/;n.errors={},n.passwordForm.email||(n.errors.email="Please enter your email."),n.passwordForm.email&&!e.test(n.passwordForm.email)&&(n.errors.email="Please enter valid email.");var t=Object.keys(n.errors);return d=i(function(){n.errors=null},5e3),!(t&&0<t.length)};n.showPasswordForm=function(){n.show_password_form=!0},n.submitPasswordForm=function(){if(n.loadingPasswordSubmit||!c())return!1;n.errorMsgPassword=null,n.loadingPasswordSubmit=!0,t({method:"POST",url:"/password",data:n.passwordForm}).success(function(){n.loadingPasswordSubmit=!1,n.displaySuccessMessage("Email sent to your email ID."),recordAnalyticsEvent("Password","Forgot Password"),i(function(){n.loadingPasswordSubmit=null},1e4)}).error(function(e){n.displayErrorMessage(e.server_message),n.loadingPasswordSubmit=!1})},n.submitLoginForm=function(){if(n.loadingLoginSubmit||!s())return!1;n.loadingLoginSubmit=!0;var e=$("meta[name=csrf-token]").attr("content");t({method:"POST",url:"/signin",data:{user:n.loginForm,authenticity_token:e}}).success(function(e){if(e.otp_sent)return n.state.otp_sent=!0,n.loadingLoginSubmit=!1,void n.displaySuccessMessage(e.server_message);var t=function(){o.location.href=e.redirect_url};n.afterLogin?n.afterLogin({is_connected:e.is_connected,callback:t}):t()}).error(function(e){n.loadingLoginSubmit=!1,n.loginForm.password=null,n.passwordForm.email=n.loginForm.email,n.displayErrorMessage(e.server_message),i(function(){n.errorMsgLogin=""},5e3)})},n.submitSendOTPForm=function(){if(n.sendingOTP||!r())return!1;n.sendingOTP=!0,t({method:"POST",url:"/login/send_otp",data:{user:n.loginForm}}).success(function(e){n.state.otp_sent=!0,n.displaySuccessMessage(e.server_message),n.sendingOTP=!1}).error(function(e){n.sendingOTP=!1,n.displayErrorMessage(e.server_message)})},n.submitLoginWithOTPForm=function(){if(n.loadingLoginWithOTP||!l())return!1;n.loadingLoginWithOTP=!0,t({method:"POST",url:"/login/login_with_otp",data:{user:n.loginForm}}).success(function(e){var t=function(){o.location.href=e.redirect_url};n.afterLogin?n.afterLogin({is_connected:e.is_connected,callback:t}):t()}).error(function(e){n.loadingLoginWithOTP=!1,n.loginForm.otp=null,n.displayErrorMessage(e.server_message)})},n.hide_login_button=!0,n.hide_signup_button=!1;var d=null;n.show_password_form=!1;var u=convertSearchStringtoObject(getSearchString());"forgot_password"==u.show&&(n.show_password_form=!0);var p={email:n.userForm.email},_={email:n.userForm.email,password:null};e(),a(),n.network_page=!1,n.currentInstitute.host&&(n.network_page=!0),n.state={otp_sent:!1},recordRegAnalytics(n.network_page,"SigninPage Opened",u.trk||u.via)}]),angular.module("Registration",["ngSanitize","ac","AcLogin"]),angular.module("Registration").controller("RegistrationController",["$scope","$http","$timeout",function(i,t,o){setAngularCSRFToken(t);var n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/,a=!1,s=function(){if(i.error_key=null,!a)return!1;i.errors={},i.userForm.name||(i.errors.name="Please enter your name."),i.userForm.email||(i.errors.email="Please enter your email."),i.userForm.email&&!n.test(i.userForm.email)&&(i.errors.email="Please enter valid email."),i.currentInstitute.phone_nos_required&&(i.userForm.phone_nos||(i.errors.mobile="Please enter your mobile no.")),i.userForm.authentication||(i.userForm.password||(i.errors.password="Please provide password."),i.userForm.password&&i.userForm.password.length<6&&(i.errors.password="Password must be of atleast 6 characters")),i.userForm.accepted_tos||(i.errors.accepted_tos="Please accept terms of service and privacy.");var e=Object.keys(i.errors);return!(e&&0<e.length)};i.createAccount=function(){if(i.creating_user||i.success_message)return!0;if(i.success_message=null,i.error_message=null,i.error_key=null,a=!0,!s())return!1;var e=angular.copy(i.userForm);i.creating_user=!0,t({url:"/signup",method:"POST",data:{user:e}}).success(function(e){i.creating_user=!1,i.request_complete=!0,i.success_message=e.server_message,recordRegAnalytics(i.network_page,"SignupPage UserRequestCreated",i.reg_via),e.redirect_url&&(o(function(){window.location=e.redirect_url},5e3),recordRegAnalytics(i.network_page,"SignupPage UserCreated",i.reg_via,function(){window.location=e.redirect_url}))}).error(function(e){i.creating_user=!1,i.error_message=e.server_message,i.error_key=e.error_key})},$(document).bind("ac_signup_success",function(e){var t=angular.copy(e.originalEvent.jsonData);i.afterLogin?window.location="/signup?sync_data_id="+t.sync_data_id:i.addAuthentication(t.authentication),i.$apply()}),$(document).bind("ac_signup_failure",function(e){var t=e.originalEvent.jsonData;if(t.account_created)o(function(){window.location=t.redirect_url},5e3),recordRegAnalytics(i.network_page,"SignupPage UserCreated",i.reg_via,function(){window.location=t.redirect_url});else{var n=function(){window.location=t.redirect_url};i.afterLogin?i.afterLogin({is_connected:t.is_connected,callback:n}):n()}}),i.addAuthentication=function(e){i.goToForm("signup_with_email","Signup"),i.userForm.authentication=e,i.userForm.image={url:e.image_url,id:e.image_url},i.userForm.name=e.name,i.userForm.email=e.email,e.profile_title&&!i.userForm.profile_title&&(i.userForm.profile_title=e.profile_title),e.currently_at&&!i.userForm.currently_at&&(i.userForm.currently_at=e.currently_at),e.current_city&&!i.userForm.current_city&&(i.userForm.current_city=e.current_city)},i.signupwithLinkedin=function(){window.open("/profiles/social_sync/linkedin/user_signup/"),i.reg_via="linkedin",recordRegAnalytics(i.network_page,"SignupPage OptionSelected",i.reg_via)},i.signupwithFacebook=function(){window.open("/profiles/social_sync/facebook/user_signup/"),i.reg_via="facebook",recordRegAnalytics(i.network_page,"SignupPage OptionSelected",i.reg_via)},i.signupwithGoogle=function(){window.open("/profiles/social_sync/google/user_signup/"),i.reg_via="google",recordRegAnalytics(i.network_page,"SignupPage OptionSelected",i.reg_via)},i.signupwithEmail=function(){i.reg_via="email",i.afterLogin?window.location="/signup?email_signup=true":i.goToForm("signup_with_email","Signup"),recordRegAnalytics(i.network_page,"SignupPage OptionSelected",i.reg_via)},i.toggleOfficialSignup=function(){i.userForm.is_official=!i.userForm.is_official,i.userForm.is_official?i.selectedForm="official_signup":i.selectedForm="normal_signup"},i.years=_.range(i.currentYear-100,i.currentYear-5).reverse(),i.months=[{id:1,name:"Jan"},{id:2,name:"Feb"},{id:3,name:"Mar"},{id:4,name:"Apr"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"Aug"},{id:9,name:"Sept"},{id:10,name:"Oct"},{id:11,name:"Nov"},{id:12,name:"Dec"}],i.days=_.range(1,32),i.hide_signup_button=!0,i.userForm={name:null,email:null,currently_at:null,current_city:null,profile_title:null,password:null,authentication:null,phone_nos:null,accepted_tos:!0};var e=$(".js_ac_signup").data("content"),r=null;e&&e.data&&(r=e.data),r&&(i.userForm.name=r.name,i.userForm.email=r.email,i.userForm.profile_title=r.profile_title,i.userForm.currently_at=r.currently_at,i.userForm.current_city=r.current_city,i.userForm.invite_token=r.invite_token,i.userForm.phone_nos=r.phone_nos),i.$watch("userForm",s,!0);var l=getSearchString(),c=convertSearchStringtoObject(l);i.network_page=!1,i.currentInstitute.host&&(i.network_page=!0);var d=c.trk||c.via;-1!=window.location.pathname.indexOf("signup")&&recordRegAnalytics(i.network_page,"SignupPage Opened",d),"website"==d&&recordRegAnalytics(i.network_page,"SignupPage OpenedFromWebsite",d),i.goToPrevState=function(){var e=i.prev_form_types.pop();i.form_type=e.form,i.form_header=e.header},i.goToForm=function(e,t){i.success_msg=null,i.error_msg=null,i.form_type&&i.form_type!=e&&i.prev_form_types.push({form:i.form_type,header:i.form_header}),i.form_type=e,i.form_header=t,"signup_with_email"==e&&i.startSessionRecording()},i.prev_form_types=[];var u=window.location.pathname;if(-1!=u.indexOf("signup")?i.goToForm("connect_with_social","Signup"):-1!=u.indexOf("signin")?i.goToForm("connect_with_social","Login"):-1!=u.indexOf("forgot_password")?i.goToForm("recover_password","Forgot Password?"):i.currentInstitute.id?i.goToForm("connect_with_social","Re-Connect"):i.goToForm("connect_with_social","Connecting Alumni Communities"),i.selectedForm="normal_signup",c.is_official&&(i.userForm.is_official=!0,i.selectedForm="official_signup",i.goToForm("signup_with_email","Signup")),c.email_signup&&i.goToForm("signup_with_email","Signup"),c.sync_data_id){var p=$(".js_ac_signup").data("authentication");i.addAuthentication(p)}i.displayErrorMessage=function(e){i.success_msg=null,i.error_msg=e};var m=!(i.displaySuccessMessage=function(e){i.error_msg=null,i.success_msg=e}),g=function(){if(!m)return!1;i.search_network_errors={},i.state.selected_institute||(i.search_network_errors.selected_institute="Please select an institute");var e=Object.keys(i.search_network_errors);return!(e&&0<e.length)};i.redirectToSelected=function(){if(m=!0,!g())return!1;i.redirectingToSelected=!0;var e=i.state.selected_institute.network_url;window.location=e},i.$watch("state.selected_institute",g,!0),i.formLabels={official_signup:{name:"Club / Committee / Department Name",email:"Club / Committee / Department Email"},normal_signup:{name:"Name",email:"Email"}},i.state={selected_institute:null}}]),angular.module("GlobalRegistration",["ngSanitize","ac"]),angular.module("GlobalRegistration").controller("GlobalSignupController",["$scope","$http","$timeout",function(n,t){setAngularCSRFToken(t);var i=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/,o=!1,a=function(){if(n.error_key=null,!o)return!1;n.errors={},n.userForm.name||(n.errors.name="Please enter your name."),n.userForm.email||(n.errors.email="Please enter your email."),n.userForm.email&&!i.test(n.userForm.email)&&(n.errors.email="Please enter valid email."),n.userForm.password||(n.errors.password="Please provide password."),n.userForm.password&&n.userForm.password.length<6&&(n.errors.password="Password must be of atleast 6 characters");var e=Object.keys(n.errors);return!(e&&0<e.length)};n.createAccount=function(){if(n.creating_user||n.success_message)return!0;if(n.success_message=null,n.error_message=null,n.error_key=null,o=!0,!a())return!1;var e=angular.copy(n.userForm);n.state.selected_institute&&"create_new_network"!=n.state.selected_institute.id&&(e.selected_institute_id=n.state.selected_institute.id),n.creating_user=!0,t({url:"/signup",method:"POST",data:{user:e}}).success(function(e){if(n.creating_user=!1,n.request_complete=!0,n.success_message=e.server_message,e.redirect_url){var t=n.state.selected_institute.network_url;window.location=t}}).error(function(e){n.creating_user=!1,n.error_message=e.server_message})},n.userForm={name:null,email:null,password:null};var e=$(".js_ac_global_signup").data("content"),s=null;e&&e.data&&(s=e.data),s&&(n.user_request=s,n.userForm.name=s.name,n.userForm.email=s.email,n.userForm.invite_token=s.invite_token),n.$watch("userForm",a,!0),n.state={selected_institute:null,search_text:null}}]),angular.module("GlobalRegistration").controller("SuggestedInstitutesController",["$scope","$http","$timeout","$q",function(n,e,t,i){setAngularCSRFToken(e);var o=null,a=function(){n.state.selected_institute=null,o&&o.resolve("another request came"),n.state.search_text?(n.fetching_suggestions=!0,o=i.defer(),e({method:"GET",url:"/suggestions/portaled_institute",params:{q:n.state.search_text},timeout:o.promise}).success(function(e){n.fetching_suggestions=!1,n.suggested_institutes=e.slice(0,21);var t={id:"create_new_network",type:"Institution",network_url:"https://www.almaconnect.com/institution_request/new",name:'Create a network for "'+n.state.search_text+'"'};n.suggested_institutes.push(t)}).error(function(){n.fetching_suggestions=!1,n.suggested_institutes=n.top_networks})):n.suggested_institutes=n.top_networks};n.selectInstitute=function(e){n.state.selected_institute&&n.state.selected_institute.id==e.id?n.state.selected_institute=null:n.state.selected_institute=e},n.top_networks=$(".js_ac_global_signup").data("top-networks"),n.$watch("state.search_text",a,!0)}]),angular.module("Registration").controller("SpecialRegistrationController",["$scope","$http","$timeout",function(s,r,e){setAngularCSRFToken(r);var n=!1,t=null,l=function(e){if(e&&(n=!0),!n)return!1;s.user_errors={},s.userForm.name||(s.user_errors.name="Please enter your name."),s.userForm.password||(s.user_errors.password="Please provide password."),s.userForm.password&&s.userForm.password.length<6&&(s.user_errors.password="Password must be of atleast 6 characters");var t=Object.keys(s.user_errors);return!(t&&0<t.length)},c=function(e){if(e&&(n=!0),!n)return!1;s.errors={},s.institute.campus_enabled&&(s.bioletForm.campus||(s.errors.campus="Please select campus")),s.institute.unique_id_enabled&&s.institute.unique_id_required&&"faculty"!=s.bioletForm.user_type&&(s.bioletForm.external_unique_id||(s.errors.external_unique_id="Please provide your "+s.institute.unique_id_label)),"Institution::College"==s.institute._type&&(s.bioletForm.course||(s.errors.course="Please select course"),s.bioletForm.to_year||s.bioletForm.current||(s.errors.to_year="Please select graduation year"),s.bioletForm.from_year||(s.errors.from_year="Please select joining year")),"Institution::Company"==s.institute._type&&(s.bioletForm.to_year||s.bioletForm.current||(s.errors.to_year="Please select leaving year"),s.bioletForm.from_year||(s.errors.from_year="Please select joining year"),s.bioletForm.designation||(s.errors.designation="Please provide designation")),"Institution::School"==s.institute._type&&(s.bioletForm.passout_year||(s.errors.passout_year="Please select passout year"),s.bioletForm.from_class||(s.errors.from_class="Please select from class"),s.bioletForm.to_class||(s.errors.to_class="Please select to class"));var t=Object.keys(s.errors);return!(t&&0<t.length)},i=function(){s.creating_user=!0,r({url:"/verify/primary",method:"POST",data:{institute_id:s.institute.id}}).success(function(e){"temp_verified"==e.verify_status||"verified"==e.verify_status?window.location.reload():window.location="/get_verified"})},d=function(){s.creating_user=!0,r({url:"/add_network",method:"POST",data:{institute_info:t}}).success(function(){i()})},o=function(e){return!(e>s.currentYear)&&(!s.bioletForm||(!s.bioletForm.to_year||e<=s.bioletForm.to_year))},a=function(e){return!s.bioletForm||(!s.bioletForm.from_year||e>=s.bioletForm.from_year)},u=function(){t="Institution::School"==s.institute._type?{user_type:"alumni",campus_id:getValue(s.bioletForm.campus,["id"]),institute_id:s.institute.id,passout_year:s.bioletForm.passout_year,from_class:s.bioletForm.from_class,to_class:s.bioletForm.to_class}:{user_type:"alumni",campus_id:getValue(s.bioletForm.campus,["id"]),course_id:getValue(s.bioletForm.course,["id"]),from_year:s.bioletForm.from_year,to_year:s.bioletForm.to_year,institute_id:s.institute.id,designation:s.bioletForm.designation}};s.showFromClassOption=function(e){return(!s.bioletForm.to_class||e<=s.bioletForm.to_class)&&(!s.bioletForm.passout_year||e<=s.institute.school_close_class-s.bioletForm.passout_year+s.currentYear)},s.showToClassOption=function(e){return!s.bioletForm.from_class||e>=s.bioletForm.from_class},s.signupwithLinkedin=function(){if(!c(!0))return!1;u(),window.open("/profiles/social_sync/linkedin/user_signup/")},s.signupwithGoogle=function(){if(!c(!0))return!1;u(),window.open("/profiles/social_sync/google/user_signup/")},s.createAccount=function(){if(s.creating_user)return!0;var e=l(!0),t=c(!0);if(!e||!t)return!1;var n=getSearchString(),i=convertSearchStringtoObject(n),o={user:angular.copy(s.userForm)},a={};i.utm_source&&(a.utm_source=i.utm_source),i.utm_campaign&&(a.utm_campaign=i.utm_campaign),_.isEmpty(a)||(o.utm=a),s.creating_user=!0,u(),r({url:"/signup",method:"POST",data:o}).success(function(){d()}).error(function(e){s.error_message=e.server_message,alert(s.error_message)})},s.calcYears=function(){s.bioletForm&&s.bioletForm.current&&(s.bioletForm.to_year=""),s.from_years=[],angular.forEach(s.institute.valid_leaving_years,function(e){o(e)&&s.from_years.push(e)}),s.to_years=[],angular.forEach(s.institute.valid_leaving_years,function(e){a(e)&&s.to_years.push(e)})},s.campusChanged=function(){s.institute.campus_enabled&&(s.bioletForm&&s.bioletForm.campus?s.institute.valid_courses=s.bioletForm.campus.courses:s.institute.valid_courses=[],s.bioletForm.course=null,s.bioletForm.branch=null)},$(document).bind("ac_signup_success",function(e){var t=angular.copy(e.originalEvent.jsonData);window.location="/signup?sync_data_id="+t.sync_data_id}),$(document).bind("ac_signup_failure",function(e){e.originalEvent.jsonData;d()});var p=$(".js_ac_signup").data("content");s.email_vouching_verifier=p.email_vouching_verifier,s.email_vouching_requester=p.email_vouching_requester,s.institute=p.institute,s.calcYears(),s.$watch("bioletForm.campus",s.campusChanged,!0);var m={user_type:"alumni",campus:null,course:null,branch:null,from_year:"",to_year:"",designation:"",current:!1};s.bioletForm=angular.copy(m),e(function(){s.email_vouching_verifier?(e(function(){s.bioletForm.campus=s.email_vouching_verifier.campus},0),e(function(){s.bioletForm.course=s.email_vouching_verifier.course},0),s.bioletForm.from_year=parseInt(s.email_vouching_verifier.from_year),s.bioletForm.to_year=parseInt(s.email_vouching_verifier.to_year),s.bioletForm.designation=s.email_vouching_verifier.designation,s.bioletForm.current=s.email_vouching_verifier.current,s.bioletForm.passout_year=s.email_vouching_verifier.passout_year):s.email_vouching_requester&&(e(function(){s.bioletForm.campus=s.email_vouching_requester.campus},0),e(function(){s.bioletForm.course=s.email_vouching_requester.course},0),s.bioletForm.from_year=parseInt(s.email_vouching_requester.from_year),s.bioletForm.to_year=parseInt(s.email_vouching_requester.to_year),s.bioletForm.designation=s.email_vouching_requester.designation,s.bioletForm.current=s.email_vouching_requester.current,s.bioletForm.passout_year=s.email_vouching_requester.passout_year)},0),s.$watch("bioletForm",function(){c()},!0),s.userForm={name:null,email:null,password:null,accepted_tos:!0,invite_token:null},s.email_vouching_verifier&&(s.userForm.email=s.email_vouching_verifier.email,s.userForm.name=s.email_vouching_verifier.name,s.userForm.invite_token=s.email_vouching_verifier.invite_token),s.$watch("userForm",function(){l()},!0)}]),angular.module("Registration").controller("ProbableNetworkRegistrationController",["$scope","$http","$timeout",function(s,r){setAngularCSRFToken(r);var n=!1,e=null,l=function(e){if(e&&(n=!0),!n)return!1;s.user_errors={},s.userForm.name||(s.user_errors.name="Please enter your name."),s.userForm.password||(s.user_errors.password="Please provide password."),s.userForm.password&&s.userForm.password.length<6&&(s.user_errors.password="Password must be of atleast 6 characters");var t=Object.keys(s.user_errors);return!(t&&0<t.length)},c=function(e){if(e&&(n=!0),!n)return!1;s.errors={},s.institute.campus_enabled&&(s.bioletForm.campus||(s.errors.campus="Please select campus")),s.institute.unique_id_enabled&&s.institute.unique_id_required&&"faculty"!=s.bioletForm.user_type&&(s.bioletForm.external_unique_id||(s.errors.external_unique_id="Please provide your "+s.institute.unique_id_label)),"Institution::College"==s.institute._type&&"faculty"!=p.user_type&&(s.bioletForm.course||(s.errors.course="Please select course"),s.bioletForm.to_year||s.bioletForm.current||(s.errors.to_year="Please select graduation year"),s.bioletForm.from_year||(s.errors.from_year="Please select joining year")),"Institution::Company"!=s.institute._type&&"faculty"!=p.user_type||(s.bioletForm.to_year||s.bioletForm.current||(s.errors.to_year="Please select leaving year"),s.bioletForm.from_year||(s.errors.from_year="Please select joining year"),s.bioletForm.designation||(s.errors.designation="Please provide designation")),"Institution::School"==s.institute._type&&"faculty"!=p.user_type&&(s.bioletForm.passout_year||(s.errors.passout_year="Please select passout year"),s.bioletForm.from_class||(s.errors.from_class="Please select from class"),s.bioletForm.to_class||(s.errors.to_class="Please select to class"));var t=Object.keys(s.errors);return!(t&&0<t.length)},t=function(){s.creating_user=!0,r({url:"/verify/primary",method:"POST",data:{institute_id:s.institute.id,strategy:"probable_network"}}).success(function(e){"temp_verified"==e.verify_status||"verified"==e.verify_status?window.location.reload():window.location="/get_verified"})},d=function(){s.creating_user=!0,r({url:"/add_network",method:"POST",data:{institute_info:e}}).success(function(){t()})},i=function(e){return!(e>s.currentYear)&&(!s.bioletForm||(!s.bioletForm.to_year||e<=s.bioletForm.to_year))},o=function(e){return!s.bioletForm||(!s.bioletForm.from_year||e>=s.bioletForm.from_year)},u=function(){e="Institution::School"==s.institute._type?{user_type:"alumni",campus_id:getValue(s.bioletForm.campus,["id"]),institute_id:s.institute.id,passout_year:s.bioletForm.passout_year,from_class:s.bioletForm.from_class,to_class:s.bioletForm.to_class}:{user_type:"alumni",campus_id:getValue(s.bioletForm.campus,["id"]),course_id:getValue(s.bioletForm.course,["id"]),from_year:s.bioletForm.from_year,to_year:s.bioletForm.to_year,institute_id:s.institute.id}};s.showFromClassOption=function(e){return(!s.bioletForm.to_class||e<=s.bioletForm.to_class)&&(!s.bioletForm.passout_year||e<=s.institute.school_close_class-s.bioletForm.passout_year+s.currentYear)},s.showToClassOption=function(e){return!s.bioletForm.from_class||e>=s.bioletForm.from_class},s.signupwithLinkedin=function(){if(!c(!0))return!1;u(),window.open("/profiles/social_sync/linkedin/user_signup/")},s.signupwithGoogle=function(){if(!c(!0))return!1;u(),window.open("/profiles/social_sync/google/user_signup/")},s.createAccount=function(){if(s.creating_user)return!0;var e=l(!0),t=c(!0);if(!e||!t)return!1;var n=getSearchString(),i=convertSearchStringtoObject(n),o={user:angular.copy(s.userForm)},a={};i.utm_source&&(a.utm_source=i.utm_source),i.utm_campaign&&(a.utm_campaign=i.utm_campaign),_.isEmpty(a)||(o.utm=a),s.creating_user=!0,u(),r({url:"/signup",method:"POST",data:o}).success(function(){d()}).error(function(e){s.error_message=e.server_message,alert(s.error_message)})},s.calcYears=function(){s.bioletForm&&s.bioletForm.current&&(s.bioletForm.to_year=""),s.from_years=[],angular.forEach(s.institute.valid_leaving_years,function(e){i(e)&&s.from_years.push(e)}),s.to_years=[],angular.forEach(s.institute.valid_leaving_years,function(e){o(e)&&s.to_years.push(e)})},s.campusChanged=function(){s.institute.campus_enabled&&(s.bioletForm&&s.bioletForm.campus?s.institute.valid_courses=s.bioletForm.campus.courses:s.institute.valid_courses=[],s.bioletForm.course=null,s.bioletForm.branch=null)},$(document).bind("ac_signup_success",function(e){var t=angular.copy(e.originalEvent.jsonData);window.location="/signup?sync_data_id="+t.sync_data_id}),$(document).bind("ac_signup_failure",function(e){e.originalEvent.jsonData;d()});var a=$(".js_ac_signup").data("content");s.user_name=a.name,s.user_email=a.email,s.institute=a.institute,s.calcYears(),s.$watch("bioletForm.campus",s.campusChanged,!0);var p={user_type:"alumni",campus:null,course:null,branch:null,from_year:"",to_year:"",designation:"",current:!1};s.bioletForm=angular.copy(p),s.$watch("bioletForm",function(){c()},!0),s.userForm={name:null,email:null,password:null,accepted_tos:!0,invite_token:null,probable_network:!0},a&&(s.userForm.email=a.email,s.userForm.name=a.name),s.$watch("userForm",function(){l()},!0)}]),angular.module("LandingComponent",[]),angular.module("LandingComponent").controller("LandingComponentsController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e),t.getLandingComponentsData=function(){t.state.landing_components_loading=!0,e({url:"/landing_components",method:"GET"}).success(function(e){t.job_postings=e.job_postings,t.directory_lists=e.directory_lists,t.institutes=e.institutes,t.public_posts=e.public_posts,t.popular_members=e.popular_members,t.state.landing_components_loading=!1}).error(function(){})},t.getRelatedInstitutesData=function(){t.state.related_institutes_loading=!0,e({url:"/related_institutes",method:"GET"}).success(function(e){t.related_institutes=e.related_institutes,t.state.related_institutes_loading=!1}).error(function(){})},t.scrollUp=function(){window.scroll(0,0)},t.seeInstituteComponent=function(e){t.currentInstitute.id?t.component_link[e]?window.location="https://"+t.currentInstitute.host+t.component_link[e]:t.openLoginDialog():t.scrollUp()},t.state={landing_components_loading:!1,related_institutes_loading:!1},t.component_link={jobs:"/job_posting",lists:"/directory/filter"},t.getLandingComponentsData(),t.currentInstitute.id&&t.getRelatedInstitutesData()}]),ac_bootstrap($(".js_ac_signup")[0],["Registration","LandingComponent"]),ac_bootstrap($(".js_institute_home")[0],["ac"]),ac_bootstrap($(".js_ac_global_signup")[0],["GlobalRegistration"]),angular.module("ResetPassword",["ngSanitize","ac"]),angular.module("ResetPassword").controller("ResetPasswordController",["$scope","$http","$timeout",function(t,e,n){setAngularCSRFToken(e);var i=function(){t.passwordForm=angular.copy(s)},o=function(){r&&n.cancel(r),t.errors={},t.passwordForm.password||(t.errors.password="Please enter your new password."),t.passwordForm.password&&t.passwordForm.password.length<6&&(t.errors.password="Password should be atleast of 6 characters"),t.passwordForm.password&&!t.passwordForm.confirm_password&&(t.errors.confirm_password="Please confirm your new password."),t.passwordForm.password&&t.passwordForm.confirm_password&&t.passwordForm.confirm_password!=t.passwordForm.password&&(t.errors.confirm_password="Password does not matches the confirm password.");var e=Object.keys(t.errors);return r=n(function(){t.errors=null},5e3),!(e&&0<e.length)};t.submitPasswordForm=function(){if(t.loadingPasswordSubmit||!o())return!1;t.loadingPasswordSubmit=!0,e({method:"POST",url:"/password/"+a,data:{user:t.passwordForm}}).success(function(e){i(),t.loadingPasswordSubmit=!1,t.success_message="Password change successfull.",n(function(){window.location=e.redirect_url},5e3),recordAnalyticsEvent("Password","Password Changed")}).error(function(e){t.loadingPasswordSubmit=!1,t.error_message=e.server_message,n(function(){t.error_message=""},5e3)})};var a=$(".js_reset_password").data("token"),s={password:null,confirm_password:null},r=null;i()}]),ac_bootstrap($(".js_reset_password")[0],["ResetPassword"]),angular.module("Verification",["ngSanitize","ac"]),angular.module("Verification").controller("VerifyBioletController",["$scope","$http","$timeout",function(n,t,i){setAngularCSRFToken(t);var e=function(){n.fetching_db_users=!0,t({url:"/db_match_users",method:"GET",params:{institute_id:n.institute.id}}).success(function(e){n.fetching_db_users=!1,n.matchedUsers=e.available_raw_users,n.matchedUsers&&0<n.matchedUsers.length?n.form_type="db_matching":o()}).error(function(e){n.fetching_db_users=!1,n.verify_error_msg=e.server_message})},o=function(){if(n.db_match_skipped)return!0;n.db_match_skipped=!0,n.verifying_biolet=!0,t({url:"/verify/primary",method:"POST",data:{institute_id:n.institute.id}}).success(function(e){n.verifying_biolet=!1,"verified"==e.verify_status||"temp_verified"==e.verify_status?("temp_verified"==e.verify_status?n.verify_success_msg="Success! You have now joined "+n.institute.metadata.title+" Alumni Network on AlmaConnect.":"verified"==e.verify_status&&(n.verify_success_msg="Success! You have been verified for "+n.institute.metadata.title+" Alumni Network on AlmaConnect."),window.location.reload()):"requested"==e.verify_status?window.location="/verification_requested?type=manual_approval":"not_verified"==e.verify_status&&(window.location="/get_verified")}).error(function(e){n.verifying_biolet=!1,n.verify_success_msg=e.server_message})},a=function(){if(!n.institute.metadata.email_domains)return null;var e="^.+[@.]("+n.institute.metadata.email_domains.join("|")+")$",t=[];return angular.forEach(n.institute.metadata.email_domains,function(e){t.push("@"+e)}),n.email_domains_label="Your "+t.join(" or ")+" email id",RegExp(e,"i")},s=function(){var e=n.institutionEmailForm.email;n.errors||(n.errors={}),delete n.errors.email,e||(n.errors.email="Please provide your email"),e&&!_.test(e)&&(n.errors.email="Please enter valid email."),m&&e&&!m.test(e)&&(n.errors.email="Please enter your valid institute email.");var t=Object.keys(n.errors);return!(t&&0<t.length)},r=function(){if("institution_email"!=n.state.selected_strategy)return!1;if(!s())return!1;var e={institute_id:n.institute.id,email:n.institutionEmailForm.email};n.verifying_biolet=!0,t({url:"/verify/institution_email",method:"POST",params:e}).success(function(){c("biolet_verification"),n.verifying_biolet=!1,recordRegAnalytics(n.network_page,"ConnectNetwork NetworkConnectionPending","InstituteEmail"),window.location="/verification_requested?type=institution_email"}).error(function(e){n.verifying_biolet=!1,n.verify_error_msg=e.server_message})},l=function(){if("manual_approval"!=n.state.selected_strategy)return!1;var e={institute_id:n.institute.id};n.verifying_biolet=!0,t({url:"/verify/manual_approval",method:"POST",data:e}).success(function(){c("biolet_verification"),n.verifying_biolet=!1,recordRegAnalytics(n.network_page,"ConnectNetwork NetworkConnectionPending","ManualApproval"),window.location="/verification_requested?type=manual_approval"}).error(function(e){n.verifying_biolet=!1,n.verify_error_msg=e.server_message})};n.set_verify_error_msg=function(e){n.verify_error_msg=e},n.set_verify_success_msg=function(e){n.verify_success_msg=e},n.validateEmail=s,n.fetchMatchingUsers=function(){-1==n.institute.metadata.all_strategies.indexOf("database_matching")?o():e()},n.selectStrategy=function(e){n.verify_error_msg=null,n.state.selected_strategy=e},n.submitForVerification=function(){n.verify_error_msg=null,"institution_email"==n.state.selected_strategy?r():"manual_approval"==n.state.selected_strategy?l():n.verify_error_msg="You need to select one of the verification strategies listed above"},n.submitForDbMatching=function(){if(n.verify_error_msg=null,n.state.skip_db_matching)o();else if(n.state.selected_raw_user_id){var e={institute_id:n.institute.id,raw_user_id:n.state.selected_raw_user_id};n.verifying_biolet=!0,t({url:"/verify/database_matching",method:"POST",params:e}).success(function(){n.verifying_biolet=!1,n.verify_success_msg="You have been successfully verified for "+n.institute.metadata.title+" Alumni Network.",window.location.reload(),i(function(){window.location.reload()},5e3),recordRegAnalytics(n.network_page,"ConnectNetwork NetworkConnected","DbMatching",function(){window.location.reload()})}).error(function(e){n.verifying_biolet=!1,n.verify_error_msg=e.server_message})}else confirm("Are you sure?")&&o()},n.goToUpdateBiolet=function(){n.form_type="institute_info"},n.goToDbMatching=function(){n.matchedUsers&&0<n.matchedUsers.length?n.form_type="db_matching":n.form_type="institute_info"};var c=function(e){t({method:"POST",url:"/get_started/task_completed",data:{task_names:e}})},d=$(".js_networks").data("content");n.institute=d.institute,n.institute.metadata.support_email_label&&(n.institute.metadata.support_email_label=n.institute.metadata.support_email_label.split("#")),n.other_strategies=[],
-1!=n.institute.metadata.other_strategies.indexOf("email_vouching")&&n.other_strategies.push({type:"email_vouching",text:"Social Verification"}),-1!=n.institute.metadata.other_strategies.indexOf("institution_email")&&n.other_strategies.push({type:"institution_email",text:"Official Email ID"}),-1!=n.institute.metadata.other_strategies.indexOf("manual_approval")&&n.other_strategies.push({type:"manual_approval",text:"Manual Approval"});var u=getSearchString(),p=convertSearchStringtoObject(u);n.network_page=!1,n.currentInstitute.host&&(n.network_page=!0),n.via=p.trk||p.via,recordRegAnalytics(n.network_page,"ConnectNetwork Opened",n.via),"confirm"==p.trk&&recordRegAnalytics(n.network_page,"SignupPage UserCreated","email"),n.institutionEmailForm={email:null};var _=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/,m=a();n.state={selected_raw_user_id:null,tagged_user:null,skip_db_matching:null,selected_strategy:getValue(n.other_strategies[0],"type")},n.form_type="institute_info",-1!=window.location.pathname.indexOf("get_verified")&&(n.form_type="other_strategies",c("biolet_verification_init"))}]),angular.module("Verification").controller("EmailVouchingController",["$scope","$http","$timeout",function(n,i,e){setAngularCSRFToken(i);var o=function(e){i({method:"POST",url:"/get_started/task_completed",data:{task_names:e}})},t=function(){n.loading_batchmates=!0,i({url:"/verification/batchmates",method:"GET"}).success(function(e){n.loading_batchmates=!1,n.batchmates=e})};n.submitEmailVouching=function(){if("email_vouching"!=n.state.selected_strategy)return!1;var t=angular.copy(n.contact_details);angular.forEach(n.selectedEmailContacts,function(e){t.push(e)}),angular.forEach(n.already_verified_contact_details,function(e){t.push(e)}),n.addedContactDetails()&&o(["biolet_verification","email_vouching"]),n.verifying_biolet=!0,i({url:"/verify/email_vouching",method:"POST",data:{contact_details:t,institute_id:n.currentInstitute.id,init_via:n.email_vouching_state.verification_type}}).success(function(e){n.verifying_biolet=!1;var t="Your vouching requests for verification has been sent, you should get verified within 1-2 days.";n.currentInstitute.allow_usage_by_unverified_users&&(t+="Meanwhile, you can start using the platform.",window.location=e.redirect_url),n.set_verify_success_msg(t)}).error(function(e){n.verifying_biolet=!1,n.set_verify_error_msg(e.server_message)})},n.skipEmailVouching=function(){o("email_vouching_skip"),window.location="/contributions/sneak_peek"},n.addedContactDetails=function(){var t=!1;return!_.isEmpty(n.selectedEmailContacts)||(angular.forEach(n.contact_details,function(e){e.email&&(t=!0)}),t)},n.goToNextState=function(){n.import_contacts_done=!0},n.goToPrevState=function(){n.import_contacts_done=!1},n.syncForContacts=function(e){"gmail"==e?window.open("/profiles/social_sync/google/email_vouching","Google permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300"):window.open("/profiles/social_sync/yahoo/email_vouching","Yahoo permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300")},n.fetchContacts=function(){n.fetching_contacts=!0,i({url:"/profiles/fetch_contacts",method:"GET"}).success(function(e){n.contact_details=[],n.email_contacts=e.email_contacts,n.matching_users=e.matching_users,n.fetching_contacts=!1,n.goToNextState()}).error(function(){n.fetching_contacts=!1,n.goToNextState&&n.goToNextState()})},n.addOrRemoveContact=function(e){n.selectedEmailContacts[e.email]?delete n.selectedEmailContacts[e.email]:n.selectedEmailContacts[e.email]=e},n.addAnotherBatchmate=function(){n.contact_details.push({name:null,email:null})},n.expandCopyLink=function(){n.expanded_copy_link=!0},n.maxContactSelected=function(){return 25<=Object.keys(n.selectedEmailContacts).length},n.shareLinkOnWhatsApp=function(){n.whatsapp_clicked=!0,window.location="whatsapp://send?text=Need 4-5 of my classmates to verify me. Can you please do so? "+n.verification_link+"?utm_source=whatsapp&utm_campaign=verification_request"};var a=$(".js_networks").data("content");n.already_verified_contact_details=a.already_verified_contact_details,n.verification_link=a.verification_link,n.contact_details=[{name:null,email:null}],n.selectedEmailContacts={},n.email_vouching_state={search_term:null,verification_type:"import"},o("email_vouching_init"),n.$watch("contact_details",function(){if("import"!=n.email_vouching_state.verification_type){var t=!1;angular.forEach(n.contact_details,function(e){e.name&&0<e.name.length||e.email&&0<e.email.length||(t=!0)}),t||e(function(){n.addAnotherBatchmate()})}},!0),n.$watch("email_vouching_state.verification_type",function(){"manual"==n.email_vouching_state.verification_type&&n.contact_details.length<3&&(n.addAnotherBatchmate(),n.addAnotherBatchmate()),"use_existing_records"==n.email_vouching_state.verification_type&&t()},!0)}]),angular.module("Verification").controller("AddBioletController",["$scope","$http","$timeout","FullMonthNames",function(n,t,e,i){setAngularCSRFToken(t);var o=function(e){return!(e>n.currentYear)&&(!n.bioletForm||(!n.bioletForm.to_year||e<=n.bioletForm.to_year))},a=function(e){return!n.bioletForm||(!n.bioletForm.from_year||(!n.bioletForm.to_year||(n.bioletForm.from_year!=n.bioletForm.to_year||e.id<=n.bioletForm.to_month)))},s=function(e){return!(n.institute&&n.institute.metadata&&"Institution::Company"==n.institute.metadata._type&&e>n.currentYear)&&(!n.bioletForm||(n.bioletForm.current?e>n.currentYear:!n.bioletForm.from_year||e>=n.bioletForm.from_year))},r=function(e){return!n.bioletForm||(!n.bioletForm.from_year||(!n.bioletForm.to_year||(n.bioletForm.from_year!=n.bioletForm.to_year||e.id>=n.bioletForm.from_month)))};n.calcMonthYears=function(){n.bioletForm&&n.bioletForm.current&&(n.bioletForm.to_year=""),n.from_years=[],angular.forEach(n.institute.metadata.valid_leaving_years,function(e){o(e)&&n.from_years.push(e)}),n.to_years=[],angular.forEach(n.institute.metadata.valid_leaving_years,function(e){s(e)&&n.to_years.push(e)}),n.from_months=[],n.months=populateTime(1,12,i),angular.forEach(n.months,function(e){a(e)&&n.from_months.push(e)}),n.to_months=[],angular.forEach(n.months,function(e){r(e)&&n.to_months.push(e)})},n.calcMonthYears(),n.showMemberType=function(){return"Institution::Company"!=n.institute.metadata._type},n.showCourse=function(){return"Institution::College"==n.institute.metadata._type&&"faculty"!=n.bioletForm.user_type},n.showBranch=function(){return!!n.bioletForm.branch||!(n.institute.metadata.lock_suggestions&&!(n.institute.metadata.valid_branches&&0<n.institute.metadata.valid_branches.length))&&("Institution::College"==n.institute.metadata._type&&"faculty"!=n.bioletForm.user_type&&(!n.institute.metadata.lock_suggestions||!n.bioletForm.course||n.institute.metadata.valid_branches&&0<n.institute.metadata.valid_branches.length))},n.showJoiningYear=function(){return"Institution::School"!=n.institute.metadata._type||"faculty"==n.bioletForm.user_type},n.showDesignation=function(){return"Institution::Company"==n.institute.metadata._type||"faculty"==n.bioletForm.user_type},n.showSchoolClasses=function(){return"Institution::School"==n.institute.metadata._type&&"alumni"==n.bioletForm.user_type},n.showFromClassOption=function(e){return(!n.bioletForm.to_class||e<=n.bioletForm.to_class)&&(!n.bioletForm.passout_year||e<=n.institute.metadata.school_close_class-n.bioletForm.passout_year+n.currentYear)},n.showToClassOption=function(e){return!n.bioletForm.from_class||e>=n.bioletForm.from_class},n.fromYearLabel=function(){return n.institute.metadata.joining_year_label&&"Joining Year"!=n.institute.metadata.joining_year_label?n.institute.metadata.joining_year_label:"Institution::Company"==n.institute.metadata._type?"From (Year)":"Joining Year"},n.toYearLabel=function(){return n.institute.metadata.leaving_year_label&&"Leaving Year"!=n.institute.metadata.leaving_year_label?n.institute.metadata.leaving_year_label:"Institution::Company"==n.institute.metadata._type?"To (Year)":"Leaving Year"},n.fromMonthLabel=function(){return n.institute.metadata.joining_month_label&&"Joining Month"!=n.institute.metadata.joining_month_label?n.institute.metadata.joining_month_label:"Institution::Company"==n.institute.metadata._type?"From (Month)":void 0},n.toMonthLabel=function(){return n.institute.metadata.leaving_month_label&&"Leaving Month"!=n.institute.metadata.leaving_month_label?n.institute.metadata.leaving_month_label:"Institution::Company"==n.institute.metadata._type?"To (Month)":void 0},n.campusChanged=function(){n.institute.metadata.campus_enabled&&(n.bioletForm&&n.bioletForm.campus?n.institute.metadata.valid_courses=n.bioletForm.campus.courses:n.institute.metadata.valid_courses=[],n.bioletForm.course=null,n.bioletForm.branch=null)},n.$watch("bioletForm.campus",n.campusChanged,!0),n.courseChanged=function(){n.bioletForm&&n.bioletForm.course?n.institute.metadata.valid_branches=n.bioletForm.course.branches||[]:n.institute.metadata.valid_branches=[],n.bioletForm.branch=null},n.$watch("bioletForm.course",n.courseChanged,!0);var l=!1;n.validBiolet=function(e){if(e&&(l=!0),!l)return!1;n.errors={},n.institute.metadata.campus_enabled&&(n.bioletForm.campus||(n.errors.campus="Please select campus")),"faculty"!=n.bioletForm.user_type?n.institute.metadata.unique_id_enabled&&n.institute.metadata.unique_id_required&&(n.bioletForm.institute_card_selected?n.bioletForm.institute_card?n.bioletForm.institute_card.uploaded||(n.errors.institute_card=n.institute.metadata.institute_card_label+" upload is in progress"):n.errors.institute_card="Please upload your "+n.institute.metadata.institute_card_label:n.bioletForm.external_unique_id||(n.errors.external_unique_id="Please provide your "+n.institute.metadata.unique_id_label)):n.institute.metadata.unique_id_enabled_for_faculty&&n.institute.metadata.unique_id_required_for_faculty&&(n.bioletForm.external_unique_id||(n.errors.external_unique_id="Please provide your "+n.institute.metadata.unique_id_label_for_faculty)),"alumni"==n.bioletForm.user_type&&n.currentInstitute.institute_entity_enabled&&(n.bioletForm.course||(n.errors.course="Please provide your "+n.institute.metadata.course_label)),n.institute.metadata.dob_enabled&&n.institute.metadata.dob_required&&(n.bioletForm.dob||(n.errors.dob="Please provide your date of birth")),n.institute.metadata.govt_card_enabled&&n.institute.metadata.govt_card_required&&(n.bioletForm.govt_card?n.bioletForm.govt_card.uploaded||(n.errors.govt_card=n.institute.metadata.govt_card_label+" upload is in progress"):n.errors.govt_card="Please upload your "+n.institute.metadata.govt_card_label),n.currentUser.is_official?n.bioletForm.about||(n.errors.about="Please provide description about club/committee"):(n.showCourse()&&(n.bioletForm.course||(n.errors.course="Please select course")),n.showJoiningYear()&&(n.bioletForm.from_year||(n.errors.from_year="Please select joining year"),n.bioletForm.current||n.bioletForm.to_year||(n.errors.to_year="Please select leaving year")),n.showDesignation()&&(n.bioletForm.designation||(n.errors.designation="Please select your designation")),n.showSchoolClasses()&&(n.bioletForm.passout_year||(n.errors.passout_year="Please select your "+n.institute.metadata.school_close_class+"th passout year"),n.bioletForm.from_class||(n.errors.from_class="Please select the class you studied from in the school"),n.bioletForm.to_class||(n.errors.to_class="Please select the class you studied upto in the school")));var t=Object.keys(n.errors);return!(t&&0<t.length)},n.createOrUpdateBiolet=function(){if(n.update_biolet_error_msg=null,!n.validBiolet(!0))return!1;if(n.validateAnswers&&!n.validateAnswers(!0))return!1;var e=angular.copy(n.bioletForm);e.institute_id=n.institute.metadata.id,e.campus&&(e.campus_id=e.campus.id,delete e.campus),e.course&&(e.course_id=e.course.id,delete e.course),e.branch&&(e.branch_id=e.branch.id,delete e.branch),e.institute_card&&(e.institute_card_id=e.institute_card.id,delete e.institute_card),e.govt_card&&(e.govt_card_id=e.govt_card.id,delete e.govt_card),n.updating_biolet=!0,t({url:"/add_network",method:"POST",data:{institute_info:e}}).success(function(e){n.updating_biolet=!1,n.institute.biolet=e.biolet,n.fetchMatchingUsers(),recordRegAnalytics(n.network_page,"ConnectNetwork NetworkRequested",n.via)}).error(function(e){n.updating_biolet=!1,n.update_biolet_error_msg=e.server_message})};var c={user_type:"alumni",campus:null,course:null,branch:null,from_year:"",from_month:"",to_year:"",to_month:"",from_class:"",to_class:"",passout_year:"",current:null,designation:null,answers:[]};n.bioletForm=angular.copy(c),e(function(){n.institute.biolet&&(n.institute.biolet.user_type&&(n.bioletForm.user_type=n.institute.biolet.user_type),e(function(){n.bioletForm.campus=n.institute.biolet.campus},0),e(function(){n.bioletForm.course=n.institute.biolet.course,n.courseChanged()},0),e(function(){n.bioletForm.branch=n.institute.biolet.branch},0),n.bioletForm.from_year=parseInt(n.institute.biolet.from_year),n.bioletForm.from_month=parseInt(n.institute.biolet.from_month),n.bioletForm.to_year=parseInt(n.institute.biolet.to_year),n.bioletForm.to_month=parseInt(n.institute.biolet.to_month),n.bioletForm.external_unique_id=n.institute.biolet.external_unique_id,n.bioletForm.govt_card=n.institute.biolet.govt_card,n.bioletForm.institute_card=n.institute.biolet.institute_card,n.institute.biolet.institute_card&&(n.bioletForm.institute_card_selected=!0),n.bioletForm.dob=n.institute.biolet.dob,n.bioletForm.designation=n.institute.biolet.designation,n.bioletForm.from_class=n.institute.biolet.from_class,n.bioletForm.to_class=n.institute.biolet.to_class,n.bioletForm.passout_year=n.institute.biolet.passout_year),n.initialized_biolet=!0,n.bioletForm.answers=n.institute.answers,"Institution::Company"==n.institute.metadata._type&&(n.bioletForm.user_type="current employee")},0),n.$watch("bioletForm",function(){n.validBiolet()},!0),n.user_types={alumni:"Student / Alums",faculty:"Work / Worked Here",employee:"Current Employee / Alumni"}}]),angular.module("Verification").controller("AddIccrBioletController",["$scope","$rootScope","$http","$timeout",function(n,e,i,t){setAngularCSRFToken(i);var o=function(e){return!(e>n.currentYear)&&(!n.bioletForm||(!n.bioletForm.to_year||e<=n.bioletForm.to_year))},a=function(e){return!(n.institute&&n.institute.metadata&&"Institution::Company"==n.institute.metadata._type&&e>n.currentYear)&&(!n.bioletForm||(n.bioletForm.current?e>n.currentYear:!n.bioletForm.from_year||e>=n.bioletForm.from_year))};n.calcYears=function(){n.bioletForm&&n.bioletForm.current&&(n.bioletForm.to_year=""),n.from_years=[],angular.forEach(n.institute.metadata.valid_leaving_years,function(e){o(e)&&n.from_years.push(e)}),n.to_years=[],angular.forEach(n.institute.metadata.valid_leaving_years,function(e){a(e)&&n.to_years.push(e)})},n.calcYears(),n.changeType=function(e){n.iccrForm.type=e},n.showCourse=function(){return"Institution::College"==n.institute.metadata._type&&"faculty"!=n.bioletForm.user_type},n.showJoiningYear=function(){return"Institution::School"!=n.institute.metadata._type||"faculty"==n.bioletForm.user_type},n.showDesignation=function(){return"Institution::Company"==n.institute.metadata._type||"faculty"==n.bioletForm.user_type},n.showSchoolClasses=function(){return"Institution::School"==n.institute.metadata._type&&"alumni"==n.bioletForm.user_type},n.showFromClassOption=function(e){return(!n.bioletForm.to_class||e<=n.bioletForm.to_class)&&(!n.bioletForm.passout_year||e<=n.institute.metadata.school_close_class-n.bioletForm.passout_year+n.currentYear)},n.showToClassOption=function(e){return!n.bioletForm.from_class||e>=n.bioletForm.from_class},n.fromYearLabel=function(){return n.institute.metadata.joining_year_label&&"Joining Year"!=n.institute.metadata.joining_year_label?n.institute.metadata.joining_year_label:"Institution::Company"==n.institute.metadata._type?"From Year":"Joining Year"},n.toYearLabel=function(){return n.institute.metadata.leaving_year_label&&"Leaving Year"!=n.institute.metadata.leaving_year_label?n.institute.metadata.leaving_year_label:"Institution::Company"==n.institute.metadata._type?"To Year":"Leaving Year"},n.campusChanged=function(){n.institute.metadata.campus_enabled&&(n.bioletForm&&n.bioletForm.campus?n.institute.metadata.valid_courses=n.bioletForm.campus.courses:n.institute.metadata.valid_courses=[],n.bioletForm.course=null,n.bioletForm.branch=null)},n.$watch("bioletForm.campus",n.campusChanged,!0),n.courseChanged=function(){n.bioletForm&&n.bioletForm.course?n.institute.metadata.valid_branches=n.bioletForm.course.branches||[]:n.institute.metadata.valid_branches=[],n.bioletForm.branch=null},n.$watch("bioletForm.course",n.courseChanged,!0);var s=!1;n.validBiolet=function(e){if(e&&(s=!0),!s)return!1;n.errors={},n.institute.metadata.campus_enabled&&(n.iccrForm.campus||(n.errors.campus="Please select campus")),n.showCourse()&&(n.bioletForm.course||(n.errors.course="Please select course")),n.showJoiningYear()&&(n.bioletForm.from_year||(n.errors.from_year="Please select joining year"),n.bioletForm.current||n.bioletForm.to_year||(n.errors.to_year="Please select leaving year")),n.showDesignation()&&(n.iccrForm.designation||(n.errors.designation="Please select your designation")),n.showSchoolClasses()&&(n.bioletForm.passout_year||(n.errors.passout_year="Please select your "+n.institute.metadata.school_close_class+"th passout year"),n.bioletForm.from_class||(n.errors.from_class="Please select the class you studied from in the school"),n.bioletForm.to_class||(n.errors.to_class="Please select the class you studied upto in the school"));var t=Object.keys(n.errors);return!(t&&0<t.length)},n.createOrUpdateBiolet=function(){if(n.update_biolet_error_msg=null,!n.validBiolet(!0))return!1;var e=angular.copy(n.bioletForm),t=angular.copy(n.iccrForm);t.institute_id=n.institute.metadata.id,t.user_type=n.bioletForm.user_type,"alumni"==t.user_type&&n.addAdditionalBiolet(),t.campus&&(t.campus_id=t.campus.id,delete t.campus),e.from_year&&(t.from_year=e.from_year),e.to_year&&(t.to_year=e.to_year),e.current&&(t.current=e.current),n.updating_biolet=!0,i({url:"/add_network",method:"POST",data:{institute_info:t}}).success(function(e){n.updating_biolet=!1,n.institute.biolet=e.biolet,n.fetchMatchingUsers(),recordRegAnalytics(n.network_page,"ConnectNetwork NetworkRequested",n.via)}).error(function(e){n.updating_biolet=!1,n.update_biolet_error_msg=e.server_message})},n.addAdditionalBiolet=function(){var e={type:"Biolets::Education",from_year:n.bioletForm.from_year,to_year:n.bioletForm.to_year,course_id:getValue(n.bioletForm.course,"id"),branch_id:getValue(n.bioletForm.branch,"id"),institute_id:getValue(n.bioletForm.institute,"id"),current:n.bioletForm.current},t={profile_id:n.currentUser.id,biolet:e};n.updateBioletLoading=!0,i({method:"POST",url:"/profiles/update_profile",data:{user:t}}).success(function(){}).error(function(){})};var r="alumni";"Institution::Company"==n.institute.metadata._type&&(r="employee");var l={user_type:r,campus:null,course:null,branch:null,from_year:"",to_year:"",from_class:"",to_class:"",passout_year:"",current:null,designation:null,answers:[]},c={campus:null,course_id:null,type:null};n.bioletForm=angular.copy(l),n.iccrForm=angular.copy(c),n.currentUser=e.currentUser,t(function(){n.institute.biolet&&(t(function(){n.iccrForm.campus=n.institute.biolet.campus},0),t(function(){n.iccrForm.course_id=n.institute.biolet.course.id,n.courseChanged()},0),n.iccrForm.from_year=parseInt(n.institute.biolet.from_year),n.iccrForm.to_year=parseInt(n.institute.biolet.to_year),n.iccrForm.designation=n.institute.biolet.designation,n.iccrForm.institute_id=n.institute.id),n.initialized_biolet=!0,n.bioletForm.answers=n.institute.answers},0),n.$watch("bioletForm",function(){n.validBiolet()},!0),n.user_types={alumni:"Student / Alums",faculty:"Work / Worked Here",employee:"Current Employee / Alumni"}}]),angular.module("Verification").controller("AddSyneosBioletController",["$scope","$http","$timeout","FullMonthNames",function(n,t,e,i){setAngularCSRFToken(t);var o=function(e){return!(e>n.currentYear)&&(!n.bioletForm||(!n.bioletForm.to_year||e<=n.bioletForm.to_year))},a=function(e){return!n.bioletForm||(!n.bioletForm.from_year||(!n.bioletForm.to_year||(n.bioletForm.from_year!=n.bioletForm.to_year||e.id<=n.bioletForm.to_month)))},s=function(e){return!(n.institute&&n.institute.metadata&&"Institution::Company"==n.institute.metadata._type&&e>n.currentYear)&&(!n.bioletForm||(n.bioletForm.current?e>n.currentYear:!n.bioletForm.from_year||e>=n.bioletForm.from_year))},r=function(e){return!n.bioletForm||(!n.bioletForm.from_year||(!n.bioletForm.to_year||(n.bioletForm.from_year!=n.bioletForm.to_year||e.id>=n.bioletForm.from_month)))};n.calcMonthYears=function(){n.bioletForm&&n.bioletForm.current&&(n.bioletForm.to_year=""),n.from_years=[],angular.forEach(n.institute.metadata.valid_leaving_years,function(e){o(e)&&n.from_years.push(e)}),n.to_years=[],angular.forEach(n.institute.metadata.valid_leaving_years,function(e){s(e)&&n.to_years.push(e)}),n.from_months=[],n.months=populateTime(1,12,i),angular.forEach(n.months,function(e){a(e)&&n.from_months.push(e)}),n.to_months=[],angular.forEach(n.months,function(e){r(e)&&n.to_months.push(e)})},n.calcMonthYears(),n.showMemberType=function(){return"Institution::Company"!=n.institute.metadata._type},n.showCourse=function(){return"Institution::College"==n.institute.metadata._type&&"faculty"!=n.bioletForm.user_type},n.showBranch=function(){return!!n.bioletForm.branch||!(n.institute.metadata.lock_suggestions&&!(n.institute.metadata.valid_branches&&0<n.institute.metadata.valid_branches.length))&&("Institution::College"==n.institute.metadata._type&&"faculty"!=n.bioletForm.user_type&&(!n.institute.metadata.lock_suggestions||!n.bioletForm.course||n.institute.metadata.valid_branches&&0<n.institute.metadata.valid_branches.length))},n.showJoiningYear=function(){return"Institution::School"!=n.institute.metadata._type||"faculty"==n.bioletForm.user_type},n.showDesignation=function(){return"Institution::Company"==n.institute.metadata._type||"faculty"==n.bioletForm.user_type},n.showSchoolClasses=function(){return"Institution::School"==n.institute.metadata._type&&"alumni"==n.bioletForm.user_type},n.showFromClassOption=function(e){return(!n.bioletForm.to_class||e<=n.bioletForm.to_class)&&(!n.bioletForm.passout_year||e<=n.institute.metadata.school_close_class-n.bioletForm.passout_year+n.currentYear)},n.showToClassOption=function(e){return!n.bioletForm.from_class||e>=n.bioletForm.from_class},n.fromYearLabel=function(){return n.institute.metadata.joining_year_label&&"Joining Year"!=n.institute.metadata.joining_year_label?n.institute.metadata.joining_year_label:"Institution::Company"==n.institute.metadata._type?"From (Year)":"Joining Year"},n.toYearLabel=function(){return n.institute.metadata.leaving_year_label&&"Leaving Year"!=n.institute.metadata.leaving_year_label?n.institute.metadata.leaving_year_label:"Institution::Company"==n.institute.metadata._type?"To (Year)":"Leaving Year"},n.fromMonthLabel=function(){return n.institute.metadata.joining_month_label&&"Joining Month"!=n.institute.metadata.joining_month_label?n.institute.metadata.joining_month_label:"Institution::Company"==n.institute.metadata._type?"From (Month)":void 0},n.toMonthLabel=function(){return n.institute.metadata.leaving_month_label&&"Leaving Month"!=n.institute.metadata.leaving_month_label?n.institute.metadata.leaving_month_label:"Institution::Company"==n.institute.metadata._type?"To (Month)":void 0},n.campusChanged=function(){n.institute.metadata.campus_enabled&&(n.bioletForm&&n.bioletForm.campus?n.institute.metadata.valid_courses=n.bioletForm.campus.courses:n.institute.metadata.valid_courses=[],n.bioletForm.course=null,n.bioletForm.branch=null)},n.$watch("bioletForm.campus",n.campusChanged,!0),n.courseChanged=function(){n.bioletForm&&n.bioletForm.course?n.institute.metadata.valid_branches=n.bioletForm.course.branches||[]:n.institute.metadata.valid_branches=[],n.bioletForm.branch=null},n.$watch("bioletForm.course",n.courseChanged,!0);var l=!1;n.validBiolet=function(e){if(e&&(l=!0),!l)return!1;n.errors={},n.institute.metadata.campus_enabled&&(n.bioletForm.campus||(n.errors.campus="Please select campus")),"faculty"!=n.bioletForm.user_type?n.institute.metadata.unique_id_enabled&&n.institute.metadata.unique_id_required&&(n.bioletForm.institute_card_selected?n.bioletForm.institute_card?n.bioletForm.institute_card.uploaded||(n.errors.institute_card=n.institute.metadata.institute_card_label+" upload is in progress"):n.errors.institute_card="Please upload your "+n.institute.metadata.institute_card_label:n.bioletForm.external_unique_id||(n.errors.external_unique_id="Please provide your "+n.institute.metadata.unique_id_label)):n.institute.metadata.unique_id_enabled_for_faculty&&n.institute.metadata.unique_id_required_for_faculty&&(n.bioletForm.external_unique_id||(n.errors.external_unique_id="Please provide your "+n.institute.metadata.unique_id_label_for_faculty)),"alumni"==n.bioletForm.user_type&&n.currentInstitute.institute_entity_enabled&&(n.bioletForm.course||(n.errors.course="Please provide your "+n.institute.metadata.course_label)),n.institute.metadata.dob_enabled&&n.institute.metadata.dob_required&&(n.bioletForm.dob||(n.errors.dob="Please provide your date of birth")),n.institute.metadata.govt_card_enabled&&n.institute.metadata.govt_card_required&&(n.bioletForm.govt_card?n.bioletForm.govt_card.uploaded||(n.errors.govt_card=n.institute.metadata.govt_card_label+" upload is in progress"):n.errors.govt_card="Please upload your "+n.institute.metadata.govt_card_label),n.currentUser.is_official?n.bioletForm.about||(n.errors.about="Please provide description about club/committee"):(n.showCourse()&&(n.bioletForm.course||(n.errors.course="Please select course")),n.showJoiningYear()&&(n.bioletForm.from_year||(n.errors.from_year="Please select joining year"),n.bioletForm.current||n.bioletForm.to_year||(n.errors.to_year="Please select leaving year")),n.showDesignation()&&(n.bioletForm.designation||(n.errors.designation="Please select your designation")),n.showSchoolClasses()&&(n.bioletForm.passout_year||(n.errors.passout_year="Please select your "+n.institute.metadata.school_close_class+"th passout year"),n.bioletForm.from_class||(n.errors.from_class="Please select the class you studied from in the school"),n.bioletForm.to_class||(n.errors.to_class="Please select the class you studied upto in the school")));var t=Object.keys(n.errors);return!(t&&0<t.length)},n.createOrUpdateBiolet=function(){if(n.update_biolet_error_msg=null,!n.validBiolet(!0))return!1;if(n.validateAnswers&&!n.validateAnswers(!0))return!1;var e=angular.copy(n.bioletForm);e.institute_id=n.institute.metadata.id,e.campus&&(e.campus_id=e.campus.id,delete e.campus),e.course&&(e.course_id=e.course.id,delete e.course),e.branch&&(e.branch_id=e.branch.id,delete e.branch),e.institute_card&&(e.institute_card_id=e.institute_card.id,delete e.institute_card),e.govt_card&&(e.govt_card_id=e.govt_card.id,delete e.govt_card),0<e.biolet_tags.length&&(e.tags=e.biolet_tags.map(function(e){return e.name})),e.current_city&&(e.current_city_id=e.current_city.id),n.updating_biolet=!0,t({url:"/add_network",method:"POST",data:{institute_info:e}}).success(function(e){n.updating_biolet=!1,n.institute.biolet=e.biolet,n.fetchMatchingUsers(),recordRegAnalytics(n.network_page,"ConnectNetwork NetworkRequested",n.via)}).error(function(e){n.updating_biolet=!1,n.update_biolet_error_msg=e.server_message})};var c={user_type:"alumni",campus:null,course:null,branch:null,from_year:"",from_month:"",to_year:"",to_month:"",from_class:"",to_class:"",passout_year:"",current:null,designation:null,answers:[],biolet_tags:[]};n.bioletForm=angular.copy(c),e(function(){n.institute.biolet&&(n.institute.biolet.user_type&&(n.bioletForm.user_type=n.institute.biolet.user_type),e(function(){n.bioletForm.campus=n.institute.biolet.campus},0),e(function(){n.bioletForm.course=n.institute.biolet.course,n.courseChanged()},0),e(function(){n.bioletForm.branch=n.institute.biolet.branch},0),n.bioletForm.from_year=parseInt(n.institute.biolet.from_year),n.bioletForm.from_month=parseInt(n.institute.biolet.from_month),n.bioletForm.to_year=parseInt(n.institute.biolet.to_year),n.bioletForm.to_month=parseInt(n.institute.biolet.to_month),n.bioletForm.external_unique_id=n.institute.biolet.external_unique_id,n.bioletForm.govt_card=n.institute.biolet.govt_card,n.bioletForm.institute_card=n.institute.biolet.institute_card,n.institute.biolet.institute_card&&(n.bioletForm.institute_card_selected=!0),n.bioletForm.dob=n.institute.biolet.dob,n.bioletForm.designation=n.institute.biolet.designation,n.bioletForm.from_class=n.institute.biolet.from_class,n.bioletForm.to_class=n.institute.biolet.to_class,n.bioletForm.passout_year=n.institute.biolet.passout_year,n.bioletForm.biolet_tags=[],0<n.institute.biolet.biolet_tags.length&&(n.bioletForm.biolet_tags=n.institute.biolet.biolet_tags.map(function(e){return{name:e}}))),n.bioletForm.current_city=n.institute.user_info.current_city,n.initialized_biolet=!0,n.bioletForm.answers=n.institute.answers,"Institution::Company"==n.institute.metadata._type&&(n.bioletForm.user_type="current employee")},0),n.$watch("bioletForm",function(){n.validBiolet()},!0),n.user_types={alumni:"Student / Alums",faculty:"Work / Worked Here",employee:"Current Employee / Alumni"},n.all_biolet_tags=[{name:"Commercial (COM, PPC, Brand, Sales, Business / Corporate Development)"},{name:"Value and Access (VAH, HEOR, Market Access, Distribution)"},{name:"Medical (Medical Affairs, Clinical Development)"},{name:"Risk & Program Management (RPM, PMO, REMS)"},{name:"Research & Development (R&D, Kinapse Advisory)"},{name:"Syneos One (FSC, CIS)"},{name:"Centers of Excellence"},{name:"Internal (Finance, HR, Legal, IT, Knowledge Management, Admin, Operations, Marketing)"},{name:"Quality Compliance"}]}]),ac_bootstrap($(".js_networks")[0],["Verification"]),angular.module("SelectNetwork",["ngSanitize","ac"]),angular.module("SelectNetwork").controller("MainController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e),t.redirectToSelected=function(){var e=t.selected_institute.network_url+"network_details";window.location=e},t.showMoreMatchingInstitutes=function(){t.matching_limit=7,t.more_link=!1};var n=$(".js_select_networks").data("content");t.suggested_institutes=n.suggested_institutes,t.connected_institutes=n.connected_institutes,t.matching_limit=4,t.suggested_institutes.length>t.matching_limit&&(t.more_link=!0);var i=getSearchString(),o=convertSearchStringtoObject(i);t.navigated_via=o.trk,"confirm"==o.trk&&recordRegAnalytics(t.network_page,"SignupPage UserCreated","email")}]),ac_bootstrap($(".js_select_networks")[0],["SelectNetwork"]),angular.module("InstitutionRequest",["ngSanitize","ac"]),angular.module("InstitutionRequest").controller("InstitutionRequestController",["$scope","$http","$timeout",function(i,e){setAngularCSRFToken(e),i.checkFullName=function(e){i.name_error=null,i.errors.name=null;var t=new RegExp("^[a-zA-Z0-9 ]+$"),n=String.fromCharCode(e.charCode?e.charCode:e.which);if(!t.test(n))return e.preventDefault(),!1},i.checkSubdomain=function(e){i.subdomain_error=null,i.errors.subdomain=null;var t=new RegExp("^[a-zA-Z0-9]+$"),n=String.fromCharCode(e.charCode?e.charCode:e.which);if(!t.test(n))return e.preventDefault(),!1},i.validateFullName=function(){i.name_error=null,i.errors.name=null,i.instituteForm.name&&e({url:"/institution_request/validate_details",method:"GET",params:{name:i.instituteForm.name}}).success(function(e){e.exact_institute?(i.name_error="There exists an institute with the full name you are looking for.",i.errors.name=i.name_error,i.exact_institute=e.exact_institute,i.exact_institute_error=i.name_error,i.exact_institute_popup.showPopup()):e.possible_institute&&(i.possible_institute=e.possible_institute,i.possible_institute_popup.showPopup())})};var n=!(i.validateSubdomain=function(){i.subdomain_error=null,i.errors.subdomain=null,i.instituteForm.subdomain&&e({url:"/institution_request/validate_details",method:"GET",params:{subdomain:i.instituteForm.subdomain}}).success(function(e){e.exact_institute?(i.subdomain_error="There exists an institute with the link you are looking for.",i.errors.subdomain=i.subdomain_error,i.exact_institute=e.exact_institute,i.exact_institute_error=i.subdomain_error,i.exact_institute_popup.showPopup()):e.reserved_error&&(i.subdomain_error="The link you are looking for is already reserved for some specific purpose in our system.We will not be able to provide you with the above link. Kindly, go for some other link.",i.errors.subdomain=i.subdomain_error)})}),t=function(){if(n){if(i.errors={},i.name_error&&(i.errors.name=i.name_error),
i.instituteForm.name||(i.errors.name="Full name can not be blank"),i.instituteForm.name&&i.instituteForm.name.length<3&&(i.errors.name="Please enter a valid full name"),i.instituteForm.title||(i.errors.title="Short name can not be blank"),i.instituteForm.title&&i.instituteForm.title.length<2&&(i.errors.title="Please enter a valid short name"),i.instituteForm.est_year||(i.errors.est_year="Established year can not be blank"),i.instituteForm.est_year){var e=parseInt(i.instituteForm.est_year);(e>i.currentYear||e<1e3)&&(i.errors.est_year="Please enter a valid established year")}i.instituteForm.websites||(i.errors.websites="Website can not be blank"),i.instituteForm.subdomain||(i.errors.subdomain="Subdomain can not be blank"),i.subdomain_error&&(i.errors.subdomain=i.subdomain_error),console.log(i.instituteForm.ref_location),i.instituteForm.ref_location||(i.errors.ref_location="Location can not be blank");var t=Object.keys(i.errors);return!(t&&0<t.length)}};i.createOrUpdateInstituteRequest=function(){n=!0,t()&&(i.instituteForm.small_logo_id=getValue(i.instituteForm.small_logo,"id"),delete i.instituteForm.small_logo,i.creating_network=!0,e({url:"/institution_request",method:"POST",data:{institute:i.instituteForm}}).success(function(e){window.location=e.institute.root_url}).error(function(e){i.creating_network=!1,i.error_message=e.server_message}))},i.$watch("instituteForm",t,!0),i.institute=$(".js_network_request").data("institute").institute,i.institute_types=[{type:"college",text:"College/University"},{type:"school",text:"School"},{type:"company",text:"Company"}],i.placeholders={college:{name:"Indian Institute of Technology Delhi",title:"IIT Delhi",est_year:"1961",websites:"www.iitd.ac.in",collegiates:"IITDians",subdomain:"iitd",location:"Delhi"},school:{name:"Delhi Public School, RK Puram",title:"DPS Rkp",est_year:"1970",websites:"www.dpsrkp.net",collegiates:"Dipsites",subdomain:"dpsrkp",location:"Delhi"},company:{name:"AlmaConnect Solutions Pvt Ltd",title:"AlmaConnect",est_year:"2012",websites:"www.almaconnect.com",collegiates:"ACites",subdomain:"almaconnect",location:"Delhi"}},i.instituteForm={small_logo:null,institute_type:i.institute.type?i.institute.type:"college",name:i.institute.name?i.institute.name:null,title:i.institute.title?i.institute.title:null,est_year:i.institute.est_year?i.institute.est_year:null,websites:i.institute.websites?i.institute.websites.join(", "):null,collegiates:i.institute.collegiates?i.institute.collegiates:null,subdomain:i.institute.subdomain?i.institute.subdomain:null,ref_location:i.institute.ref_location?i.institute.ref_location:null},i.errors={}}]),ac_bootstrap($(".js_network_request")[0],["InstitutionRequest"]),angular.module("LoginPopup",["ngSanitize","ac","Registration"]),angular.module("LoginPopup").controller("LoginPopupController",["$scope","$http","$timeout","$window",function(o,e){setAngularCSRFToken(e),o.openLoginDialog=function(e,t,n,i){return o.only_login=i,o.currentBiolet&&o.currentBiolet.id?(e&&(window.location=e),!1):o.currentUser&&o.currentUser.id?i?(e&&(window.location=e),!1):(window.location="/network_details",!0):(o.url=e,o.heading=t,o.subheading=n,o.login_popup.showPopup(),safeApply(o),!0)},o.afterLogin=function(e){e.is_connected||o.only_login?o.url?window.location=o.url:window.location.reload():e.callback()}}]),ac_bootstrap($(".js_login_popup")[0],["LoginPopup"]),angular.module("PublicPost",["ngSanitize","ac"]),angular.module("PublicPost").controller("PublicPostController",["$scope","$http","$timeout","$window",function(t,e){setAngularCSRFToken(e),t.like=function(){t.openLoginDialog("/contributions/"+t.post.id)},t.toggleCommentBox=function(){t.openLoginDialog("/contributions/"+t.post.id)},t.viewMoreComments=function(){t.openLoginDialog("/contributions/"+t.post.id)},t.updateSharedFiles=function(){if("Contribution::User::Poll"==t.post.type&&(t.post.shared_link=null),t.shared_images=[],t.shared_files=[],t.post.shared_files){angular.forEach(t.post.shared_files,function(e){(e.content_type?null!=e.content_type.match(/image/):null!=e.url.match(/\.(jpeg|jpg|gif|png)$/))&&"Contribution::User::Poll"!=t.post.type?t.shared_images.push(e):t.shared_files.push(e)})}0<t.shared_images.length&&(t.post.shared_link=null)},t.post=$(".js_public_post").data("content"),t.updateSharedFiles()}]),angular.module("PublicPost").controller("CommentsController",["$scope","$http","$timeout","$window",function(e,t){setAngularCSRFToken(t)}]),angular.module("PublicPost").controller("CommentController",["$scope","$http","$timeout","$window",function(e,t){setAngularCSRFToken(t),e.showMoreContent=function(){e.moreContent=!1},e.moreContent=!1,e.comment.content_short&&(e.moreContent=!0)}]),ac_bootstrap($(".js_public_post")[0],["PublicPost"]),angular.module("UserVerified",["ngSanitize","ac"]),angular.module("UserVerified").controller("UserVerifiedController",["$scope","$http","$timeout",function(e,t){setAngularCSRFToken(t),e.continueToSignup=function(){e.loading=!0,window.location=e.verifier_redirect_url};var n=$(".js_user_verified").data("content");e.requester=n.requester,e.verifier_name=n.verifier_name,e.verifier_redirect_url=n.verifier_redirect_url}]),ac_bootstrap($(".js_user_verified")[0],["UserVerified"]),String.prototype.capitalize=function(){return this.replace(/-/g," ").toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/\s+/g," ")},angular.module("GetStarted",["InviteBatchmates","ngSanitize","ac"]),angular.module("GetStarted").controller("MainController",["$scope","$http","$timeout",function(e,t){setAngularCSRFToken(t),e.goToNext=function(){window.location=e.redirect_url},e.redirect_url=$("meta[name=redirect_url]").attr("content");var n=$("meta[name=current_slide_name]").attr("content");e.state={current_slide:n}}]),angular.module("InviteBatchmates",["ngSanitize","ac","InviteReminders","InvitationInfo"]),angular.module("InviteBatchmates").controller("BatchmatesController",["$scope","$http","$timeout","$rootScope",function(n,i,o,a){setAngularCSRFToken(i);var t=function(){n.selectedUserIds=[],n.selectedUsers={},n.select_state.selectAll=!1};n.showOrHideDefaultContent=function(){n.show_content?n.show_content=!1:n.show_content=!0},n.syncForContacts=function(e){e||(e=n.primary_email_provider),"gmail"==e?window.open("/profiles/social_sync/google/get_started","Google permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300"):"yahoo"==e?window.open("/profiles/social_sync/yahoo/get_started","Yahoo permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300"):"hotmail"==e&&window.open("/profiles/social_sync/hotmail/get_started","Hotmail permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300")},n.fetchContacts=function(){n.fetching_contacts=!0,i({url:"/profiles/fetch_contacts",method:"GET"}).success(function(e){n.email_contacts=e.email_contacts,n.matching_users=e.matching_users,n.fetching_contacts=!1,n.goToNextState&&n.goToNextState(),n.sendInvitePopup&&(n.sendInvitePopup.showPopup(),n.fetching_contacts=!1)}).error(function(){n.fetching_contacts=!1,n.goToNextState&&n.goToNextState()})},n.createUserInvite=function(e){if(!n.user_invite.emails)return alert("Please type email ids"),null;if(250<n.user_invite.emails.split(",").length)return alert("Maximum 250 email addresses are allowed."),null;var t={emails:n.user_invite.emails,content:n.user_invite.content,subject:n.user_invite.subject,is_official:e};n.creatingUserInvites=!0,i({method:"POST",url:"/user_invite",data:t}).success(function(e){recordAnalyticsEvent("GetStarted","GetStarted Invite Email Activity Success","EmailsCount: "+e.success_count,e.success_count),n.user_invite=angular.copy(r),n.creatingUserInvites=!1,n.success_message=e.server_message,o(function(){n.success_message=null},1e4),e.total_count-e.success_count!=0&&(n.feedback_msg="Note: Some invites fail either because the user had already signed up or an invite had recently been sent to the user.",o(function(){n.feedback_msg=null},1e4))})},n.fetchAllUnregisteredBatchmates=function(){n.select_state.selectAll=!1,n.addOrRemoveAllUsers(),n.loadingUsers=!0,n.subSection="batchmates",i({method:"GET",url:"/unregistered_users/batchmates"}).success(function(e){n.request_logs=e.request_logs,t(),n.addOrRemoveAllUsers(),n.loadingUsers=!1}).then(function(){n.loadingUsers=!1,n.addOrRemoveAllUsers()})},n.allUsersSelected=function(){var e=!0;return n.request_logs&&0<n.request_logs.length&&(e=e&&n.selectedUserIds&&n.selectedUserIds.length==n.request_logs.length),n.email_contacts&&0<n.email_contacts.length&&(e=e&&n.selectedEmails&&n.selectedEmails.length==n.email_contacts.length),e},n.addOrRemoveEmail=function(e){var t=$.inArray(e,n.selectedEmails);-1==t?n.selectedEmails.push(e):n.selectedEmails.splice(t,1),n.allUsersSelected()?n.select_state.selectAll=!0:n.select_state.selectAll=!1},n.addOrRemoveUserId=function(e){var t=$.inArray(e,n.selectedUserIds);-1==t?n.selectedUserIds.push(e):n.selectedUserIds.splice(t,1),n.allUsersSelected()?n.select_state.selectAll=!0:n.select_state.selectAll=!1},n.isUserSelected=function(e){return-1!=$.inArray(e,n.selectedUserIds)},n.sendInvitesToContacts=function(){n.selectedUserIds&&0<n.selectedUserIds.length||n.selectedEmails&&0<n.selectedEmails.length?n.sendInvites():n.goToNext&&n.goToNext(),0<n.selectedEmails.count&&recordAnalyticsEvent("GetStarted","GetStarted EmailContacts Step1 Activity Success","EmailsCount: "+n.selectedEmails.count,n.selectedEmails.count)},n.addOrRemoveAllUsers=function(){n.select_state.selectAll?(n.selectedUserIds=[],n.selectedUsers={},angular.forEach(n.request_logs,function(e){n.selectedUserIds.push(e.id),n.selectedUsers[e.id]=!0}),n.selectedEmails=[],n.email_contacts&&0<n.email_contacts.length&&angular.forEach(n.email_contacts,function(e){n.selectedEmails.push(e.email)})):(n.selectedUserIds=[],n.selectedUsers={},n.selectedEmails=[])},n.sendInvites=function(){(n.selectedUserIds&&0<n.selectedUserIds.length||n.selectedEmails&&0<n.selectedEmails.length)&&(n.sending_invites=!0,i({method:"POST",url:"/unregistered_users/ac_user_send_invites",data:{request_log_ids:n.selectedUserIds,email_contacts:n.selectedEmails,specific_invite:!n.select_state.selectAll}}).success(function(){recordAnalyticsEvent("GetStarted","GetStarted Invite Batchmate Activity Success","BatchmatesCount: "+n.selectedUserIds.length,n.selectedUserIds.length),n.success_message="Invitations sent successfully",n.sending_invites=!1,n.goToNext&&n.goToNext(),n.timeout=o(function(){n.sendInvitePopup&&n.sendInvitePopup.closePopup()},3e3)}).error(function(e){recordAnalyticsEvent("GetStarted","GetStarted Invite Batchmate Activity Failure","BatchmatesCount: "+n.selectedUserIds.length,0),n.sending_invites=!1,n.error_message=e.server_message}))},n.shareOnLinkedin=function(e){var t=a.shareOnLinkedin(e);setInterval(function(){t&&t.closed&&n.goToNext&&(t=null,n.goToNext())},500)},n.shareOnFacebook=function(e){a.shareOnFacebook(e,n.goToNext)},n.goToNextState=function(){n.social_sync_skipped=!0},n.goToPrevState=function(){n.social_sync_skipped=!1},n.currentUser.primary_email&&-1!=n.currentUser.primary_email.indexOf("@gmail")?n.primary_email_provider="gmail":n.currentUser.primary_email&&-1!=n.currentUser.primary_email.indexOf("@yahoo")?n.primary_email_provider="yahoo":!n.currentUser.primary_email||-1==n.currentUser.primary_email.indexOf("@hotmail")&&-1==n.currentUser.primary_email.indexOf("@outlook")&&-1==n.currentUser.primary_email.indexOf("@live")||(n.primary_email_provider="hotmail"),n.currentInstitute.display_contacts_sync||n.goToNextState();var e=null;"Institution::College"==n.currentInstitute.type?e=n.currentInstitute.content_alma_branding+" is a great way to keep in touch with alumni & connect with the college.\n \nDo check it out.":"Institution::School"==n.currentInstitute.type?e=n.currentInstitute.content_alma_branding+" is a great way to keep in touch with alumni & connect with the school.\n \nDo check it out.":"Institution::Company"==n.currentInstitute.type&&(e=n.currentInstitute.content_alma_branding+" is a great way to keep in touch with ex-colleagues & connect with the company.\n \nDo check it out.");var s="Invitation to join "+n.currentInstitute.title+" Alumni Network on AlmaConnect";n.currentInstitute.is_syneos&&(e="The Syneos Health Consulting Alumni Network is a great way to keep in touch with current and past colleagues. We\u2019d love for you to join to stay up to date on firm developments, thought leadership, job opportunities and more.",s="Invitation to join Syneos Health Consulting Alumni Network");var r={emails:"",content:e,subject:s};n.select_state={selectAll:!0},n.user_invite=angular.copy(r),n.canSendReminders=n.currentUser.is_institute_coordinator||"faculty"==n.currentBiolet.user_type&&"Premium"==n.currentInstitute.plan_type,n.show_content=!1,"custom_invite"==convertSearchStringtoObject(getSearchString()).tab?n.custom_invite=!0:n.invite_batchmates=!0;var l=$(".js_batchmates").data("content");l&&(n.request_logs=l.request_logs,n.request_logs&&t()),n.selectedEmails=[];var c=new Date,d=Date.parse(c)/1e3;n.refer_link="http://"+n.currentInstitute.host+"?via=share&via_token="+n.currentUser.id+"&invited_at="+d,n.fetchAllUnregisteredBatchmates()}]),angular.module("InviteBatchmates").filter("name",function(){return function(e,t){if(e&&e.length){var n=[];return t?(t=t.toLowerCase(),angular.forEach(e,function(e){-1!=e.data.name.toLowerCase().indexOf(t)&&n.push(e)})):n=e,n}}}),angular.module("InviteReminders",["ngSanitize","ac"]),angular.module("InviteReminders").controller("ReminderController",["$scope","$http","$timeout",function(n,i,o){setAngularCSRFToken(i),n.invite_unregistered=!0;$(".js_batchmates").data("content");n.sendSampleReminder=function(){n.sending_sample_reminder=!0;var e={subject:n.user_invite.subject,content:n.user_invite.content},t=i({method:"POST",url:"/admin/reminders/send_sample_invitation",data:e});t.success(function(e){n.formSuccessMsg=e.server_message,n.sending_sample_reminder=!1,o(function(){n.formSuccessMsg=!1},5e3)}),t.error(function(){n.requesting=!1})},n.sendReminders=function(){if(!n.user_invite.shared_with||angular.equals(n.user_invite.shared_with.applied_tags,{}))return n.formErrorMsg="Please select the Members to whom you want to send the invite",o(function(){n.formErrorMsg=!1},5e3),!1;n.sending_reminders=!0;var e={subject:n.user_invite.subject,content:n.user_invite.content,shared_with:n.user_invite.shared_with},t=i({method:"POST",url:"/admin/reminders/send_invitations",data:e});t.success(function(e){n.formSuccessMsg=e.server_message,n.sending_reminders=!1,o(function(){n.formSuccessMsg=!1},5e3)}),t.error(function(){n.requesting=!1,n.formErrorMsg="Unable to send invites, please try again",o(function(){n.formErrorMsg=!1},5e3)})},n.isAdmin=function(){return!!n.currentUser.is_system_coordinator},n.setAppliedTags=function(e,t){n.user_invite.shared_with={applied_tags:t},e.closePopup()};var e=null;"Institution::College"==n.currentInstitute.type?e=n.currentInstitute.title+" - AlmaConnect is a great way to keep in touch with alumni & connect with the college.\n \nDo check it out.":"Institution::School"==n.currentInstitute.type?e=n.currentInstitute.title+" - AlmaConnect is a great way to keep in touch with alumni & connect with the school.\n \nDo check it out.":"Institution::Company"==n.currentInstitute.type&&(e=n.currentInstitute.title+" - AlmaConnect is a great way to keep in touch with ex-colleagues & connect with the company.\n \nDo check it out.");var t="Invitation to join "+n.currentInstitute.title+" Alumni Network on AlmaConnect";n.currentInstitute.is_syneos&&(t="Invitation to join Syneos Health Consulting Alumni Network",e="Syneos Health Consulting Alumni Network is a great way to keep in touch with ex-colleagues & connect with the company. Do check it out.");var a={emails:"",content:e,subject:t,shared_with:null};n.user_invite=angular.copy(a),n.previewEmail=function(){n.preview_email=!n.preview_email}}]),angular.module("GetStarted").controller("CurrentInfoController",["$scope","$rootScope","$http","$timeout",function(n,e,t){setAngularCSRFToken(t),n.saveCurrentInfo=function(){var e={profile_id:n.currentUser.id,work_status:n.userForm.work_status,profile_title:n.userForm.profile_title,currently_at_name:n.userForm.currently_at_name,current_city_id:getValue(n.userForm.current_city,"id"),phone_nos:n.userForm.phone_nos.split(",")};n.saving_data=!0,t({method:"POST",url:"/profiles/update_profile",data:{user:e}}).success(function(){n.saving_data=!1,n.goToNext()}).error(function(e){n.saving_data=!1,n.ci_error_message=e.server_message})},n.workStatusChanged=function(){"studying"==n.userForm.work_status?n.currentBiolet.current?(n.userForm.profile_title=n.currentUser.profile_title,n.userForm.currently_at_name=n.currentInstitute.name):(n.userForm.profile_title="Student",n.userForm.currently_at_name=getValue(n.currentUser.currently_at,"name")):"working"==n.userForm.work_status?(n.userForm.profile_title=n.currentUser.profile_title,n.userForm.currently_at_name=getValue(n.currentUser.currently_at,"name")):"not_working"==n.userForm.work_status&&(n.userForm.profile_title=null,n.userForm.currently_at_name=null),n.userForm.current_city||(n.userForm.current_city=n.currentUser.current_city)},n.importUsingLinkedin=function(){window.open("/profiles/social_sync/linkedin/import_profile_onboarding","Linkedin permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300")},n.fetchAndUpdateLn=function(){n.fetchingImportData=!0,t({method:"POST",url:"/profiles/fetch_and_update_linked_in"}).success(function(e){n.fetchingImportData=!1;var t=e.profile;n.currentUser.profile_title=t.profile_title,n.currentUser.currently_at=t.currently_at,n.currentUser.current_city=t.current_city,n.workStatusChanged()}).error(function(){n.fetchingImportData=!1})},n.userForm={work_status:null,profile_title:null,currently_at_name:null,current_city:null,phone_nos:n.currentUser.phone_nos},n.work_statuses=[{type:"working",text:"working"},{type:"studying",text:"studying"},{type:"not_working",text:e.getCustomAttribute("not_working_text")}],n.userForm.work_status=n.currentUser.work_status,n.workStatusChanged(),n.is_get_started=!0}]),angular.module("GetStarted").controller("AddBioletsController",["$scope","$http","$timeout",function(n,i){setAngularCSRFToken(i),n.updateProfile=function(){var t=[];angular.forEach(n.educational_institutes,function(e){e&&e.id&&t.push({type:"Biolets::Education",institute_id:e.id})}),angular.forEach(n.professional_institutes,function(e){e&&e.id&&t.push({type:"Biolets::Profession",institute_id:e.id})});var e={profile_id:n.currentUser.id,biolets:t};n.saving_data=!0,i({url:"/profiles/update_profile?frm=biolet_init",method:"POST",data:{user:e}}).success(function(){n.saving_data=!1,n.goToNext()}).error(function(){n.saving_data=!1})},n.no_of_educational_inputs=2,n.no_of_professional_inputs=2,n.educational_institutes=[],n.professional_institutes=[],n.$watch("educational_institutes",function(){var t=0;angular.forEach(n.educational_institutes,function(e){e&&e.id&&(t+=1)}),t==n.no_of_educational_inputs&&(n.no_of_educational_inputs+=1)},!0),n.$watch("professional_institutes",function(){var t=0;angular.forEach(n.professional_institutes,function(e){e&&e.id&&(t+=1)}),t==n.no_of_professional_inputs&&(n.no_of_professional_inputs+=1)},!0)}]),angular.module("InvitationInfo",["ngSanitize","ac"]),angular.module("InvitationInfo").controller("InvitationInfoController",["$scope","$http","$timeout",function(t,n,i){setAngularCSRFToken(n),t.updateInvitationInfo=function(){t.loadingUpdateDetails=!0;var e={invitation_info:t.invitation_info};n({method:"POST",url:"/user_invite/update_invitation_info",data:e}).success(function(){t.updateDetailsServerMsg="Details Successfully Updated",i(function(){t.updateDetailsServerMsg=null,t.show_email_preview=!0},3e3),t.loadingUpdateDetails=!1}).error(function(e){t.updateDetailsErrorMsg=e.server_message,t.loadingUpdateDetails=!1,i(function(){t.updateDetailsErrorMsg=null},3e3)})},t.fetchInvitationInfo=function(){t.fetchingInvitationInfo=!0,n({method:"GET",url:"/user_invite/fetch_custom_invite_info",params:{}}).success(function(e){t.fetchingInvitationInfo=!1,t.invitation_info=e.invitation_info,t.default_invitation_info=e.default_invitation_info,t.is_invitation_info_default=e.is_invitation_info_default,t.redirect_link=e.redirect_link,t.is_invitation_info_default||(t.show_email_preview=!0)}).error(function(){t.fetchingInvitationInfo=!1})},t.togglePreviewEmail=function(){t.show_email_preview=!t.show_email_preview},t.fetchInvitationInfo()}]),ac_bootstrap($(".js_invitation_info")[0],["InvitationInfo"]),ac_bootstrap($(".js_get_started")[0],["GetStarted"]),ac_bootstrap($(".js_batchmates")[0],["InviteBatchmates"]),function(){this.JST||(this.JST={}),this.JST["marketing_campaign/templates/campaign_list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="padding: 24px;margin-top: 24px;">\n  <div style="padding-bottom: 24px;">\n    <div class="text_title" style="float: left;">\n      Campaigns\n    </div>\n    <a href="/marketing_campaigns/new" class="text_link" style="float: right;">\n      Create New Campaign\n    </a>\n\n    <div ac-asset-upload class="file_upload_box text_link" after-each-upload="afterFileUpload" jfu-model="dummy"\n      data-opts="{only_image: true, single_file: true}" style="float: right;padding-right: 16px;">\n      Upload\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n\n  <div ac-popup="image_url_popup">\n    <a ng-href="{{asset_url}}" class="text_caption" style="word-break: break-all;" target="_blank">\n      {{asset_url}}\n    </a>\n  </div>\n\n  <div ac-pagination total-pages="total_pages" paging-fn="goToPage" current-page="current_page"></div>\n\n  <table style="font-size: 13px;">\n    <thead class="thead_bg">\n      <td>Title</td>\n      <td>Audience</td>\n      <td>Processed Audience</td>\n      <td>Targeted Audience</td>\n      <td>Actions</td>\n    </thead>\n    <tbody>\n      <tr ng-repeat="campaign in campaigns" ng-controller="SingleCampaignController">\n        <td>\n          {{campaign.title}}\n        </td>\n        <td>\n          {{campaign.audience_size}}\n        </td>\n        <td>\n          {{campaign.processed_audience_size}}\n        </td>\n        <td>\n          {{campaign.targeted_audience_size}}\n        </td>\n        <td>\n          <a ng-href="{{campaign.edit_path}}" class="text_link" style="display: inline-block;padding-right: 16px;">\n            Edit\n          </a>\n          <div class="text_link" style="display: inline-block;padding-right: 16px;" ng-click="freezeFilters()" ng-custom-if="!(campaign.filters_freezed_at)">\n            Freeze Filters\n          </div>\n          <div class="text_link" style="display: inline-block;padding-right: 16px;" ng-click="sample_email_popup.showPopup()">\n            Send Sample Email\n          </div>\n          <div class="text_link" style="display: inline-block;padding-right: 16px;" ng-click="deleteCampaign($index)">\n            Delete\n          </div>\n          <div ng-custom-if="campaign.filters_freezed_at" style="display: inline-block;">\n            <div class="text_link" style="display: inline-block;padding-right: 16px;" ng-click="send_emails_popup.showPopup()">\n              Send Emails\n            </div>\n\n            <div class="text_link" style="display: inline-block;padding-right: 16px;" ng-click="send_reminders_popup.showPopup()">\n              Send Reminders\n            </div>\n\n            <div class="text_link" style="display: inline-block;padding-right: 16px;" ng-click="report_popup.showPopup()">\n              Report\n            </div>\n\n            <a ng-href="/marketing_campaigns/download_leads_csv?campaign_id={{campaign.id}}" class="text_link"\n              style="display: inline-block;padding-right: 16px;">\n              Download Leads\n            </a>\n          </div>\n\n          <div ac-popup="sample_email_popup">\n            <div class="text_title">\n              Send Sample Email\n            </div>\n            <div ac-input-box ac-label="Name">\n              <input type="text" ng-model="sample_email_form.name" />\n            </div>\n            <div ac-input-box ac-label="Email">\n              <input type="text" ng-model="sample_email_form.email" />\n            </div>\n            <div class="">\n              <div class="ac_button" style="display: inline-block;" ng-click="triggerSampleEmail()">\n                Send\n              </div>\n            </div>\n          </div>\n\n          <div ac-popup="report_popup" min-width="900px">\n            <div ng-controller="CampaignReportController">\n              <table style="font-size: 13px;table-layout: fixed;">\n                <thead class="thead_bg">\n                  <td>WaveTime</td>\n                  <td>Is Reminder?</td>\n                  <td>Audience</td>\n                  <td>Sent Count</td>\n                  <td>Opens Count</td>\n                  <td>Clicks Count</td>\n                  <td>Continue Without Details</td>\n                  <td>Continue With Details</td>\n                  <td>Actions</td>\n                </thead>\n                <tbody>\n                  <tr ng-repeat="campaign_wave in campaign_waves">\n                    <td>{{campaign_wave.created_at}}</td>\n                    <td>{{campaign_wave.is_reminder}}</td>\n                    <td>{{campaign_wave.audience_size}}</td>\n                    <td>{{campaign_wave.total_email_sent}}</td>\n                    <td>{{campaign_wave.total_email_open}}</td>\n                    <td>{{campaign_wave.total_email_click}}</td>\n                    <td>{{campaign_wave.continue_without_detail_count}}</td>\n                    <td>{{campaign_wave.continue_with_detail_count}}</td>\n                    <td>\n                      <a ng-href="{{campaign_wave.view_email_url}}" class="text_link" target="_blank">View Email</a>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div ac-popup="send_emails_popup">\n            <div class="text_title">\n              Send Emails\n            </div>\n            <div ac-input-box ac-label="Select No of People" ac-helper="People who have already received will not receive again">\n              <input type="text" ng-model="send_emails_form.audience_size" />\n            </div>\n            <div class="">\n              <div class="ac_button" style="display: inline-block;" ng-click="triggerFirstEmails()">\n                Send\n              </div>\n            </div>\n          </div>\n\n          <div ac-popup="send_reminders_popup">\n            <div class="text_title">\n              Send Reminder Emails\n            </div>\n            <div ac-input-box ac-label="Select No of People" ac-helper="People who have already received a reminder will not receive again">\n              <input type="text" ng-model="send_reminders_form.audience_size" />\n            </div>\n            <div class="">\n              <div class="ac_button" style="display: inline-block;" ng-click="triggerReminderEmails()">\n                Send\n              </div>\n            </div>\n          </div>\n\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["marketing_campaign/templates/create_or_update"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(
'<div class="inner_sec_column" style="margin-top: 24px;" ng-controller="FiltersController" ng-custom-if="!(campaignForm.filters_freezed_at)">\n\n  <form style="display: none;" action="/marketing_campaigns/export_network_wise" method="POST" class="js_export_form">\n    <input type="hidden" class="csrf-token" name="authenticity_token" value="" />\n    <input type="hidden" name="applied_tags" value="{{campaignForm.applied_tags}}"/>\n  </form>\n\n  <div class="">\n    <div class="text_caption vertical_middle" style="width: calc(100% - 115px);">\n      APPLY FILTERS\n    </div>\n    <div class="text_link vertical_middle" ng-click="resetFilters()" style="padding: 0px 16px;">\n      Clear\n    </div>\n    <div class="ac_button_small vertical_middle" ng-click="applyFilters()">\n      APPLY\n    </div>\n  </div>\n\n  <div ac-popup="bulk_changes_popup" min-width="600px">\n    <div ac-input-box ac-label="{{bulk_filter.text}}" ac-helper="Each line should contain a single value. Use a new line seperator to provide another entry">\n      <textarea ng-model="bulk_filter.values">\n      </textarea>\n    </div>\n\n    <div class="">\n      <div class="ac_button" ng-click="updateBulkFilters()" style="float: left;">\n        DONE\n      </div>\n      <div style="clear: both;"></div>\n    </div>\n  </div>\n\n\n  <div ng-repeat="filter in filters" ng-controller="SingleFilterController"\n    style="border-bottom: 1px solid #ddd;padding: 12px 0px;">\n    <div ng-click="expandOrCollapse(filter)" style="font-size: 13px;font-weight: 700;color: #666;cursor: pointer;">\n      <span class="text_heading">{{filter.text}}</span>\n      <div ng-show="filter.expanded" style="float: right;margin-right: 5px;">\n        <i class="icon-6" style="font-size: 20px;"></i>\n      </div>\n      <div ng-hide="filter.expanded" style="float: right;margin-right: 5px;padding: 0px 1px;">\n        <i class="icon-7" style="font-size: 20px;"></i>\n      </div>\n    </div>\n\n    <div ng-show="filter.expanded" style="padding-top: 4px;">\n      <div ng-custom-if="filter.data || filter.url">\n        <div ng-custom-if="filter.multiple" ng-click="editBulkFilters()" class="text_link">\n          Upload List\n        </div>\n\n        <div ac-input-checkbox ac-label="All {{filter.text}}" ng-custom-if="filter.multiple">\n          <input type="checkbox" ng-click="applyTag(filter.key)" ng-checked="tagApplied(filter.key)" />\n        </div>\n\n        <div ng-custom-if="filter.url || (filter.data && filter.data.length > 5)">\n          <div ng-repeat="applied_tag in campaignForm.applied_tags[filter.key] | limitTo: 5" style="text-transform: capitalize;">\n            <div ac-input-checkbox ac-label="{{applied_tag}}">\n              <input type="checkbox" ng-checked="tagApplied(filter.key, applied_tag)" ng-click="applyTag(filter.key, applied_tag)" />\n            </div>\n          </div>\n          <div ng-custom-if="campaignForm.applied_tags[filter.key].length > 5" class="text_caption">\n            {{campaignForm.applied_tags[filter.key].length - 5}} More Filters\n          </div>\n        </div>\n\n        <div ng-custom-if="filter.url">\n          <div ac-suggestion-box ac-url="{{filter.url}}" ac-model="filter.dummy"\n            on-add-callback="onTagSelect" on-remove-callback="onTagRemove" multiple="{{filter.multiple}}">\n          </div>\n        </div>\n\n        <div ng-custom-if="filter.data">\n          <div ng-custom-if="filter.data.length > 5">\n            <div ac-suggestion-box suggestions="filter.data" ac-model="filter.dummy"\n              on-add-callback="onTagSelect" on-remove-callback="onTagRemove" locked="true" multiple="{{filter.multiple}}">\n            </div>\n          </div>\n          <div ng-custom-if="filter.data.length <= 5">\n            <div ng-repeat="applied_tag in filter.data" style="text-transform: capitalize;">\n              <div ac-input-checkbox ac-label="{{applied_tag.name}}">\n                <input type="checkbox" ng-checked="tagApplied(filter.key, (applied_tag.actual_name || applied_tag.name))"\n                  ng-click="applyTag(filter.key, (applied_tag.actual_name || applied_tag.name))" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div ng-custom-if="!(filter.data) && !(filter.url)">\n        <div ac-input-box>\n          <input type="text" ng-model="campaignForm.applied_tags[filter.key]" />\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</div>\n\n<div class="inner_main_column">\n  <div class="box-shadow-content" style="margin-top: 24px;padding: 24px;">\n    <div class="text_title">\n      <span ng-show="new_campaign">Create Campaign</span>\n      <span ng-show="!new_campaign">Edit Campaign</span>\n    </div>\n\n    <div style="padding-top: 24px;">\n      <div class="text_body">\n        1. Campaign Details\n      </div>\n\n      <div ac-input-box ac-label="Campaign Title" ac-error="errors.title">\n        <input type="text" ng-model="campaignForm.title" />\n      </div>\n\n      <div ac-input-box ac-label="On Behalf Of" ac-error="errors.on_behalf_of">\n        <input type="text" ng-model="campaignForm.on_behalf_of" />\n      </div>\n    </div>\n\n    <div style="padding-top: 24px;">\n      <div class="">\n        <div class="text_body" style="float: left;">\n          2. Select Audience\n        </div>\n        <div class="text_link" style="float: right;" ng-click="applied_tags_popup.showPopup()">\n          View Applied Filters\n        </div>\n        <div ac-popup="applied_tags_popup">\n          <div ng-controller="FiltersController" class="text_caption">\n            <div ng-repeat="filter in filters" ng-custom-if="campaignForm.applied_tags[filter.key].length > 0">\n              <div class="text_caption_dark">\n                {{filter.text}}\n              </div>\n              <div style="padding-left: 24px;">\n                <div ng-custom-if="filter.data || filter.url">\n                  <div ng-repeat="tag_value in campaignForm.applied_tags[filter.key]">\n                    {{tag_value}}\n                  </div>\n                </div>\n                <div ng-custom-if="!(filter.data || filter.url)">\n                  {{campaignForm.applied_tags[filter.key]}}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div style="clear: both;"></div>\n      </div>\n\n      <div class="ac_input_box">\n        <div class="selected_token">\n          To: {{campaignForm.audience_size}} People\n        </div>\n\n        <div class="ac_error_message" ng-show="errors.audience_size">\n          {{errors.audience_size}}\n        </div>\n      </div>\n      <div style="padding-top: 8px;height: 40px;" ng-custom-if="!(new_campaign || campaignForm.filters_freezed_at)">\n        <div ac-asset-upload class="file_upload_box ac_button" jfu-model="user_ids_file"\n             style="float: right;" before-file-upload="startFileUpload"\n             after-file-upload="processUserIdsFile" data-opts="{only_csv: true, single_file: true}">\n          Upload User Ids\n        </div>\n        <div class="clear"></div>\n      </div>\n      <div ac-popup="progress_popup" disabled="true">\n        <div ng-custom-if="!(success_msg)" class="text_body" style="text-align: center;">\n          We are processing your file. Please wait for sometime\n        </div>\n        <div ng-custom-if="success_msg" class="text_body" style="text-align: center;">\n          {{success_msg}}\n        </div>\n      </div>\n    </div>\n\n    <div style="padding-top: 24px;">\n      <div class="text_body">\n        3. Create Email\n      </div>\n\n      <div ac-input-box ac-label="Reply To" ac-error="errors.email_reply_to">\n        <input type="text" ng-model="campaignForm.email_reply_to" />\n      </div>\n\n      <div class="text_body" style="padding-top: 16px;">\n        <strong>Tip:</strong> There are certain dynamic attributes defined for the use in custom From, Subject and Content of the email.<br />\n        Here is a list for such attributes and how to use them:\n      </div>\n      <ul class="text_body">\n        <li>User Full Name - @username</li>\n        <li>User First Name - @userFirstName</li>\n        <li>DAIICTians - @collegiates</li>\n        <li>Institute Short Name - @instituteTitle</li>\n        <li>Institute Host - @instituteHost</li>\n        <li>Institute Full Name - @instituteName</li>\n        <li>Registered Users Count - @instituteUserCount</li>\n        <li>Auto Login Token - @autoLoginToken</li>\n        <li>Profile Slug - @profileSlug</li>\n        <li>Current Company Name - @currentCompanyName</li>\n        <li>Current Company Parent Name - @currentCompanyParentName</li>\n        <li>Current City Name - @currentCityName</li>\n        <li>Profile Title / Designation - @profileTitle</li>\n        <li>Job Alert Unsubscribe Link - @unsubscribeLink</li>\n      </ul>\n      <div class="text_caption" style="padding-top: 8px;">\n        Sample URL for autoLoginToken:\n        https://daiict.almaconnect.com/job_posting/new?auth_token=@autoLoginToken\n      </div>\n\n      <div ac-input-box ac-label="From" ac-error="errors.email_from_name">\n        <input type="text" ng-model="campaignForm.email_from_name" />\n      </div>\n\n      <div ac-input-box ac-label="Subject" ac-error="errors.email_subject">\n        <input type="text" ng-model="campaignForm.email_subject" />\n      </div>\n\n      <div ac-input-box ac-label="Attachment URL" ac-error="errors.file_url">\n        <input type="text" ng-model="campaignForm.file_url" />\n      </div>\n\n      <div ac-input-box ac-label="Content Type">\n        <div ac-input-radio ac-label="Template">\n          <input type="radio" ng-model="campaignForm.email_content_type" value="template"\n            name="content_type">\n        </div>\n        <div ac-input-radio ac-label="Custom Content">\n          <input type="radio" ng-model="campaignForm.email_content_type" value="custom_content"\n            name="content_type">\n        </div>\n        <div ac-input-radio ac-label="AMP Email">\n          <input type="radio" ng-model="campaignForm.email_content_type" value="amp_email"\n            name="content_type">\n        </div>\n      </div>\n\n      <div ng-custom-if="campaignForm.email_content_type == \'template\'">\n        <div ac-input-box ac-label="Template" ac-error="errors.email_template">\n          <select ng-model="campaignForm.email_template" ng-options="template.identity as template.display_text for template in all_templates">\n            <option value="">Select Template</option>\n          </select>\n        </div>\n      </div>\n\n      <div ng-custom-if="campaignForm.email_content_type == \'template\' && featureEnabled(campaignForm.email_template)" ac-error="errors.feature_id">\n        <div ac-input-box ac-label="Feature Id" ac-error="errors.email_template_id">\n          <input type="text" ng-model="campaignForm.feature_id">\n        </div>\n      </div>\n\n      <div ng-custom-if="campaignForm.email_content_type == \'amp_email\'">\n        <div ac-input-box ac-label="AMP Email Link" ac-error="errors.amp_email_link">\n          <select ng-model="campaignForm.amp_email_link" ng-options="link.identity as link.display_text for link in all_links">\n            <option value="">Select Email Link</option>\n          </select>\n        </div>\n      </div>\n\n      <div ng-custom-if="(campaignForm.email_content_type != \'template\' && campaignForm.email_content_type != \'amp_email\') || (featureEnabled(campaignForm.email_template))">\n        <div ng-custom-if="!(campaignForm.is_custom_html)">\n          <div ac-input-box ac-label="Content" ac-error="errors.email_content">\n            <div ac-text-editor ac-model="campaignForm.email_content">\n            </div>\n          </div>\n          <div ng-click="toggleHtmlView()" class="text_link">\n            Switch to HTML\n          </div>\n        </div>\n\n        <div ng-custom-if="campaignForm.is_custom_html">\n          <div ac-input-box ac-label="Content" ac-error="errors.email_content" >\n            <textarea ng-model="campaignForm.email_content">\n            </textarea>\n          </div>\n          <div class="">\n            <div ng-click="toggleHtmlView()" class="text_link" style="float: left;">\n              Switch to Editor\n            </div>\n            <div ng-click="preview_email_popup.showPopup()" class="text_link" style="float: right;">\n              Preview\n            </div>\n            <div style="clear: both;"></div>\n            <div ac-popup="preview_email_popup">\n              <div ng-bind-html="trustAsHtml(campaignForm.email_content)"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n\n    </div>\n\n    <div ac-input-checkbox ac-label="Skip Lead Generation" style="padding-top: 16px;">\n      <input type="checkbox" ng-model="campaignForm.skip_lead_generation">\n    </div>\n\n  </div>\n\n\n\n  <div style="margin: 32px 0px;">\n    <div ng-show="success_message" class="text_success" style="padding: 8px 0px;">\n      {{success_message}}\n    </div>\n    <div ng-show="error_message" class="text_error" style="padding: 8px 0px;">\n      {{error_message}}\n    </div>\n    <div class="text_error" ng-show="errors">\n      Please fill all the highlighted fields above\n    </div>\n\n    <div class="ac_button" style="float: left;" ng-click="createOrUpdateCampaign()"\n      ac-loading="{{creating_campaign}}" text="Create Campaign" ng-custom-if="new_campaign">\n    </div>\n\n    <div class="ac_button" style="float: left;" ng-click="createOrUpdateCampaign()"\n      ac-loading="{{creating_campaign}}" text="Update Campaign" ng-custom-if="!(new_campaign)">\n    </div>\n\n    <div class="ac_button" style="float: left;margin-left: 8px;" ng-click="duplicateCampaign()"\n         ac-loading="{{creating_campaign}}" text="Duplicate Campaign" ng-custom-if="!(new_campaign)">\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n\n</div>\n\n<div style="clear: both;"></div>\n');return __p.join("")}}.call(this),angular.module("MarketingCampaign",["ngSanitize","ac"]),angular.module("MarketingCampaign").controller("MarketingCampaignsController",["$scope","$http","$timeout",function(n,i){setAngularCSRFToken(i),n.afterFileUpload=function(e){i({method:"POST",url:"/marketing_campaigns/upload_embedded_image",data:{url:e.url}}).success(function(e){n.asset_url=e.asset_url,n.image_url_popup.showPopup()})},n.goToPage=function(t){i({method:"GET",url:window.location.href,params:{page:t}}).success(function(e){n.campaigns=e.data,n.total_pages=e.total_pages,n.current_page=t})},n.deleteCampaign=function(e){if(!confirm("Are you sure you want to delete this?"))return!0;var t=n.campaigns[e].id;i({method:"POST",url:"/marketing_campaigns/destroy",data:{campaign_id:t}}).success(function(e){1==e.success?window.location="/marketing_campaigns":n.error_message="Marketing campaign wasn't deleted successfully."}).error(function(){n.error_message="Marketing campaign wasn't deleted successfully."})};var e=$(".js_marketing_campaigns").data("content");n.campaigns=e.data,n.total_pages=e.total_pages,n.current_page=1}]),angular.module("MarketingCampaign").controller("SingleCampaignController",["$scope","$http","$timeout",function(e,t){setAngularCSRFToken(t),e.freezeFilters=function(){t({method:"POST",url:"/marketing_campaigns/freeze_filters",data:{campaign_id:e.campaign.id}}).success(function(){e.campaign.filters_freezed_at=new Date})},e.triggerFirstEmails=function(){t({method:"POST",url:"/marketing_campaigns/trigger_first_emails",data:{campaign_id:e.campaign.id,audience_size:e.send_emails_form.audience_size}}).success(function(){e.send_emails_popup.closePopup()})},e.triggerReminderEmails=function(){t({method:"POST",url:"/marketing_campaigns/trigger_reminder_emails",data:{campaign_id:e.campaign.id,audience_size:e.send_reminders_form.audience_size}}).success(function(){e.send_reminders_popup.closePopup()})},e.triggerSampleEmail=function(){t({method:"POST",url:"/marketing_campaigns/trigger_sample_email",data:{campaign_id:e.campaign.id,name:e.sample_email_form.name,email:e.sample_email_form.email}}).success(function(){e.sample_email_popup.closePopup()})},e.send_emails_form={audience_size:null},e.send_reminders_form={audience_size:null},e.sample_email_form={name:null,email:null}}]),angular.module("MarketingCampaign").controller("CampaignReportController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e),t.fetchCampaignReport=function(){t.fetching=!0,e({method:"GET",url:"/marketing_campaigns/fetch_campaign_report",params:{campaign_id:t.campaign.id}}).success(function(e){t.fetching=!1,t.campaign_waves=e.data})},t.fetchCampaignReport()}]),angular.module("NewMarketingCampaign",["ngSanitize","ac"]),angular.module("NewMarketingCampaign").controller("NewMarketingCampaignController",["$scope","$http","$timeout","$sce","$window",function(i,e,t,n,o){setAngularCSRFToken(e);var a=!1,s=function(){if(!a)return!1;var e=!0;i.validateQuestions&&(e=i.validateQuestions(!0)),i.errors={},i.campaignForm.title||(i.errors.title="Title can not be blank"),i.campaignForm.on_behalf_of||(i.errors.on_behalf_of="On behalf of can not be blank"),i.campaignForm.email_from_name||(i.errors.email_from_name="From name can not be blank"),i.campaignForm.email_subject||(i.errors.email_subject="Subject can not be blank"),"custom_content"!=i.campaignForm.email_content_type||i.campaignForm.email_content||(i.errors.email_content="Email content can not be blank"),"amp_email"!=i.campaignForm.email_content_type||i.campaignForm.amp_email_link||(i.errors.email_content="AMP Email link can not be blank"),"template"!=i.campaignForm.email_content_type||i.campaignForm.email_template||(i.errors.email_template="Email template can not be blank"),"template"==i.campaignForm.email_content_type&&!i.campaignForm.feature_id&&i.featureEnabled(i.campaignForm.email_template)&&(i.errors.feature_id="Feature Id can not be blank");var t=Object.keys(i.errors);return!(t&&0<t.length)&&(i.errors=null,e)};i.$watch("campaignForm",s,!0),i.featureEnabled=function(t){var n=!1;return angular.forEach(i.all_templates,function(e){e.identity!=t||"feature"!==e.type&&"features"!==e.type||(n=!0)}),n},i.createOrUpdateCampaign=function(){return!!i.creating_campaign||(i.success_message=null,i.error_message=null,a=!0,!!s()&&("template"!=i.campaignForm.email_content_type||i.featureEnabled(i.campaignForm.email_template)||(i.campaignForm.email_content=null),"custom_content"==i.campaignForm.email_content_type&&(i.campaignForm.email_template=null),"amp_email"==i.campaignForm.email_content_type&&(i.campaignForm.email_template=null),i.creating_campaign=!0,void e({method:"POST",url:"/marketing_campaigns/create_or_update",data:{campaign:i.campaignForm}}).success(function(e){i.creating_campaign=!1,i.new_campaign&&(i.success_message="Your campaign has been created successfully."),i.new_campaign||(i.success_message="Your campaign has been updated successfully."),window.location=e.url}).error(function(e){i.creating_campaign=!1,i.error_message=e.server_message})))},i.duplicateCampaign=function(){e({method:"POST",url:"/marketing_campaigns/"+i.campaignForm.id+"/duplicate",data:{id:i.campaignForm.id}}).success(function(e){o.location.href="/marketing_campaigns/"+e.id+"/edit"}).error(function(){})},i.toggleHtmlView=function(){confirm("Are you sure you want to shift the editor, you will loose the content you have written here")&&(i.campaignForm.email_content=null,i.campaignForm.is_custom_html=!i.campaignForm.is_custom_html)},i.startFileUpload=function(){i.progress_popup.showPopup()},i.processUserIdsFile=function(){e({url:"/marketing_campaigns/"+i.campaignForm.id+"/user_ids",method:"POST",data:{csv_url:i.user_ids_file.url}}).success(function(){i.success_msg="Your User Ids data has been updated successfully"})},i.trustAsHtml=function(e){return n.trustAsHtml(e)},i.campaignForm={title:null,email_from_name:null,email_subject:null,email_content:null,email_template:null,applied_tags:{},is_custom_html:!1,on_behalf_of:null,email_content_type:"template",feature_id:null};var r=$(".js_new_marketing_campaign").data("content");i.new_campaign=!0,r.campaign.id&&(i.campaignForm=angular.copy(r.campaign),i.campaignForm.applied_tags||(i.campaignForm.applied_tags={}),i.new_campaign=!1),i.all_templates=r.all_templates,i.all_links=r.all_links,i.filters=r.filters,i.bulk_filter={key:null,text:null,values:[]}}]),angular.module("NewMarketingCampaign").controller("FiltersController",["$scope","$http","$timeout","$rootScope",function(i,e){setAngularCSRFToken(e),i.tagApplied=function(e,t){if(!i.campaignForm.applied_tags[e]&&!t)return!0;var n=-1;return i.campaignForm.applied_tags[e]&&t&&(n=i.campaignForm.applied_tags[e].indexOf(t)),-1!=n},i.resetFilters=function(){i.campaignForm.applied_tags={},i.applyFilters()},i.applyFilters=function(t){e({method:"POST",url:"/marketing_campaigns/check_counts",data:{applied_tags:i.campaignForm.applied_tags}}).success(function(e){(i.campaignForm.audience_size=e.total,t)||confirm("Do you want to download network wise distribution of selected users")&&$(".js_export_form").submit()}).error(function(e){i.campaignForm.audience_size=0,alert(e.server_message)})},i.tagsApplied=function(){return 0<Object.keys(i.campaignForm.applied_tags).length},i.updateBulkFilters=function(){var e=i.bulk_filter.values.split("\n");i.campaignForm.applied_tags[i.bulk_filter.key]=e,i.bulk_changes_popup.closePopup()},i.applyFilters(!0)}]),angular.module("NewMarketingCampaign").controller("SingleFilterController",["$scope","$http","$timeout","$rootScope",function(i,e,t){setAngularCSRFToken(e),i.applyTag=function(e,t){if(t=t.toString(),i.campaignForm.applied_tags[e]||(i.campaignForm.applied_tags[e]=[]),t){var n=i.campaignForm.applied_tags[e].indexOf(t);-1==n?(i.filter.multiple||(i.campaignForm.applied_tags[e]=[]),i.campaignForm.applied_tags[e].push(t)):i.campaignForm.applied_tags[e].splice(n,1)}0!=i.campaignForm.applied_tags[e].length&&t||delete i.campaignForm.applied_tags[e]},i.onTagSelect=function(e){var t=i.filter.key,n=e.actual_name||e.name;i.tagApplied(t,n)||i.applyTag(t,n),i.filter.dummy=null},i.expandOrCollapse=function(){i.filter.expanded=!i.filter.expanded,t(function(){$(window).scroll()},10)},i.editBulkFilters=function(){i.bulk_filter.key=i.filter.key,i.bulk_filter.text=i.filter.text,i.bulk_filter.values="";var e=i.campaignForm.applied_tags[i.filter.key];e&&(i.bulk_filter.values=e.join("\n")),i.bulk_changes_popup.showPopup()}}]),angular.module("TrackMarketingCampaign",["ngSanitize","ac"]),angular.module("TrackMarketingCampaign").controller("TrackCampaignController",["$scope","$http","$timeout","$sce",function(t,n){setAngularCSRFToken(n),t.recordCampaignLead=function(e){e&&(t.loading=!0),n({method:"POST",url:"/marketing_campaigns/record_campaign_lead",data:{audience_doc_id:t.audience_doc_id,is_profile_shared:e}}).success(function(){window.location=t.actual_url}).error(function(){window.location=t.actual_url})};var e=$(".js_track_marketing_campaign").data("content");t.actual_url=e.actual_url,t.audience_doc_id=e.audience_doc_id,t.on_behalf_of=e.on_behalf_of}]),ac_bootstrap($(".js_marketing_campaigns")[0],["MarketingCampaign"]),ac_bootstrap($(".js_new_marketing_campaign")[0],["NewMarketingCampaign"]),ac_bootstrap($(".js_track_marketing_campaign")[0],["TrackMarketingCampaign"]),function(){this.JST||(this.JST={}),this.JST["job_posting/templates/edit_options_dropdown"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div  style="float:left;margin-right: 8px;" class="text_caption_light">\n  <time-ago from-time=\'{{job_posting.posted_at}}\' title="{{job_posting.formatted_posted_at}}"></time-ago>\n</div>\n<div style="float:left;margin-top: 4px;" ng-custom-if="job_posting.user.id == currentUser.id || currentUser.is_system_coordinator || currentUser.is_corporate_plan_coordinator" >\n  <div style="cursor: pointer;">\n    <i class="nicon-arrow-cap-down" style="font-size: 11px;" ng-click="dropdown.showDropdown()"></i>\n  </div>\n\n  <div ac-dropdown="dropdown" style="width: 200px;position: absolute;top: 8px;right: 0px;">\n    <div ng-click="publishJobPosting()" class="dd_item"\n        ng-custom-if="!(job_posting.published_at) && currentUser.is_system_coordinator">\n      Publish\n    </div>\n    <div ng-click="edit_job_popup.showPopup();dropdown.closeDropdown();" class="dd_item" ng-custom-if="job_posting.user.id == currentUser.id ||currentUser.is_system_coordinator">\n      Edit\n    </div>\n    <div ng-click="repost()" class="dd_item" ng-custom-if="job_posting.repostable" ng-custom-if="job_posting.user.id == currentUser.id ||currentUser.is_system_coordinator">\n      Re-Post\n    </div>\n    <div ng-click="delist()" class="dd_item" ng-custom-if="job_posting.delistable" ng-custom-if="job_posting.user.id == currentUser.id ||currentUser.is_system_coordinator">\n      De-List\n    </div>\n    <div ng-click="deleteJobPosting()" class="dd_item" ng-if="currentUser.is_super_job_poster || currentUser.is_system_admin || currentUser.is_system_coordinator">\n      Delete\n    </div>\n    <div ng-click="promote_job_popup.showPopup();dropdown.closeDropdown();" class="dd_item" ng-custom-if="job_posting.promotable && (currentUser.is_system_coordinator || currentUser.is_corporate_plan_coordinator)">\n      Promote\n    </div>\n    <div ng-click="boost_job_popup.showPopup();dropdown.closeDropdown();" class="dd_item" ng-custom-if="job_posting.promotable && (currentUser.is_system_coordinator || currentUser.is_corporate_plan_coordinator)">\n      Boost\n    </div>\n    <div ng-click="send_boost_mail_popup.showPopup();dropdown.closeDropdown();" class="dd_item" ng-custom-if="job_posting.promotable && (currentUser.is_system_coordinator || currentUser.is_corporate_plan_coordinator)">\n      Send Boost emails\n    </div>\n    <a ng-href="/job_posting/download_promoted_network_list?job_posting_id={{job_posting.id}}" class="dd_item" ng-custom-if="currentUser.is_system_coordinator || currentUser.is_corporate_plan_coordinator">\n      Download Promoted Networks List\n    </a>\n    <a ng-if="job_posting.normalized_titles.length > 0 && currentUser.is_super_job_poster" ng-href="/directory/filter?frm=manage_jobs&page=1&{{job_posting.applied_normalize_title_tags[0]}}" class="dd_item" target="_blank">View related profiles</a>\n    <a ng-if="job_posting.talent_tags && currentUser.is_super_job_poster" ng-href="/talent-list?frm=manage_jobs&page=1&{{job_posting.talent_tags}}" class="dd_item" target="_blank">View Talent profiles</a>\n  </div>\n</div>\n<div style="float:left;margin-top: 4px;" ng-custom-if="(currentUser.is_super_job_poster) && (!currentUser.is_system_admin)" >\n  <div style="cursor: pointer;">\n    <i class="nicon-arrow-cap-down" style="font-size: 11px;" ng-click="dropdown.showDropdown()"></i>\n  </div>\n\n  <div ac-dropdown="dropdown" style="width: 200px;position: absolute;top: 8px;right: 0px;">\n    <div ng-click="edit_job_popup.showPopup();dropdown.closeDropdown();" class="dd_item">\n      Edit\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["job_posting/templates/job_posting_tags"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="margin: 8px -2px;margin-bottom: 0px;">\n  <div class="text_caption job_posting_tag" style="border: 1px solid #fcda00;background-color: #fefbe5;" ng-custom-if="currentInstitute.id === nil && !shared_link && job_posting.institute.title">\n    Posted in {{job_posting.institute.title}}\n  </div>\n  <div class="text_caption job_posting_tag" style="border: 1px solid #fcda00;background-color: #fefbe5;" ng-custom-if="job_posting.max_ctc">\n    \u20b9 {{job_posting.min_ctc ? (job_posting.min_ctc + " - " + job_posting.max_ctc) : job_posting.max_ctc}} LPA\n  </div>\n  <div ng-repeat="functional_area in job_posting.functional_areas" class="text_caption job_posting_tag"  ng-custom-if="currentUser.is_super_job_poster">\n    {{functional_area}}\n  </div>\n  <div ng-repeat="normalized_title in job_posting.normalized_titles" class="text_caption job_posting_tag" ng-custom-if="currentUser.is_super_job_poster">\n    {{normalized_title.name || normalized_title}}\n  </div>\n  <div class="text_caption job_posting_tag" ng-custom-if="job_posting.min_experience && job_posting.max_experience">\n    {{job_posting.min_experience}}-{{job_posting.max_experience}} Yrs Exp.\n  </div>\n  <div class="text_caption job_posting_tag" ng-custom-if="!(job_posting.min_experience) && job_posting.max_experience">\n    Upto {{job_posting.max_experience}} Yrs Exp.\n  </div>\n  <div class="text_caption job_posting_tag" ng-custom-if="!(job_posting.max_experience) && job_posting.min_experience">\n    {{job_posting.min_experience}}+ Yrs Exp.\n  </div>\n<!--  <div ng-repeat="location in job_posting.locations" class="text_caption job_posting_tag" ng-custom-if="location.name && currentUser.is_super_job_poster">-->\n<!--    {{location.name}}-->\n<!--  </div>-->\n  <div ng-repeat="skill in job_posting.major_skills" class="text_caption job_posting_tag" ng-custom-if="currentUser.is_super_job_poster">\n    {{skill.name}}\n  </div>\n  <div class="clear"></div>\n</div>\n');return __p.join("")}}.call(this),angular.module("JobPosting",["ngSanitize","ac","CreatePosts","ConnectSuggestions","CreateJobPosting","CurrentWorkProfile"]),angular.module("JobPosting").controller("ListJobPostingController",["$scope","$http","$timeout","$sce",function(o,a){setAngularCSRFToken(a);var e=[{}];o.fetchJobPostings=function(){o.loading=!0;var e=0;_.isNumber(o.filter.min_experience)&&(e+=1),_.isNumber(o.filter.max_experience)&&(e+=1),_.isEmpty(o.filter.locations)||(e+=1),_.isEmpty(o.filter.job_type)||(e+=1),_.isEmpty(o.filter.functional_areas)||(e+=1),1==o.filter.only_self_jobs&&(e+=1);var t=angular.copy(o.filter);Object.keys(t).forEach(function(e){(null==t[e]||e.includes("normalized"))&&delete t[e]});var n=$.param(t);n=n.replace(/\+/g,"%20"),History.replaceState(null,o.currentInstitute.page_title,"?"+n),o.filterSize=e,a({method:"GET",url:"/job_posting/fetch",params:o.filter}).success(function(e){o.loading=!1,s(e),window.scrollTo(0,0)}).error(function(){o.loading=!1})},o.showSamples=function(){o.show_samples=!0,o.job_postings=e},o.hideSamples=function(){o.show_samples=!1},o.fetchPage=function(e){e||(e=1),o.filter.page!=e&&(o.filter.page=e,o.fetchJobPostings())},o.initFilters=function(e){var t={min_experience:e.min_experience?parseInt(e.min_experience):null,max_experience:e.max_experience?parseInt(e.max_experience):null,locations:e.locations,functional_areas:e.functional_areas,normalized_functional_area:e.normalized_functional_area,normalized_sub_functional_area:e.normalized_sub_functional_area,normalized_skill:e.normalized_skill,page:e.page?parseInt(e.page):1,job_type:e.job_type};o.filter=angular.copy(t),o.filterSize=0};var s=function(e){o.job_postings=e.data,o.total=e.total,o.total_pages=e.total_pages,o.total<=0?o.showSamples():o.hideSamples()},t=function(){var e=getSearchString(),t=convertSearchStringtoObject(e),n=o.top_functional_areas.selected_functional_area;n&&(t.normalized_functional_area=n.title,n.selected_sub_functional_area&&(t.normalized_sub_functional_area=n.selected_sub_functional_area),n.selected_skill&&(t.normalized_skill=n.selected_skill)),o.initFilters(t)};o.locations=$(".js_list_job_postings").data("locations"),o.functional_areas=$(".js_list_job_postings").data("functional-areas"),o.functional_area_suggestions=$(".js_list_job_postings").data("all-functional-areas").map(function(e){return{id:e,name:e}}),o.streams=$(".js_list_job_postings").data("streams"),o.sectors=$(".js_list_job_postings").data("sectors"),o.domains=$(".js_list_job_postings").data("domains"),o.designations=$(".js_list_job_postings").data("designations"),o.job_types=$(".js_list_job_postings").data("job-types"),o.total=$(".js_list_job_postings").data("total-count"),o.top_functional_areas=$(".js_list_job_postings").data("top-functional-areas"),o.should_display_top_functional_areas_box=o.top_functional_areas.top_functional_areas&&0<o.top_functional_areas.top_functional_areas.length;var n=$(".js_list_job_postings").data("job-postings");if(o.top_functional_areas&&o.top_functional_areas.selected_functional_area&&o.top_functional_areas.selected_functional_area.selected_sub_functional_area){var r=o.top_functional_areas.selected_functional_area.selected_sub_functional_area;o.top_functional_areas.selected_functional_area.sub_functional_areas.sort(function(e,t){return 1*(t.title===r)-1*(e.title===r)})}for(o.show_samples=!1,s(n),t(),o.exp_years=[],i=0;i<20;i++)o.exp_years.push(i)}]),angular.module("JobPosting"
).controller("ManageJobsController",["$scope","$http","$timeout","$sce",function(t,n){t.fetchManageJobs=function(){t.loading_job_postings=!0,t.job_postings=[],n({method:"GET",url:"/job_posting/manage_jobs"}).success(function(e){t.job_postings=e.data,t.waiting_applicants_count=e.waiting_applicants_count,t.loading_job_postings=!1})},t.fetchManageJobs(),t.repost=function(e){n({method:"POST",url:"/job_posting/repost",data:{job_posting_id:e}}).success(function(){t.job_posting.repostable=!1,t.job_posting.delistable=!0,t.job_posting.published_at=null,t.job_posting.delisted=!t.job_posting.delistable})}}]),angular.module("JobPosting").controller("SingleJobController",["$scope","$http","$timeout","$sce","$rootScope",function(o,a,t,n,s){setAngularCSRFToken(a),o.publishJobPosting=function(){a({method:"POST",url:"/job_posting/publish",data:{job_posting_id:o.job_posting.id}}).success(function(){o.job_posting.published_at=new Date,o.job_posting.promotable=!0,o.published_message_popup.showPopup(),o.dropdown.closeDropdown()})},o.repost=function(){if(o.job_posting.repostable)return!!confirm("Reposting will bring your post on top of list. Do you want to continue?")&&void a({method:"POST",url:"/job_posting/repost",data:{job_posting_id:o.job_posting.id}}).success(function(){o.job_posting.repostable=!1,o.job_posting.delistable=!0,o.job_posting.delisted=!o.job_posting.delistable,o.job_posting.published_at=null})},o.delist=function(){if(o.job_posting.delistable)return!!confirm("De-listing will remove the post from list, however you would still be able to manage and repost it later. Do you want to continue?")&&void a({method:"POST",url:"/job_posting/delist",data:{job_posting_id:o.job_posting.id}}).success(function(){o.job_posting.repostable=!0,o.job_posting.delistable=!1,o.job_posting.delisted=!o.job_posting.delistable})},o.deleteJobPosting=function(){if(!confirm("You would not be able to manage your post any longer. Do you want to continue?"))return!1;a({method:"DELETE",url:"/job_posting/destroy",params:{job_posting_id:o.job_posting.id}}).success(function(){o.job_postings&&o.job_postings.splice(o.$index,1),o.dropdown.closeDropdown(),o.single_job_view&&(window.location="/job_posting")})},o.promotionForm={min_rank:null,max_rank:null,streams:[],portaled_institute_names:null,portaled_institutes:[],extra_portaled_institutes:[],company_pages:o.job_posting&&o.job_posting.all_pages?o.job_posting.all_pages:[],filter_type:"stream/rank"},o.changePromotionFilterType=function(e){o.promotionForm.filter_type=e};var e=function(){o.boostForm={designation_type:o.job_posting.corporate_job_data?o.job_posting.corporate_job_data.designation_type:null,locations:o.job_posting.corporate_job_data?o.job_posting.corporate_job_data.locations:null}};if(o.updateDesignationBoost=function(){var e=angular.copy(o.boostForm);e.locations=locations=o.boostForm.locations.map(function(e){return{id:e.id,name:e.actual_name||e.name}}),o.loading=!0,a({method:"POST",url:"/job_posting/update_boost_designation",data:{job_posting_id:o.job_posting.id,boostForm:e}}).success(function(){o.loading=!1,o.boost_job_popup.closePopup()}).error(function(e){o.loading=!1,o.error_message=e.server_message})},o.send_boost_mail=function(){o.boostForm.emails?(o.loading=!0,a({method:"POST",url:"/job_posting/send_boost_mail",data:{job_posting_id:o.job_posting.id,emails:o.boostForm.emails}}).success(function(){o.loading=!1,o.send_boost_mail_popup.closePopup()}).error(function(e){o.loading=!1,o.error_message=e.server_message})):o.errors.boost_emails="Please provide emails"},o.promoteJobPosting=function(){if(o.job_posting.promotable){var e=null;"stream/rank"==o.promotionForm.filter_type?e={min_rank:o.promotionForm.min_rank,max_rank:o.promotionForm.max_rank,stream:o.promotionForm.stream,extra_portaled_institute_ids:o.promotionForm.extra_portaled_institutes.map(function(e){return e.id})}:"suggestions"==o.promotionForm.filter_type?e={portaled_institute_ids:o.promotionForm.portaled_institutes.map(function(e){return e.id})}:"bulk_add"==o.promotionForm.filter_type?e={portaled_institute_names:o.promotionForm.portaled_institute_names.split("\n")}:"sector/size"==o.promotionForm.filter_type?e={min_size:o.promotionForm.min_size,max_size:o.promotionForm.max_size,domain:o.promotionForm.domain,sector:o.promotionForm.sector,extra_portaled_institute_ids:o.promotionForm.extra_portaled_institutes.map(function(e){return e.id})}:"add_pages"==o.promotionForm.filter_type&&(e={company_page_ids:o.promotionForm.company_pages.map(function(e){return e.id})}),o.promoting=!0,a({method:"POST",url:"/job_posting/promote",data:{job_posting_id:o.job_posting.id,institute_filters:e}}).success(function(){o.promoting=!1,o.promote_job_popup.closePopup(),o.promotion_success_popup.showPopup()}).error(function(e){o.promoting=!1,o.error_message=e.server_message})}},o.addFunctionalAreas=function(){var e=o.job_posting_form.normalized_titles.map(function(e){return e.functional_areas}),t=o.job_posting_form.functional_areas.map(function(e){return e.name});e=t.concat(Array.prototype.concat.apply([],e).filter(function(e){return null!=e&&t.indexOf(e)<0})),o.job_posting_form.functional_areas=e.map(function(e){return{name:e}})},o.updateJobPosting=function(){if(!o.uploadingFiles){if(o.updating_job_posting)return!0;o.success_message=null,o.error_message=null,o.updating_job_posting=!0;var n=angular.copy(o.job_posting_form);o.job_posting_form.functional_areas&&0<o.job_posting_form.functional_areas.length&&(n.functional_areas=o.job_posting_form.functional_areas.map(function(e){return e.name})),o.job_posting_form.locations&&0<o.job_posting_form.locations.length&&(n.location_city_ids=o.job_posting_form.locations.map(function(e){return e.id}),n.locations=o.job_posting_form.locations.map(function(e){return{id:e.id,name:e.actual_name||e.name}})),o.major_skills&&0<o.major_skills.length&&(n.major_skill_ids=[],angular.forEach(o.major_skills,function(e){if(e.skill){var t=e.skill;t.id&&n.major_skill_ids.push(t.id)}})),o.minor_skills&&0<o.minor_skills.length&&(n.minor_skill_ids=[],angular.forEach(o.minor_skills,function(e){if(e.skill){var t=e.skill;t.id&&n.minor_skill_ids.push(t.id)}})),o.job_posting_form.company_admin?n.company_admin_id=o.job_posting_form.company_admin.id:n.company_admin_id=null,a({method:"POST",url:"/job_posting/update_job_posting",data:{job_posting:n}}).success(function(e){o.job_posting=e,o.updating_job_posting=!1,o.edit_job_popup.closePopup(),o.success_popup.showPopup()}).error(function(e){o.updating_job_posting=!1,o.error_message=e.server_message,t(function(){o.error_message=null},5e3)})}},o.addAnotherSkill=function(){o.major_skills.push({skill:null}),o.minor_skills.push({skill:null})},o.sendReferralMessage=function(){if(o.error_message=null,o.success_message=null,c&&t.cancel(c),l&&t.cancel(l),o.uploadingFiles)return!0;var e={subject:o.requestForm.subject,content:o.requestForm.cover_message,job_id:o.job_posting.id,resume_id:o.requestForm.resume_id};o.creatingReferralRequest=!0,a({method:"POST",url:"/job_posting/referral_message",data:e}).success(function(){o.creatingReferralRequest=!1,o.requestForm={},o.referral_popup.closePopup(),s.currentInstitute.id?o.invite_referrers_popup.showPopup():o.successfully_referred_popup.showPopup()}).error(function(e){o.creatingReferralRequest=!1,o.error_message=e.server_message,c=t(function(){o.error_message=null},5e3)})},o.requestForm={},o.state={},o.oldCurrentUser){var r=o.oldCurrentUser.data.resumes;r=(r||[]).slice(0,1),o.state.resumes=angular.copy(r)}var l=null,c=null;o.afterFileUpload=function(){o.state.resumes.push(o.state.resume),o.state.resume=null};var d=function(){o.required_skills=[],o.job_posting&&angular.forEach(o.job_posting.primary_skills,function(e){e.id&&!e.eligible&&o.required_skills.push({skill_id:e.id,name:e.name,exp_option:e.exp_option,expected_exp_option:e.exp_option})})},u=function(){if(0<o.required_skills.length&&0<o.job_posting.primary_skills.length)return!1;if(o.currentUser.relevant_experience){var e=(o.job_posting.min_experience||0)-2;if(o.currentUser.relevant_experience<e)return!1}return!0};o.referralRequest=function(){if(o.job_posting.external_url)return recordAnalyticsEvent("Job Posting","External Job Source External Url Click","JobPostingId: "+o.job_posting.id,0),void(window.location=o.job_posting.external_url);o.showReferralRequestPopup()},o.showReferralRequestPopup=function(){if(o.requestForm.subject="Referral Request - "+o.job_posting.subject,!o.openLoginDialog(null,null,null,!0)){d();var e=u();!e&&0<o.job_posting.primary_skills.length?o.confirm_skills_popup.showPopup():e?o.referral_popup.showPopup():o.warning_popup.showPopup()}},o.update_skills=function(){o.loading=!0;var t={};o.required_skills&&0<o.required_skills.length&&(t.primary_skills=[],angular.forEach(o.required_skills,function(e){e.skill_id&&t.primary_skills.push({skill_id:e.skill_id,exp_option:e.exp_option})})),a({url:"/job_posting/update_job_preference",method:"POST",data:{job_preference:t}}).success(function(){o.error_message=null,o.success_message="Skills updated successfully"}).error(function(e){o.error_message=e.server_message});var n=o.loading=!1;angular.forEach(o.required_skills,function(e){e.skill_id&&parseInt(e.exp_option)<parseInt(e.expected_exp_option)&&(n=!0)}),o.confirm_skills_popup.closePopup(),n?o.warning_popup.showPopup():o.referral_popup.showPopup()},o.trustAsHtml=function(e){return n.trustAsHtml(e)};var p=function(){o.major_skills=[],o.minor_skills=[],o.job_posting&&(angular.forEach(o.job_posting.major_skills,function(e){e.id&&o.major_skills.push({skill:{id:e.id,name:e.name}})}),angular.forEach(o.job_posting.minor_skills,function(e){e.id&&o.minor_skills.push({skill:{id:e.id,name:e.name}})})),o.addAnotherSkill(),o.addAnotherSkill()},_=function(){o.loadingMoreJobPostings=!0,a({method:"GET",url:"/job_posting/more_jobs",params:{job_id:o.job_posting.id}}).success(function(e){o.loadingMoreJobPostings=!1,o.more_job_postings=e.data,window.scrollTo(0,0)})},m=function(){var n=[];angular.forEach(o.job_posting.sub_functional_areas,function(t){a({method:"GET",url:"/job_posting/functional_areas_job_logos",params:{sub_functional_area:t.title}}).success(function(e){t.logo_urls=e.logo_urls,t.jobs_url=e.jobs_url,t.jobs_count=e.jobs_count,t.jobs_count&&n.push(t)})}),o.sub_functional_areas=n;var i=[];0==n.length&&angular.forEach(o.job_posting.functional_areas,function(t){a({method:"GET",url:"/job_posting/functional_areas_job_logos",params:{functional_area:t}}).success(function(e){functional_area={},functional_area.title=t,functional_area.logo_urls=e.logo_urls,functional_area.jobs_url=e.jobs_url,functional_area.jobs_count=e.jobs_count,functional_area.jobs_count&&i.push(functional_area)})}),o.job_posting_functional_areas=i};if(!o.job_posting){for(o.job_posting=$(".js_single_job_posting").data("content"),o.functional_areas=$(".js_single_job_posting").data("functional-areas"),o.locations=$(".js_single_job_posting").data("locations"),o.functional_area_suggestions=$(".js_single_job_posting").data("all-functional-areas").map(function(e){return{id:e,name:e}}),o.streams=$(".js_single_job_posting").data("streams"),o.sectors=$(".js_single_job_posting").data("sectors"),o.domains=$(".js_single_job_posting").data("domains"),o.designations=$(".js_single_job_posting").data("designations"),o.job_types=$(".js_single_job_posting").data("job-types"),o.exp_years=[],i=0;i<20;i++)o.exp_years.push(i);_(),m(),o.single_job_view=!0}o.job_posting_form=angular.copy(o.job_posting),o.job_posting.functional_areas&&0<o.job_posting.functional_areas.length&&(o.job_posting_form.functional_areas=o.job_posting.functional_areas.map(function(e){return{id:e,name:e}})),o.job_posting.normalized_titles&&0<o.job_posting.normalized_titles.length&&(o.job_posting_form.normalized_titles=o.job_posting.normalized_titles.map(function(e){return{id:e.id,name:e.name}})),o.job_posting.locations&&0<o.job_posting.locations.length&&(o.job_posting_form.locations=o.job_posting.locations.map(function(e){return{id:e.id,name:e.name}})),p(),e(),t(function(){var e=getSearchString(),t=convertSearchStringtoObject(e);o.job_posting&&o.job_posting.reposted&&o.reposted_job_popup.showPopup(),"true"==t.share_dialogue&&o.currentUser.id&&o.currentInstitute.id&&(o.post_create_content=o.job_posting.url,o.create_post_popup.showPopup(),History.pushState({},null,window.location.pathname)),"true"==t.invite_referrer&&o.currentUser.is_system_coordinator&&o.invite_referrers_popup.showPopup(),"true"==t.created&&o.currentUser.id==o.job_posting.user.id&&(o.created_success_message="Success! Job posted, we will now review the post and will take it live within a few hours. You will receive notifications at "+o.job_posting.notification_email)}),o.openEditPopup=function(){o.edit_job_popup&&o.edit_job_popup.showPopup()}}]),angular.module("JobPosting").controller("TopReferrerController",["$scope","$http","$timeout","$sce",function(t,e){setAngularCSRFToken(e),t.loadingTopReferrers=!0,e({method:"POST",url:"/follow_suggest/referrer_suggestions",data:{limit:20}}).success(function(e){t.loadingTopReferrers=!1,t.top_referrers=e.data,t.total=e.total}).error(function(){t.loadingTopReferrers=!1})}]),angular.module("JobPosting").controller("PublishedMessageController",["$scope","$http","$timeout","$sce",function(n,t){setAngularCSRFToken(t),n.message_form={subject:null,content:null},n.message_form.subject="Your Job Post",n.message_form.content="Hi "+n.job_posting.user.name+",\n\nThanks for your post. You can access it here \nhttps://"+n.job_posting.institute_url+"/jobs/"+n.job_posting.id+"?frm=publish_email\n\nWe have reviewed your post and have made it live with some basic formatting and tags edit. We have hidden your email details from being displayed as we want to promote referral requests here so that we can help the applicants and also keep a track on top referrers.\n\nPlease do let us know if it is fine.\n\nThanks.\nTIP - THE MORE APPLICANTS YOU REPLY TO, THE MORE APPLICATIONS YOU WILL RECEIVE.";var i=!1,o=function(){if(!i)return!1;var e=!0;n.errors={},n.message_form.subject||(n.errors.subject="Subject can not be blank"),n.message_form.content||(n.errors.content="Content can not be blank");var t=Object.keys(n.errors);return!(t&&0<t.length)&&(n.errors=null,e)};n.$watch("message_form",o,!0),n.sendMessage=function(){if(n.error_message=null,i=!0,!o())return!1;if(n.sending_message)return!0;var e={subject:n.message_form.subject,message:{content:n.message_form.content},to_addresses:[n.job_posting.user.id],generated_via:"job_posting_publish",job:n.job_posting.id};n.sending_message=!0,t({method:"POST",url:"/conversations/create_conversation",data:e}).success(function(){i=!1,n.sending_message=!1,n.message_form.content=null,n.message_form.subject=null,n.success_message="Message sent successfully",n.published_message_popup.closePopup()}).error(function(e){n.sending_message=!1,n.error_message=e.server_message})}}]),angular.module("JobPosting").controller("PromotePermissionsPopupController",["$scope","$http","$timeout","$sce",function(n,e,t){setAngularCSRFToken(e),n.corporatePromotedNetworks=function(){var t=[];angular.forEach(n.selectedPromotedNetworks,function(e){t.push(e)}),n.loading_promote_permissions=!0,e({url:"/job_posting/corporate_promoted_networks",method:"POST",data:{institute_ids:t}}).success(function(){n.promote_permissions_popup.closePopup()}).error(function(){}),n.loading_promote_permissions=!1},n.addOrRemoveNetwork=function(e){n.selectedPromotedNetworks[e]?delete n.selectedPromotedNetworks[e]:n.selectedPromotedNetworks[e]=e};var i=function(){n.selectedPromotedNetworks={},angular.forEach(n.user_connected_networks,function(e){n.addOrRemoveNetwork(e.id)})};window.location.search.includes("promote_job_permissions=true")&&t(function(){n.promote_permissions_popup.showPopup()},1e3),n.user_connected_networks=$(".js_list_job_postings").data("user-promoted-networks").data,i(),n.loading_promote_permissions=!1}]),angular.module("JobPosting").controller("InviteReferrersController",["$scope","$http","$timeout","$sce",function(n,i,o){n.syncForContacts=function(e){"gmail"==e&&window.open("/profiles/social_sync/google/invite_referrers","Google permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300")},n.fetchContacts=function(t){n.fetching_contacts=!0,i({url:"/profiles/"+t+"?contact_type=all_type",method:"GET"}).success(function(e){n.contact_details=[],n.email_contacts=e.email_contacts,n.matching_users=e.matching_users,n.fetching_contacts=!1,task=0<n.email_contacts.length?"already_sync_data_slide":"google_sync_data_slide",0<n.email_contacts.length&&(n.goToNextState(),n.selectAll()),"fetch_saved_contacts"===t&&i({method:"POST",url:"/profile/track_task",data:{task_name:task}}).success(function(){})}).error(function(){n.fetching_contacts=!1})},n.send_invites=function(){if(!n.sending_invite){var t=[];angular.forEach(n.selectedEmailContacts,function(e){t.push(e)}),0!=t.length?(n.sending_invite=!0,i({url:"/job_posting/invite_referrers",method:"POST",data:{email_contacts:t}}).success(function(e){n.sending_invite=!1,n.success_message=e.server_message,o(function(){n.invite_referrers_popup.closePopup()},2e3)}).error(function(){n.sending_invite=!1})):n.error_message="Select atleast one contact."}},n.addOrRemoveContact=function(e){n.selectedEmailContacts[e.email]?delete n.selectedEmailContacts[e.email]:n.selectedEmailContacts[e.email]=e},n.goToNextState=function(){n.import_contacts_done=!0},n.goToPrevState=function(){n.import_contacts_done=!1},n.selectAll=function(){angular.forEach(n.email_contacts,function(e){n.addOrRemoveContact(e)}),n.state.select_all=!0,n.state.clear_all=!1},n.clearAll=function(){n.selectedEmailContacts={},n.state.clear_all=!0,n.state.select_all=!1},n.state={search_term:null,select_all:!1,clear_all:!1},n.clearAll(),History.replaceState(null,document.title,"?invite_referrer=true"),n.fetchContacts("fetch_saved_contacts")}]),angular.module("JobPosting").controller("CreateSuperJobPostingController",["$scope","$http","$timeout","$sce",function(o,e,t){setAngularCSRFToken(e);var a=!1,s=function(){if(!a)return!1;var e=!0;o.errors={},o.job_posting_form.title||(o.errors.title="Title can not be blank"),o.job_posting_form.description||(o.errors.description="Description can not be blank"),o.job_posting_form.about_company&&140<o.job_posting_form.about_company.length&&(o.errors.about_company="Character limit of 140 crossed"),o.job_posting_form.user_email||(o.errors.user_email="User email can not be blank");var t=Object.keys(o.errors);return!(t&&0<t.length)&&(o.errors=null,e)},r=function(){o.major_skills=[],o.minor_skills=[],o.addAnotherSkill(),o.addAnotherSkill()};o.$watch("job_posting_form",s,!0),o.addFunctionalAreas=function(){var e=o.job_posting_form.normalized_titles.map(function(e){return e.functional_areas}),t=o.job_posting_form.functional_areas.map(function(e){return e.name});e=t.concat(Array.prototype.concat.apply([],e).filter(function(e){return t.indexOf(e)<0})),o.job_posting_form.functional_areas=e.map(function(e){return{name:e}})},o.createJobPosting=function(){if(!o.uploadingFiles){if(o.creating_job_posting)return!0;if(o.success_message=null,o.error_message=null,a=!0,!s())return!1;o.creating_job_posting=!0;var n=angular.copy(o.job_posting_form);n.functional_areas&&0<n.functional_areas.length&&(n.functional_areas=n.functional_areas.map(function(e){return e.name})),o.job_posting_form.locations&&0<o.job_posting_form.locations.length&&(n.location_city_ids=o.job_posting_form.locations.map(function(e){return e.id}),n.locations=o.job_posting_form.locations.map(function(e){return{id:e.id,name:e.actual_name}})),o.major_skills&&0<o.major_skills.length&&(n.major_skill_ids=[],angular.forEach(o.major_skills,function(e){if(e.skill){var t=e.skill;t.id&&n.major_skill_ids.push(t.id)}})),o.minor_skills&&0<o.minor_skills.length&&(n.minor_skill_ids=[],angular.forEach(o.minor_skills,function(e){if(e.skill){var t=e.skill;t.id&&n.minor_skill_ids.push(t.id)}})),o.job_posting_form.company_admin&&(n.company_admin_id=o.job_posting_form.company_admin.id),n.company_id=getValue(n.company,["id"]),n.current_city_id=getValue(n.current_city,["id"]),e({method:"POST",url:"/job_posting/create_job_posting",data:{job_posting:n}}).success(function(e){o.creating_job_posting=!1,o.job_posting_form=angular.copy(l),r(),o.success_message="Job has been successfully posted at "+e.url,a=!1}).error(function(e){o.creating_job_posting=!1,o.error_message=e.server_message,t(function(){o.error_message=null},5e3)})}},o.addAnotherSkill=function(){o.major_skills.push({skill:null}),o.minor_skills.push({skill:null})};var l={title:null,description:null,shared_files:[],min_experience:null,max_experience:null,functional_areas:null,normalized_titles:null,locations:null,user_email:null};for(r(),o.job_posting_form=angular.copy(l),o.exp_years=[],i=0;i<20;i++)o.exp_years.push(i);o.state={},o.functional_area_suggestions=$(".js_create_super_job_posting").data("all-functional-areas").map(function(e){return{id:e,name:e}}),o.job_types=$(".js_create_super_job_posting").data("all-job-types")}]),angular.module("JobPosting").controller("CreatePublicJobPostingController",["$scope","$http","$timeout","$sce",function(n,t,i){setAngularCSRFToken(t);var o=!1,a=function(){if(!o)return!1;var e=!0;n.errors={},n.job_posting_form.subject||(n.errors.subject="Subject can not be blank"),n.job_posting_form.description||(n.errors.description="Description can not be blank"),n.job_posting_form.phone_nos||(n.errors.phone_nos="Mobile number can not be blank");var t=Object.keys(n.errors);return!(t&&0<t.length)&&(n.errors=null,e)};n.$watch("job_posting_form",a,!0),n.createJobPosting=function(){if(!n.uploadingFiles){if(n.creating_job_posting)return!0;if(n.success_message=null,n.error_message=null,o=!0,!a())return!1;n.creating_job_posting=!0;var e=angular.copy(n.job_posting_form);e.functional_areas&&0<e.functional_areas.length&&(e.functional_areas=e.functional_areas.map(function(e){return e.name})),n.job_posting_form.locations&&0<n.job_posting_form.locations.length&&(e.location_city_ids=n.job_posting_form.locations.map(function(e){return e.id}),e.locations=n.job_posting_form.locations.map(function(e){return{id:e.id,name:e.actual_name}})),e.company_id=getValue(e.company,["id"]),e.current_city_id=getValue(e.current_city,["id"]),t({method:"POST",url:"/job_posting/create_public_job_posting",data:{job_posting:e}}).success(function(){n.creating_job_posting=!1,n.job_posting_form=angular.copy(s),n.openLoginDialog("/job_posting/new","Your opening has been posted","Login to view and manage applications"),o=!1}).error(function(e){n.creating_job_posting=!1,n.error_message=e.server_message,i(function(){n.error_message=null},5e3)})}};var s={subject:null,description:null,shared_files:[],locations:null,user_email:null,phone_nos:null};n.currentUser=$(".js_create_public_job_posting").data("content");var e="Hey Guys, I have an opening to share with you. \n \n<<  Insert your job description here  >> \n \nIf this is interesting for you then please share your resume while applying. Also, Please feel free to reach out in case of any queries. \n \nThanks. \n"+n.currentUser.name;n.currentInstitute&&n.currentInstitute.country_code&&"IN"!==n.currentInstitute.country_code&&(e="Hi Friends and Colleagues, I have a job opening to share with you. \n \n<<  Insert your job description here  >> \n \nIf this is of interest to you, please feel free to reach out for more information. \n \nThanks. \n"+n.currentUser.name),s.description=e,s.auth_token=n.currentUser.auth_token,n.job_posting_form=angular.copy(s),n.loggedOutUser=!0,n.state={}}]),angular.module("CreateJobPosting",["ngSanitize","ac"]),angular.module("CreateJobPosting").controller("CreateJobPostingController",["$scope","$rootScope","$http","$timeout","$sce",function(n,e,o,a){setAngularCSRFToken(o);var s=!1,r=function(){if(!s)return!1;var e=!0;n.errors={},n.job_posting_form.title||(n.errors.title="Title can not be blank"),n.job_posting_form.company||(n.errors.company="Company can not be blank"),n.job_posting_form.locations||(n.errors.locations="Location can not be blank"),n.job_posting_form.about_company&&140<n.job_posting_form.about_company.length&&(n.errors.about_company="Character limit of 140 crossed"),n.is_adhoc||n.job_posting_form.phone_nos||(n.errors.phone_nos="Mobile number can not be blank");var t=Object.keys(n.errors);return console.log(n.errors),!(t&&0<t.length)&&(n.errors=null,e)},t=function(){n.selectedConnectedNetworks={},angular.forEach(n.connected_institutes,function(e){n.addOrRemoveNetwork(e.id)})},l=function(){o({method:"GET",url:"/connected_institutes"}).success(function(e){n.connected_institutes=e.data,t()})},c=function(){n.major_skills=[],n.minor_skills=[],n.addAnotherSkill(),n.addAnotherSkill()},d=function(){e.currentUser.is_institute_coordinator||o({method:"GET",url:"/profile/current_company_testimonial"}).success(function(e){n.job_posting_form.about_company=e.testimonial}).error(function(){})};n.addOrRemoveNetwork=function(e){n.selectedConnectedNetworks[e]?delete n.selectedConnectedNetworks[e]:n.selectedConnectedNetworks[e]=e},n.$watch("job_posting_form",r,!0),n.createJobPosting=function(t){if(!n.uploadingFiles){if(n.creating_job_posting)return!0;if(n.success_message=null,n.error_message=null,s=!0,!r())return!1;n.creating_job_posting=!0,n.job_posting_form.company&&(n.job_posting_form.company_id=n.job_posting_form.company.id),n.hide_description&&(n.job_posting_form.description=""),n.is_adhoc&&(n.job_posting_form.submitted_via_adhoc=!0),n.job_posting_form.locations&&0<n.job_posting_form.locations.length&&(n.job_posting_form.location_city_ids=n.job_posting_form.locations.map(function(e){return e.id}),n.job_posting_form.locations=n.job_posting_form.locations.map(function(e){return{id:e.id,name:e.actual_name||e.name}})),n.major_skills&&0<n.major_skills.length&&(n.job_posting_form.major_skill_ids=[],angular.forEach(n.major_skills,function(e){if(e.skill){var t=e.skill;t.id&&n.job_posting_form.major_skill_ids.push(t.id)}})),n.minor_skills&&0<n.minor_skills.length&&(n.job_posting_form.minor_skill_ids=[],angular.forEach(n.minor_skills,function(e){if(e.skill){var t=e.skill;t.id&&n.job_posting_form.minor_skill_ids.push(t.id)}})),n.job_posting_form.company_admin&&(n.job_posting_form.company_admin_id=n.job_posting_form.company_admin.id),n.selectedConnectedNetworks&&(n.job_posting_form.all_institute_ids=[]),angular.forEach(n.selectedConnectedNetworks,function(e){n.job_posting_form.all_institute_ids.push(e)}),o({method:"POST",url:"/job_posting/create_job_posting",data:{job_posting:n.job_posting_form}}).success(function(e){t&&t.closePopup(),window.location=e.url}).error(function(e){n.creating_job_posting=!1,n.error_message=e.server_message,a(function(){n.error_message=null},5e3)})}},n.showDescriptionField=function(){n.hide_description=!1},n.addAnotherSkill=function(){n.major_skills.push({skill:null}),n.minor_skills.push({skill:null})};var u="<p>Hey Guys, I have an opening to share with you.</p><p><br></p><p>&lt;&lt;  Insert your job description here  &gt;&gt;</p><p><br></p><p>If this is interesting for you then please share your resume while applying. Also, please feel free to reach out in case of any queries.</p><p><br></p><p>Thanks,</p>"+n.currentUser.name;n.currentInstitute&&n.currentInstitute.country_code&&"IN"!==n.currentInstitute.country_code&&(u="<p>Hi Friends and Colleagues, I have a job opening to share with you.</p><p><br></p><p>&lt;&lt;  Insert your job description here  &gt;&gt;</p><p><br></p><p>If this is of interest to you, please feel free to reach out for more information.</p><p><br></p><p>Thanks,</p>"+n.currentUser.name);var p={title:null,description:u,shared_files:[],min_experience:null,max_experience:null,functional_areas:null,locations:null,phone_nos:null};for(c(),p.phone_nos=n.currentUser.phone_nos,n.currentUser&&n.currentUser.currently_at&&(p.company=n.currentUser.currently_at),"Institution::Company"==n.currentInstitute.type&&n.currentInstitute.name&&n.currentUser.only_member_access&&(current_company={id:n.currentInstitute.id,name:n.currentInstitute.name},p.company=current_company),n.job_posting_form=angular.copy(p),n.job_post&&(l(),n.job_posting_form.parent_job_id=n.job_post.id,n.job_posting_form.title=n.job_post.title,n.job_posting_form.description=n.job_post.description,n.job_posting_form.min_experience=n.job_post.min_experience,n.job_posting_form.max_experience=n.job_post.max_experience,n.job_posting_form.locations=n.job_post.locations,n.job_posting_form.company=n.job_post.company),d(),n.state={},n.exp_years=[],i=0;i<20;i++)n.exp_years.push(i)}]),function(){this.JST||(this.JST={}),this.JST["contributions/templates/add_update_form"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="attach-event" ng-show="post.addUpdate">\n  <div class="attach-label">\n    Update Form:\n  </div>\n  <span class="event-close">\n    <a href="javascript:;" ng-click="closeEventUpdate()" class="icon-close"></a>\n  </span>\n  <div class="subject-event">\n    <input type="text" ng-model="addUpdateForm.subject" placeholder="Subject"/>\n  </div>\n  <div class="content-event">\n    <textarea ng-model="addUpdateForm.content" placeholder="Content"></textarea>\n  </div>\n  <div class="event-uploader">\n    <input type="submit" ng-disabled="addUpdateLoader" name="submit" value="Add" class="ac_button" ng-click="submitAddUpdate();"/>\n    <span class="event-loader" ng-show="addUpdateLoader"><img src="https://d26pkxyw9vw39t.cloudfront.net/assets/loader-4830e5040671b4b3999740d1a1ae3551768ca0336949f90fc893cb0fe075c21f.gif"/></span>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/comment_section"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div ng-controller="CommentsController">\n  <div ng-custom-if="post.comments.data.length < post.comments.total"\n    style="cursor: pointer;padding-bottom: 8px;" ng-click="viewMoreComments()" class="text_caption ac_link">\n    View {{post.comments.total - post.comments.data.length}} more comments\n  </div>\n\n  <div ng-include="\'contributions/templates/comments_list\'"></div>\n\n  <div ng-custom-if="post_state.showCommentBox">\n    <div style="padding: 8px 12px 8px 0px;vertical-align: middle;display: inline-block" class="hide_below_700">\n      <img ng-src="{{$root.url(currentUser.image, {size: \'100x100\', type: \'crop\'})}}" style="max-width: 32px;max-height: 32px;border-radius:16px;display: block;" />\n    </div>\n    <div ac-input-box class="comment_textbox_container">\n      <div>\n        <textarea ng-model="commentForm.content" placeholder="Type @name to mention someone" mention-input\n          style="max-height: 100px;height: 40px;min-height: 40px;">\n        </textarea>\n      </div>\n    </div>\n    <div style="display: inline-block;padding: 8px 0px;vertical-align: middle;">\n      <div ng-click="newComment()" ng-disabled="savingComment" class="ac_button_small" ac-loading="{{saving_comment}}" text="Post">\n      </div>\n    </div>\n  </div>\n\n  <div class="clear"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/comments_list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(
'<div class="single_comment" ng-repeat="comment in post.comments.data" ng-controller="CommentController" style="padding: 8px 0px;">\n\n  <div style="position:relative;width: 100%;">\n    <div ng-click="deleteComment()" class="icon-close right" style="cursor:pointer;position: absolute;top: 0px;right: 0px;" ng-class="{\'false\' : \'hidden\'}[comment.can_be_deleted]"></div>\n    <time-ago style="position: absolute;top: 0px;right: 0px;" class="right text_caption_light" from-time="{{comment.created_at}}" ng-class="{\'true\' : \'hidden\'}[comment.can_be_deleted]"></time-ago>\n\n    <div style="float: left;height: 32px;width: 32px;margin-right: 12px;">\n      <img ng-src="{{$root.url(comment.user.image, {size: \'100x100\', type: \'crop\'})}}" style="max-width: 32px;border-radius:16px;display: block;" />\n    </div>\n\n    <div style="width:calc(100% - 80px); float:left;">\n      <div class="ellipsis text_caption_dark" style="width:100%;">\n        <a ng-href="{{comment.user.url}}" target="_self" profile-hover={{comment.user.id}}>\n          <span class="ac_link">{{comment.user.name}}</span>\n        </a>\n      </div>\n    </div>\n\n    <div style="width: calc(100% - 44px);float: left;">\n      <div ng-custom-if="moreContent" class="added_comment text_body_light">\n        <span ng-bind-custom-html="comment.content_short | aclinky" class="spaced-text"></span>\n        <span class="text_caption_light" style="cursor: pointer;display: inline;" ng-click="showMoreContent()">\n          See More\n        </span>\n      </div>\n      <div ng-bind-custom-html="comment.content | aclinky" class="added_comment spaced-text text_body_light" ng-custom-if="!moreContent"></div>\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/contributor_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a ng-href="{{user.profile_url}}" style="display: block;float: left;margin-right: 12px;">\n  <img ng-src="{{$root.url(user.image, {size: \'100x100\', type: \'crop\'})}}" style="max-width: 40px;max-height: 40px;border-radius: 20px;display: block;" />\n  <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/verified-d8c0c519bf271ee8b628607b5a4dc3fc72920783c8b0dedbcc4ac89e22a84667.png" style="position: absolute;bottom: -2px;right: -2px;max-width: 13px;" ng-custom-if="(user.is_official || user.certified)"/>\n</a>\n<div style="float: left;width: calc(100% - 72px);font-size: 15px;" class="ellipsis">\n  <a ng-href="{{user.profile_url}}">\n    <span class="text_heading">{{user.name}}</span>\n  </a>\n  <span>\n    <span ng-custom-if="user.course" class="text_caption_small" style="padding-left: 8px;">{{user.course.name}} \'{{user.batch_small}}\n    </span><span ng-custom-if="user.designation" class="text_caption_small" style="padding-left: 8px;">{{user.designation}}</span>\n    <span ng-custom-if="user.prospect_status && post && post.type == \'Contribution::User::ExternalArticle\' && $root.currentUser.is_institute_coordinator">\n      <span class="text_caption_small" style="color: #FD5B2C;padding-left: 8px;">\n        {{user.prospect_status}}\n      </span>\n    </span>\n  </span>\n  <div class="text_caption">\n    <div ac-concat="[user.headline, \', \', user.current_city]" class="ellipsis" style="width: 100%;"></div>\n  </div>\n  <div ng-custom-if="post && post.type == \'Contribution::System::ImageFeed\'" class="text_caption_light">\n    Added Photos\n  </div>\n</div>\n<div ac-user-connectable="user"  ng-custom-if="user.user_source == \'registered_user\' && $root.currentBiolet.id" style="float: right;"></div>\n<div style="clear: both;"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/external_shared_link"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a ng-custom-if="shared_link" ng-href="{{shared_link.external_url}}" target="_blank" style="display: block;">\n  <div style="background: #eef0f2;width: 100%;border-radius: 3px;">\n    <div static-bg-image="{{$root.url(shared_link.shared_file, {size: \'600x240\', type: \'cover\'})}}" style="width: 100%;padding-bottom: 40%;"\n      class="bg_cover" ng-custom-if="shared_link.shared_file">\n    </div>\n\n    <div style="padding: 12px 16px 8px;">\n      <div class="text_heading">\n        {{shared_link.title}}\n      </div>\n      <div class="text_caption spaced-text" ng-bind-custom-html="shared_link.description"\n        style="max-height: 35px;width: 100%;line-height: 1.2em;margin: 4px 0px;" dot-dot-dot></div>\n      <div class="text_caption_light">\n        {{shared_link.site_url}}\n      </div>\n    </div>\n    <div class="clear"></div>\n  </div>\n</a>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/external_shared_link_edit"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="border: 1px solid #ddd;">\n  <div style="font-size: 15px;color: #333;font-weight: 600;padding: 7px 10px;background: #ddd;" ng-click="editTitle()" ng-custom-if="!(edit_title)">\n    {{shared_link.title}}\n  </div>\n  <div ng-custom-if="edit_title">\n    <input type="text" ng-model="shared_link.title" ac-event="{\'blur\':\'updateTitle()\'}"\n      style="float: none;width: 100%;background: #fff;padding: 5px;" class="border-box" />\n  </div>\n\n  <div style="padding: 10px;padding-top: 5px;">\n    <div ng-click="editDescription()" ng-custom-if="!(edit_description)">\n      <div class="text_caption" ng-show="shared_link.description">\n        {{shared_link.description}}\n      </div>\n      <div class="text_link" ng-custom-if="!(shared_link.description)">Add Description</div>\n    </div>\n\n    <div ng-custom-if="edit_description">\n      <textarea ng-model="shared_link.description" flexible-area class="border-box"\n         ac-event="{\'blur\':\'updateDesc()\'}" style="float: none;width: 100%;max-height: 100px;border: 1px solid #bbb;"></textarea>\n    </div>\n\n    <div style="color: #adc4bf;font-size: 12px;">\n      {{shared_link.sitename}}\n    </div>\n\n    <div ng-custom-if="shared_link.shared_file.url" style="padding-top: 10px;">\n      <img ng-src="{{shared_link.shared_file.url}}" style="max-width: 50%;display: block;" />\n      <div style="position: absolute;right: -5px;top: -5px;cursor: pointer;" ng-click="removeImage()">\n        <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/close_icon-d55c8c24ca1d5ce965bdc76817810832f9a45b52f309e80f699852abbb08ae25.png" style="max-width: 30px;"/>\n      </div>\n    </div>\n\n    <div>\n      <div class="progressBarInProgress" style="width: {{shared_link.shared_file.progress}}%;" ng-hide="shared_link.shared_file.uploaded"></div>\n      <div ng-custom-if="!(shared_link.shared_file)">\n        <div ac-asset-upload class="file_upload_box" jfu-model="shared_link.shared_file" jfu-id-model="shared_link.shared_file_id"\n          data-opts="{only_image: true, single_file: true}">\n          <div class="ac_link" style="font-size: 12px;color: #00bfa9;">Add Image</div>\n        </div>\n        <div style="clear: both;"></div>\n      </div>\n    </div>\n\n\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/job_posting_shared_link"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a ng-custom-if="job_posting" ng-href="{{job_posting.url}}" target="_blank" style="display: block;background: #eef0f2;padding: 12px 16px;border-radius: 3px;">\n  <div class="text_title_small">\n    {{job_posting.subject}}\n  </div>\n  <div ng-custom-include="\'job_posting/templates/job_posting_tags\'"></div>\n</a>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/likers_list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\n<div ng-custom-if="post.likers.total > 0" style="padding: 8px 0px;">\n  <div ng-custom-if="post.likers.total <= 3" class="text_caption_dark">\n    <span ac-concat="[post.likers.data[0], \', \', post.likers.data[2], \' and \', post.likers.data[1]]" ac-changeable="post.likers.total"> </span><span class="text_caption"> liked</span>\n  </div>\n  <div ng-custom-if="post.likers.total > 3">\n    <span ac-concat="[post.likers.data[0], \', \', post.likers.data[1]]" ac-changeable="post.likers.total" class="text_caption_dark"></span>\n    <span class="text_caption">&nbsp;and&nbsp;</span>\n\n    <span class="other_person_text text_caption">\n      <span ng-click="likers_popup.showPopup()" class="ac_link text_caption">\n        {{post.likers.total-2}} other people\n      </span>\n\n      <div class="hover_list_like">\n        <div class="like_hover_inner">\n          <div class="like_hover_arrow"></div>\n          <div ng-repeat="liker in post.likers.data | limitTo: 10" class="like_single_liker" ng-custom-if="$index > 1">\n            <span class="tag-name">\n              <a ng-href="{{liker.profile_url}}" target="_self">\n                {{liker.name}}\n              </a>\n            </span>\n          </div>\n          <div class="like_single_liker" ng-custom-if="post.likers.total > 10">\n            <span class="tag-name">\n              and {{post.likers.total-10}} more\n            </span>\n          </div>\n        </div>\n      </div>\n    </span>\n    <span class="text_caption">liked this</span>\n  </div>\n</div>\n\n\n\n<div ac-popup="likers_popup">\n  <div ac-section-title ac-title-first="{{post.likers.total}}" ac-title-last="Likes"></div>\n  <div style="max-height: 400px;overflow: auto;">\n    <div ng-repeat="user in post.likers.data">\n      <div ac-single-user="user" after-follow="afterFollowed">\n      </div>\n    </div>\n    <div ng-click="fetchMoreLikers()" ng-custom-if="post.likers.total > post.likers.data.length" style="text-align: center;" class="text_link">\n      Show More\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/memory_shared_link"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a ng-custom-if="memory" ng-href="{{memory.url}}" target="_blank" style="display: block;border: 1px solid #cbcbcb;">\n\n  <div static-bg-image="{{$root.url(memory.landing_asset, {size:\'600x240\', type:\'crop\'})}}" class="bg_cover" style="padding-bottom: 40%;" ng-custom-if="memory.landing_asset">\n  </div>\n\n  <div style="padding: 16px;">\n    <div class="text_heading">\n      {{memory.title}}\n    </div>\n    <div class="text_link" ng-custom-if="memory.images_count > 0">\n      {{memory.images_count}} Pictures\n    </div>\n  </div>\n\n</a>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/secondary_links"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="padding: 8px 0px;">\n  <div style="float: left;margin-right: 16px;cursor: pointer;margin-top: 4px;">\n    <span ng-custom-if="!(currentUser.id) || post.likers.data[0].id != currentUser.id" ng-click="like(post)">\n      <span class="nicon-like"  style="font-size: 26px;"><span class="path1"></span><span class="path2"></span></span>\n    </span>\n    <span ng-custom-if="currentUser.id && post.likers.data[0].id == currentUser.id" ng-click="unlike(post)">\n      <span class="nicon-liked" style="font-size: 26px;"><span class="path1"></span><span class="path2"></span></span>\n    </span>\n  </div>\n\n  <div ng-click="toggleCommentBox()" style="float: left;margin-right: 16px;" class="ac_sec_button_small">\n    Comment\n  </div>\n\n  <div style="float: left;margin-right: 16px;" ng-click="sharable_job_boost_popup.showPopup();" class="ac_button_small" ng-custom-if="post.shared_link && post.shared_link.type === \'JobPosting\' && post.shared_link.sharable && currentUser.connected_biolets_count > 1">\n    Share in other Networks\n  </div>\n\n  <div ac-popup="sharable_job_boost_popup" max-width="520px">\n    <div ng-custom-include="\'common/templates/adhoc_job_posting_form\'" ng-init="job_post = post.shared_link;"></div>\n  </div>\n\n  <div style="float: left;" ng-custom-if="post.view_count > 0 && currentUser.is_institute_coordinator">\n    <div ac-users-popup load-users="fetchMoreViewers" total="post.view_count"\n      users="post.viewers" loading="loading_viewers" label="Views">\n      <div style="height: 32px;cursor: pointer;" class="text_caption">\n        <div class="vertical_middle"></div>\n        <img style="display: inline-block;vertical-align: middle;" src="https://d26pkxyw9vw39t.cloudfront.net/assets/icons/eye-909c3927cce66704bf0ea58d883241e09f3af2cf6e0107c556c3e85941fe8ca2.png"></img>\n        <span style="display: inline-block;vertical-align: middle;">{{post.view_count}}</span>\n      </div>\n    </div>\n  </div>\n\n  <div style="float: right;" class="text_caption" ng-custom-if="post.type == \'Contribution::User::ExternalArticle\' && $root.currentUser.is_institute_coordinator">\n    <div share-via-email post="post">\n      <div class="ac_sec_button_small">\n        <div class="vertical_middle"></div>\n        <span class="nicon-paper-plane-fill" style="font-size: 18px;display: inline-block;vertical-align: middle;color: #707274;"></span>\n        <span style="display: inline-block;vertical-align: middle;">Share Via Email</span>\n      </div>\n    </div>\n  </div>\n\n\n  <!-- <div style="float: right;margin-left: 16px;" ng-custom-if="!(post.group) && $root.currentBiolet.id">\n    <div style="height:32px;cursor: pointer;" ng-click="boostContribution()" ng-custom-if="!post.boosted">\n      <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/boost-8c2dc998d9bbfc3da3a3a6a1c3bb3a1d719320135e14fdf5d09b6d4c74610a0e.png" style="height: 32px;width: 100%;"></img>\n    </div>\n    <div class="text_caption" style="background: rgba(252,217,0,0.2);padding: 8px;border-radius: 3px;height: 32px;" ng-custom-if="post.boosted">\n      Boosted\n    </div>\n  </div> -->\n\n  <div ng-custom-if="post.can_be_marked_as_trending && !(post.group)" ng-click="markAsTrending()" style="float: right;height: 32px;cursor: pointer;">\n    <div class="vertical_middle"></div>\n    <span class="nicon-trending light_grey" style="font-size: 20px;display: inline-block;vertical-align: middle;"></span>\n  </div>\n\n  <div style="clear: both;"></div>\n</div>\n\n<div>\n  <span ng-include="\'contributions/templates/likers_list\'"></span>\n\n  <div ng-custom-if="post && post.type == \'Contribution::User::ExternalArticle\' && $root.currentUser.is_institute_coordinator && post.gift_officers_count > 0">\n    <div class="vertical_middle"></div>\n    <div class="text_caption_light" style="padding-right: 2px;display: inline-block;vertical-align: middle;">Notify:</div>\n    <div ng-repeat="user in post.related_users" style="display: inline-block;margin-left: 4px;vertical-align: middle;"\n      ng-custom-if="user.gift_officer_name">\n      <div share-via-email to="user.gift_officer_email" user="user" post="post">\n        <div class="text_caption_dark" style="cursor: pointer;">\n          {{user.gift_officer_name}}\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-include="\'contributions/templates/comment_section\'"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/shared_images"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div ng-custom-if="shared_images.length > 0">\n  <div ng-custom-if="shared_images.length == 1" style="background: #000;text-align: center;cursor: pointer;max-height: 580px;overflow: hidden;">\n    <img ng-src="{{$root.url(shared_images[0], {size: \'600x600\', type: \'blurredframe\', extend: \'w\'})}}" style="max-width: 100%;" ng-click="selectPhoto(shared_images[0], selected_image_popup)" />\n  </div>\n\n  <div class="memory_contribution_{{(shared_images|limitTo: 3).length}}" ng-custom-if="shared_images.length > 1">\n    <div ng-repeat="shared_image in shared_images|limitTo: 3"\n       style="position: relative;float: left;margin: 0px;" class="memory_contribution_image_{{$index}}">\n      <div ng-click="selectPhoto(shared_image, selected_image_popup)" style="cursor: pointer;">\n        <div class="bg_cover" static-bg-image="{{$root.url(shared_image, {width: \'630x434\', type: \'cover\'})}}" style="width: 100%;padding-bottom: 68.8%;background-color: #000;"></div>\n        <div ng-custom-if="$index == 2 && shared_images.length > 3" style="position: absolute;top: 0px;width: 100%;height: 100%;overflow: hidden;">\n          <div style="display: table;width: 100%;height: 100%;">\n            <div style="color: #fff;font-size: 35px;font-weight: 700;background: rgba(0, 0, 0, .4);text-align: center;display: table-cell;vertical-align: middle;">\n              + {{shared_images.length-3}}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n</div>\n\n\n<div ac-popup="selected_image_popup" ac-next-arrow="showNextImage" ac-prev-arrow="showPreviousImage" max-width="992px" padding="0px">\n  <div class="popup_image_section">\n    <div ng-repeat="shared_image in shared_images" ng-custom-if="shared_image.id == selected_photo.id"\n      style="width: 100%;min-height: 100px;height: 100%;position: relative;text-align: center;\n      background-image: url(https://d26pkxyw9vw39t.cloudfront.net/assets/loader-4830e5040671b4b3999740d1a1ae3551768ca0336949f90fc893cb0fe075c21f.gif);background-repeat: no-repeat;background-position: center;">\n      <div class="vertical_middle"></div>\n      <img ng-src="{{$root.url(selected_photo)}}" style="display: inline-block;vertical-align: middle;max-width: 100%;max-height: 100%;" />\n    </div>\n\n    <div ng-custom-if="selected_photo_index != shared_images.length-1"\n      style="position: absolute;top: 0px;bottom: 0px;right: 16px;">\n      <div class="vertical_middle"></div>\n      <div ng-click="showNextImage()" style="display: inline-block;vertical-align: middle;cursor: pointer;">\n        <span class="nicon-arrow-right" style="font-size: 20px;color: #fff;text-shadow: 2px 2px 2px #000;"></span>\n      </div>\n    </div>\n\n    <div ng-custom-if="selected_photo_index != 0"\n      style="position: absolute;top: 0px;bottom: 0px;left: 16px;">\n      <div class="vertical_middle"></div>\n      <div ng-click="showPreviousImage()" style="display: inline-block;vertical-align: middle;cursor: pointer;">\n        <span class="nicon-arrow-left" style="font-size: 20px;color: #fff;text-shadow: 2px 2px 2px #000;"></span>\n      </div>\n    </div>\n  </div>\n\n  <div class="popup_comment_section">\n    <div style="display: flex;flex-flow: column;height: 100%;">\n      <div style="flex: 0 1 auto;overflow: auto;" class="js_comments_list">\n        <div>\n          <a ng-href="{{post.contributor.profile_url}}" style="display: block;float: left;margin-right: 12px;">\n            <img ng-src="{{$root.url(post.contributor.image, {size: \'100x100\', type: \'crop\'})}}" style="max-width: 32px;max-height: 32px;border-radius: 16px;display: block;" />\n          </a>\n          <div style="float: left;width: calc(100% - 44px);font-size: 15px;" class="ellipsis">\n            <a ng-href="{{post.contributor.profile_url}}">\n              <span class="text_heading">{{post.contributor.name}}</span>\n            </a>\n          </div>\n          <div style="clear: both;"></div>\n        </div>\n\n        <div ng-custom-if="post.content" style="padding-top: 16px;border-bottom: 1px solid #ddd;padding-bottom: 16px;">\n          <div ng-custom-if="moreContent" class="text_body" style="word-wrap: break-word;">\n            <span ng-bind-custom-html="post.content_short2 | aclinky" style="display: inline;"></span>\n            <span class="text_body_link" style="cursor: pointer;display: inline;" ng-click="showMoreContent()">\n              See More\n            </span>\n          </div>\n\n          <div ng-bind-custom-html="post.content | aclinky" class="text_body" ng-custom-if="!moreContent" style="word-wrap: break-word;"></div>\n        </div>\n\n        <div ng-custom-if="post.tagged_users.total > 0" style="padding-top: 8px;">\n          <div ng-custom-include="\'contributions/templates/tagged_users\'"></div>\n        </div>\n\n        <div style="padding-top: 16px;">\n          <div style="margin-right: 16px;cursor: pointer;display: inline-block;vertical-align: middle;padding: 8px 0px;">\n            <span ng-custom-if="!(currentUser.id) || post.likers.data[0].id != currentUser.id" ng-click="like(post)">\n              <span class="nicon-like"  style="font-size: 21px;"><span class="path1"></span><span class="path2"></span></span>\n            </span>\n            <span ng-custom-if="currentUser.id && post.likers.data[0].id == currentUser.id" ng-click="unlike(post)">\n              <span class="nicon-liked" style="font-size: 21px;"><span class="path1"></span><span class="path2"></span></span>\n            </span>\n          </div>\n          <div style="width: calc(100% - 40px);display: inline-block;vertical-align: middle;">\n            <div ng-include="\'contributions/templates/likers_list\'"></div>\n          </div>\n          <div style="clear: both;"></div>\n        </div>\n\n        <div ng-controller="CommentsController">\n          <div ng-custom-if="post.comments.data.length < post.comments.total"\n            style="cursor: pointer;padding-bottom: 8px;" ng-click="viewMoreComments()" class="text_caption ac_link">\n            View {{post.comments.total - post.comments.data.length}} more comments\n          </div>\n\n          <div ng-include="\'contributions/templates/comments_list\'"></div>\n\n          <div class="clear"></div>\n        </div>\n      </div>\n\n\n      <div ng-controller="CommentsController">\n        <div style="padding: 8px 12px 8px 0px;vertical-align: middle;display: inline-block;">\n          <img ng-src="{{$root.url(currentUser.image, {size: \'100x100\', type: \'crop\'})}}" style="max-width: 32px;max-height: 32px;border-radius:16px;display: block;" />\n        </div>\n        <div style="display: inline-block;vertical-align: middle;width: calc(100% - 44px);">\n          <div ac-input-box>\n            <div>\n              <textarea ng-model="commentForm.content" placeholder="Type @name to mention someone" mention-input\n                style="max-height: 100px;height: 40px;min-height: 40px;"\n                ac-enter="newComment()">\n              </textarea>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/shared_link"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div ng-custom-if="shared_link">\n  <div ng-switch on="(shared_link.type || shared_link.external_type)">\n    <div ng-switch-default>\n      <div ng-custom-if="editable">\n        <div ng-include="\'contributions/templates/external_shared_link_edit\'"></div>\n      </div>\n      <div ng-custom-if="!(editable)">\n        <div ng-include="\'contributions/templates/external_shared_link\'"></div>\n      </div>\n    </div>\n\n    <div ng-switch-when="Memories::Memory">\n      <div ng-include="\'contributions/templates/memory_shared_link\'" ng-init="memory = shared_link"></div>\n    </div>\n\n    <div ng-switch-when="JobPosting">\n      <div ng-include="\'contributions/templates/job_posting_shared_link\'" ng-init="job_posting = shared_link"></div>\n    </div>\n\n    <div ng-switch-when="EventCalendar::Event">\n      <div ng-include="\'event_calendar/templates/short_upcoming_event\'" ng-init="event = shared_link"></div>\n    </div>\n\n    <div ng-switch-when="Donations::DonationCampaign">\n      <div ng-include="\'donations/templates/short_campaign\'" ng-init="campaign = shared_link"></div>\n    </div>\n\n    <div ng-switch-when="video">\n      <div>\n        <iframe width="100%" height="315" ng-src="{{shared_link.embed_url}}" frameborder="0" allowfullscreen></iframe>\n      </div>\n    </div>\n\n  </div>\n\n  <div ng-click="remove()" ng-custom-if="removable" style="position: absolute;top: -10px;right: -10px;cursor: pointer;height: 20px;width: 20px;background: #fff;border-radius: 16px;box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.2);border: 1px solid #e7eceb;text-align: center;font-size: 0px;">\n    <div class="vertical_middle"></div>\n    <span class="nicon-cross-alt" style="font-size: 7px;display: inline-block;vertical-align: middle;"></span>\n  </div>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["contributions/templates/tagged_users"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="width: 100%;height: 1px;background: #e7eceb;margin: 8px 0px;" ng-custom-if="!(shared_images.length>0)"></div>\n<div style="padding-top: 4px;padding-bottom: 8px;">\n  <div class="text_caption" style="width: calc(100% - 100px);display: inline-block;vertical-align: middle;">\n    <div style="display: inline-block">\n      <div style="display: inline-block;"> With</div>\n      <div ng-repeat="user in post.tagged_users.data | limitTo: 2" style="display: inline-block">\n        <a href="{{user.profile_url}}">\n          <span ng-custom-if="$index==1" class="text_caption_dark">, </span> <span class="text_caption_dark">{{user.name}}</span>\n        </a>\n      </div>\n      <div style="display: inline-block;" ng-custom-if="post.tagged_users.total>2">\n        and {{post.tagged_users.total - 2}} others\n      </div>\n    </div>\n  </div>\n  <div style="display: inline-block;width: 100px;vertical-align: middle;">\n    <div ng-custom-if="post.tagged_users.total>2" style="background: #eef0f2;height: 24px;width: 24px;border-radius: 12px;margin-left: 8px;float: right;text-align: center;">\n      <div class="vertical_middle"></div>\n      <div class="text_caption_small" style="display: inline-block;vertical-align: middle;"> +{{post.tagged_users.total - 2}}</div>\n    </div>\n    <div ng-repeat="user in post.tagged_users.data | limitTo: 2" style="float: right;">\n      <a ng-href="{{user.profile_url}}" title="{{user.name}}\'s profile" target="_self" style="position: relative;display: inline-block;margin-left: 8px;">\n        <img ng-src="{{$root.url(user.image, {size: \'100x100\', type: \'crop\'})}}" style="height: 24px;width: 24px;display: block;border-radius: 12px;" />\n      </a>\n    </div>\n    <div class="clear"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/create_or_update"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(
'<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;">\n  <div class="text_title">\n    <span ng-show="new_event">Create Event</span>\n    <span ng-show="!new_event">Edit Event</span>\n  </div>\n\n  <div style="margin: 16px 0px;position:relative;">\n    <div ng-show="eventForm.cover_picture">\n      <div style="height: 200px;width: 100%;">\n        <div var-bg-image="$root.url(eventForm.cover_picture)" ng-show="eventForm.cover_picture.id" style="height: 100%;width: 100%;background-size: cover;background-repeat: no-repeat;background-position: center;">\n          <div style="background: black;height: 100%;width: 100%;opacity: 0.5;color: white;">\n          </div>\n        </div>\n      </div>\n      <div style="background: black;opacity: 0.8;">\n        <div ac-asset-upload class="file_upload_box ac_link" jfu-model="eventForm.cover_picture" jfu-id-model="eventForm.cover_picture_id" style="padding: 5px 10px;font-size: 12px;font-weight: 700;color: #fff;"\n          data-opts="{only_image: true, single_file: true}">\n          Upload New Picture\n        </div>\n        <div ng-click="eventForm.cover_picture.remove()" style="padding:5px 10px;font-size: 12px;color:white;font-weight: 700;cursor: pointer;float: left;">\n          Remove\n        </div>\n        <div class="clear"></div>\n        <div class="progressBarInProgress" style="width: {{eventForm.cover_picture.progress}}%;" ng-hide="eventForm.cover_picture.uploaded"></div>\n      </div>\n    </div>\n\n    <div ng-show="!(eventForm.cover_picture)" style="background: #acc4bf;width: 100%;height: 258px;text-align: center;">\n      <div style="height: 100%;width: 0px;vertical-align: middle;display: inline-block;"></div>\n      <div ac-asset-upload class="file_upload_box ac_button" jfu-model="eventForm.cover_picture" jfu-id-model="eventForm.cover_picture_id"\n        style="vertical-align: middle;display: inline-block;float: none;"\n        data-opts="{only_image: true, single_file: true}">\n        Upload Picture\n      </div>\n    </div>\n  </div>\n\n  <div ac-input-box ac-label="Event Title" ac-error="errors.subject">\n    <input type="text" ng-model="eventForm.subject" placeholder="Alumni Meet" />\n  </div>\n\n  <div>\n    <div ac-input-box ac-label="Start Date" ac-error="errors.from_time" style="width: 150px;float: left;padding-right: 16px;">\n      <input type="text" ng-model="eventForm.from_time" placeholder="DD/MM/YYYY" ac-datepicker max-date="eventForm.to_time" />\n    </div>\n    <div ac-input-box ac-label="Start time" ac-helper="hrs" ac-error="errors.start_time_hour" style="width: 75px;float: left;padding-right: 16px;">\n      <input type="text" placeholder="18" ng-model="eventForm.start_time_hour"/>\n    </div>\n    <div ac-input-box ac-label="Start time" ac-helper="mins" ac-error="errors.start_time_minute" style="width: 75px;float: left;padding-right: 16px;">\n      <input type="text" placeholder="30" onkeup="validateTimeInputs(eventForm.start_time_minute, 0, 59)" ng-model="eventForm.start_time_minute"/>\n    </div>\n    <div ac-input-box ac-label="Timezone" ac-error="errors.time_zone" style="width: 100px;float: left;padding-right: 16px;">\n      <select ng-model="eventForm.start_time_zone" ng-options="tz for tz in all_timezones">\n        <option value="">Select Timezone</option>\n      </select>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n  <div>\n    <div ac-input-box ac-label="End Date" ac-error="errors.to_time" ac-helper="Optional" style="width: 150px;">\n      <input type="text" ng-model="eventForm.to_time" placeholder="DD/MM/YYYY" ac-datepicker min-date="eventForm.from_time" />\n    </div>\n\n    <div ac-input-box ac-label="Registration close Date" ac-error="" ac-helper="Optional" style="width: 150px;">\n      <input type="text" ng-model="eventForm.reg_closing_time" placeholder="DD/MM/YYYY" ac-datepicker max-date="eventForm.to_time" />\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n\n  <div ac-input-box ac-label="Location & Timing" ac-error="errors.short_description">\n    <input type="text" ng-model="eventForm.short_description" placeholder="Imperial Hotel, Cannaught Place, Delhi - 7pm to 10pm" />\n  </div>\n</div>\n\n\n<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;">\n  <div ac-section-title ac-title-first="Details" style="padding-bottom: 8px;"></div>\n\n  <div ac-input-box ac-label="Add preview content to be shared on other social media" ac-error="errors.sharable_description">\n    <textarea type="text" ng-model="eventForm.sharable_description" placeholder="Enter Shareable content"></textarea>\n  </div>\n\n  <div ac-input-box ac-label="Add Details" ac-error="errors.description">\n    <div ac-text-editor ac-model="eventForm.description">\n    </div>\n  </div>\n\n  <div ac-shared-file="eventForm.shared_files"></div>\n  <div style="margin-bottom: 8px;">\n    <div ac-asset-upload class="file_upload_box text_link" jfu-model="eventForm.shared_files" jfu-id-model="eventForm.shared_file_ids">\n      <span>Attach File</span>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n\n  <div ac-input-box ac-label="Add special note for user after successful registration">\n    <textarea ng-model="eventForm.special_registration_note" placeholder="Enter Details"></textarea>\n  </div>\n\n  <div ac-shared-file="eventForm.registration_attachment"></div>\n  <div style="margin-bottom: 8px;">\n    <div ac-asset-upload class="file_upload_box text_link" data-opts="{single_file: true}"\n         jfu-model="eventForm.registration_attachment" jfu-id-model="eventForm.registration_attachment_id">\n      <span>Attach File</span>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n</div>\n\n\n<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;" ng-custom-if="!(past_event)">\n  <div ac-section-title ac-title-first="Registration Form" ac-title-last="(Questions to be asked at the time of registration)" style="padding-bottom: 8px;"></div>\n  <div ac-input-questions="eventForm.questions" ac-validate="validateQuestions"></div>\n</div>\n\n<div ng-custom-if="currentInstitute.enable_whatsapp_notifications" class="box-shadow-content" style="margin-top: 24px;padding: 24px;">\n  <div ng-click="show_section(section.label)" class="text_heading" style="cursor: pointer;">\n    <div style="position: relative;width: 100%;">\n      <div class="text_heading">\n        {{section.text}}\n      </div>\n    </div>\n    <div ng-custom-if="selected_section != section.label" style="position: absolute;top: 0px;right: 0px;">\n      <i class="icon-7" style="font-size: 20px;color: #000;font-weight:700;"></i>\n    </div>\n    <div ng-hide="selected_section != section.label" style="position: absolute;top: 0px;right: 0px;">\n      <i class="icon-6" style="font-size: 20px;color: #000;font-weight:700;"></i>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n  <div ng-show="selected_section == section.label">\n    <div class="green_line"></div>\n      <div style="padding-top: 8px;">\n        <div ac-input-box ac-label="Enter text to be sent on whatsapp after successful registration">\n          <textarea type="text" ng-model="eventForm.reg_whatsapp_message" placeholder="Type something.."></textarea>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;" ng-custom-if="!(past_event)">\n  <div ac-section-title ac-title-first="Settings" style="padding-bottom: 8px;"></div>\n\n  <div ng-custom-if="currentInstitute.post_as_official_enabled ">\n    <div ac-input-checkbox ac-label="Post as Official">\n      <input type="checkbox" ng-model="eventForm.post_as_official" />\n    </div>\n  </div>\n\n  <div ac-input-checkbox ac-label=\'Show counts & names of people who have registered for the event\'>\n    <input type="checkbox" ng-model=\'eventForm.show_count_enabled\' />\n  </div>\n\n  <div ac-input-checkbox ac-label=\'Private Event (Only people registered on this network would be able to register for the event)\'>\n    <input type="checkbox" ng-model=\'eventForm.private\' />\n  </div>\n\n  <div ac-input-checkbox ac-label=\'Receive Registration Emails\'>\n    <input type="checkbox" ng-model=\'eventForm.receive_registration_mail\' />\n  </div>\n\n  <div ac-input-checkbox ac-label=\'Disable Events Registration\'>\n    <input type="checkbox" ng-model=\'eventForm.disable_registration\' />\n  </div>\n\n  <div ng-custom-if="currentUser.is_institute_coordinator && currentInstitute.payment_configured">\n    <div ac-input-checkbox ac-label=\'Add Event Registration Fee\'>\n      <input type="checkbox" ng-model=\'eventForm.payment_enabled\' ng-disabled="!(new_event || currentUser.is_system_admin)"/>\n    </div>\n\n    <div ng-custom-if="eventForm.payment_enabled" style="padding-left: 16px;max-width: 300px;">\n      <div ac-input-box ac-label=\'Registration Fee\'>\n        <input type="number" ng-model=\'eventForm.registration_fee\' ng-disabled="!(new_event || currentUser.is_system_admin)"/>\n      </div>\n    </div>\n\n    <div ng-custom-if="currentInstitute.multiple_pay_acc" ac-input-checkbox ac-label=\'Choose different payment bank\'>\n      <input type="checkbox" ng-model=\'eventForm.select_pay\' ng-disabled="!(new_event || currentUser.is_system_admin)"/>\n    </div>\n\n    <div ng-custom-if="eventForm.select_pay || eventForm.payment_account_id" ac-input-box ac-label="Choose bank account" style="width: 200px;display: inline-block;margin-right: 24px;">\n      <select ng-options="acc for acc in currentInstitute.multiple_pay_accs_options" ng-model="eventForm.payment_account_id"\n              placeholder="Choose Bank account" ng-class="{true: \'unselected\'}[!(eventForm.payment_account_id)]">\n        <option value="">Choose bank account</option>\n      </select>\n    </div>\n\n    <div ac-input-checkbox ac-label=\'Allow Custom Event Registration Fee\'>\n      <input type="checkbox" ng-model=\'eventForm.custom_payment_enabled\' ng-disabled="!(new_event || currentUser.is_system_admin)"/>\n    </div>\n  </div>\n</div>\n\n<div style="margin: 32px 0px;">\n  <div ng-show="ec_success_message" class="text_success" style="padding: 8px 0px;">\n    {{ec_success_message}}\n  </div>\n  <div ng-show="ec_error_message" class="text_error" style="padding: 8px 0px;">\n    {{ec_error_message}}\n  </div>\n  <div class="text_error" ng-show="errors">\n    Please fill all the highlighted fields above\n  </div>\n\n  <div class="ac_button" style="float: left;" ng-click="createOrUpdateEvent()"\n    ac-loading="{{creating_event}}" text="Create Event" ng-custom-if="new_event">\n  </div>\n\n  <div class="ac_button" style="float: left;" ng-click="createOrUpdateEvent()"\n    ac-loading="{{creating_event}}" text="Update Event" ng-custom-if="!(new_event)">\n  </div>\n\n  <div style="clear: both;"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/email_preview"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="email-container" style="border:none; background-color:#eee;margin-top: 8px;">\n  <div style="max-width: 620px; margin:auto;text-align:center;padding:12px 0px;">\n    <div ng-custom-if= "currentInstitute.plan_type == \'Premium\'">\n      <img ng-src="{{$root.url(currentInstitute.small_logo, {size: \'70x70\', type: \'cover\'})}}" alt="logo" style="max-width: 56px;max-height: 80px;"/>\n    </div>\n    <div ng-custom-if= "currentInstitute.plan_type != \'Premium\'">\n      <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/alma_icon-1244e47df24734fc786235ca75eacf36f75d7fc584bd1b9e8ff2c69010ba77be.png" alt="logo" style="max-width: 56px;max-height:80px;"/>\n    </div>\n\n    <div style="padding-top: 18px;color: #3a3f42;font-size: 18px;font-weight: 600;">\n      {{currentInstitute.title}} - AlmaConnect\n    </div>\n  </div>\n\n  <div class="email-middle" style="background-color:#eee;">\n    <div style="max-width: 600px;margin:auto;background-color:#fff;word-break: break-all;">\n      <div style="padding: 10px;" class="text_body">\n        <p style="line-height: none;padding-bottom: 8px;">\n          {{event.invitation_details.salutation}}\n        </p>\n        <p style="line-height: 1; white-space: pre-line;padding-bottom: 8px;" class="spaced-text" ng-bind-html="event.invitation_details.content | linky"></p>\n\n        <div style="padding: 8px;border-left: 1px solid #acc4bf;">\n          <div class="border-box" style="position: relative; padding-bottom:8px;width: calc(100% - 30px);">\n            <div>\n              <a ng-href="{{event.url}}">\n                <img ng-src="{{$root.url(event.cover_picture, {size: \'300x200\', type: \'crop\'})}}" style="max-width:300px;max-height: 200px;width: 100%;"/>\n              </a>\n            </div>\n            <div>\n              <a target="_self" class="ac_link regular_24 black" style="text-transform: capitalize;">\n                {{event.subject}}\n              </a>\n            </div>\n          </div>\n\n          <div >\n            <i class="icon-timelines" style="float: left;padding-right: 5px;"></i>\n            <span class="semibold_13 black">{{event.start_date}}</span>\n            <span class="semibold_13 black" ng-custom-if="event.end_date && event.end_date!=event.start_date">- {{event.end_date}}</span>\n            <div style="clear:both;"></div>\n          </div>\n\n          <div>\n            <i class="icon-location event-short-desc-icon" style="float: left;padding-right: 5px;"></i>\n            <div class="semibold_13 black spaced-text" ng-bind-html="event.short_description" style="padding-bottom:8px;word-break: break-word;"></div>\n            <div style="clear:both;"></div>\n          </div>\n\n          <div>\n            <div class="ac_button" style="float: left;">Register</div>\n            <div style="float:left;padding:8px;font-weight:600;color:#00bfa9;cursor: pointer">View Event</div>\n            <div class="clear"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="email-footer" style="border:none; background:#eee; padding-bottom:30px;">\n    <div style="max-width: 600px;margin:auto; font-size: 11px;">\n      You can unsubscribe this by clicking\n      <a target="_blank" href="#" class="link-color" style="color: #00bfa9;">here</a>\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/event"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div>\n\n  <div class="inner_sec_column" ng-custom-if="more_events.length > 0 || more_memories.length > 0 || currentInstitute.payment_configured">\n    <div class="box-shadow-content" style="margin: 24px 0px;padding: 24px 24px 16px;" ng-custom-if="more_events.length > 0">\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="Upcoming" ac-title-last="Events"></div>\n      </div>\n      <a href="/event_calendar" style="float: right;" class="text_link ac_link">\n        See All\n      </a>\n      <div style="clear: both;"></div>\n\n      <div style="padding: 8px 0px 0px;">\n        <div ng-repeat="more_event in more_events" style="padding: 8px 0px;" class="border-box">\n          <a ng-href="{{more_event.url}}" target="_self" style="position: relative;display: block;float: left;width: 80px;">\n            <div static-bg-image="{{$root.url(more_event.cover_picture)}}" style="background-position: center;background-size: cover;width: 100%;padding-bottom: 80%;"></div>\n          </a>\n          <div style="display: inline-block;vertical-align: middle;padding-left: 8px;width: calc(100% - 80px);float: left;">\n            <a ng-href="{{more_event.event_url}}" target="_self">\n              <div class="text_heading ellipsis">\n                {{more_event.subject}}\n              </div>\n            </a>\n            <div class="text_caption ellipsis">\n              {{more_event.start_date_day}} {{more_event.start_date_month}} {{more_event.start_date_year}}\n            </div>\n          </div>\n          <div style="clear: both;"></div>\n        </div>\n      </div>\n    </div>\n\n    <div class="box-shadow-content" style="margin: 24px 0px;padding: 24px 24px 16px;" ng-custom-if="more_memories.length > 0">\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="Past" ac-title-last="Memories"></div>\n      </div>\n      <a href="/memories" style="float: right;" class="text_link ac_link">\n        See All\n      </a>\n      <div style="clear: both;"></div>\n\n      <div style="padding: 8px 0px 0px;">\n        <div ng-repeat="more_memory in more_memories" style="padding: 8px 0px;" class="border-box">\n          <a ng-href="{{more_memory.url}}" target="_self" style="position: relative;display: block;float: left;">\n            <img ng-src="{{$root.url(more_memory.landing_asset, {size: \'300x300\', type: \'crop\'})}}" style="height: 64px;width: 112px;display: block;" />\n          </a>\n          <div style="display: inline-block;vertical-align: middle;padding-left: 8px;width: calc(100% - 112px);float: left;">\n            <a ng-href="{{more_memory.url}}" target="_self">\n              <div class="text_heading ellipsis">\n                {{more_memory.title}}\n              </div>\n            </a>\n            <div class="text_link ac_link ellipsis">\n              {{more_memory.images_count}} Pictures\n            </div>\n          </div>\n          <div style="clear: both;"></div>\n        </div>\n      </div>\n    </div>\n\n    <div class="box-shadow-content" style="margin: 24px 0px;padding: 16px;" ng-custom-if="currentInstitute.payment_configured">\n      <div ac-section-title ac-title-first="Payment" ac-title-last="Integrated For:"></div>\n      <div style="padding-top: 16px;text-align: center;">\n        <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/payments-c4f264028cfa5fe15b7f226f53e407bf36baaf3973498948121114d3928e0484.png">\n      </div>\n    </div>\n\n  </div>\n\n  <div class="inner_main_column">\n    <div ng-custom-if="show_promotion"style="padding-bottom: 20px;color: #000;">\n      <div ng-custom-if="currentUser.is_institute_coordinator">\n        <div ng-include="\'event_calendar/templates/system_invitation\'"></div>\n      </div>\n<!--      <div ng-custom-if="!(currentUser.is_institute_coordinator || currentUser.id == event.contributor.id)">-->\n<!--        <div ng-include="\'event_calendar/templates/user_invitation\'"></div>-->\n<!--      </div>-->\n    </div>\n\n    <div ng-custom-if="show_event_details">\n      <div ng-custom-include="\'event_calendar/templates/event_info\'"></div>\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/event_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;">\n  <div ng-click="cover_picture_popup.showPopup()" class="border-box" static-bg-image="{{$root.url(event.cover_picture)}}"\n    style="cursor: pointer;width: 100%;padding-bottom:44%;background-size: cover;background-repeat: no-repeat;background-position: center;">\n  </div>\n  <div ac-popup="cover_picture_popup" min-width="80%" height="90%">\n    <div static-bg-image="{{$root.url(event.cover_picture)}}" style="background-repeat: no-repeat;height: 100%;width: 100%;background-position: center;background-size: contain;"></div>\n  </div>\n\n  <div style="padding: 16px 24px; position: relative;">\n    <div style="border: 1px solid #b6b9bb;float: left;padding: 4px;text-align: center;width: 40px;">\n      <div style="color: #ef5d60;text-transform: uppercase;font-size: 12px;font-weight: 600;">\n        {{event.start_date_month}}\n      </div>\n      <div class="text_title">\n        {{event.start_date_day}}\n      </div>\n    </div>\n\n    <div style="float: left;padding-left: 12px;width: calc(100% - 40px);padding-right: 32px;">\n      <div class="text_title">\n        {{event.subject}}\n      </div>\n      <div class="spaced-text text_body_light" ng-bind-html="event.short_description + \' | \' + event.event_time_with_zone"></div>\n      <div class="ellipsis" style="max-width: 100%;">\n        <span class="text_caption">Created by&nbsp;</span>\n        <span class="text_caption_dark">\n          <a ng-href="{{event.contributor.url}}">{{event.contributor.name}}</a>\n        </span>\n      </div>\n      <div style="padding-top: 16px;" ng-custom-if="event.reg_allowed">\n        <a ng-custom-if="!event.current_user_registered" ng-href="{{event.registeration_url}}" style="display: block;float: left;" class="ac_button">\n          Register\n        </a>\n\n        <div class="ac_sec_button" ng-custom-if="event.current_user_registered" style="display: block;float: left;">\n          Registered\n        </div>\n        <a ng-href="{{event.add_to_calendar_url}}" target="_blank" class="ac_button" ng-custom-if="event.current_user_registered" style="display: block;float: left;margin-left: 16px;">\n          Add to Calendar\n        </a>\n        <div style="clear: both;"></div>\n      </div>\n    </div>\n\n    <div style="position: absolute;top: 16px;right: 24px;" ng-custom-if="currentUser.is_institute_coordinator || currentUser.id == event.contributor.id">\n      <div ng-click="options_dropdown.showDropdown()">\n        <span class="nicon-arrow-cap-down" style="font-size: 13px;cursor: pointer;"></span>\n      </div>\n      <div ac-dropdown="options_dropdown" style="position: absolute;right: 4px;top: 20px;width: 180px;">\n        <a ng-href="/event_calendar/{{event.id}}/edit" ng-custom-if="event.can_edit_event" class="dd_item">\n          Edit Event\n        </a>\n        <div class="dd_item text_body_light">\n          <div custom-email-util resource-id="event.id" url="/event_calendar/send_bulk_email"></div>\n        </div>\n        <div ng-click="downloadRegistrations(options_dropdown, excelPopup)" ng-custom-if="currentUser.is_institute_coordinator || currentUser.id == event.contributor.id" class="dd_item">\n          Download Registrations\n        </div>\n        <iframe id="js_download_registration" style="display:none;"></iframe>\n\n        <div ng-click="deleteContribution()" ng-custom-if="event.can_delete_event" class="dd_item">\n          Delete Event\n        </div>\n        <div class="dd_item" ng-custom-if="canMarkPublic && !isMarkedPublic()" ng-click="toggleMarkPublic(true)">\n          Mark Public\n        </div>\n        <div class="dd_item" ng-custom-if="canMarkPublic && isMarkedPublic()" ng-click="toggleMarkPublic(false)">\n          Mark Private\n        </div>\n      </div>\n      <div ng-custom-include="\'common/templates/excel_download_popup\'"></div>\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n</div>\n\n<div ng-custom-if="!event.past_event && currentUser.id && event.rsvp_users.total == 0">\n  <div class="box-shadow-content" style="margin: 24px 0px;padding: 24px 24px 16px;text-align: center;">\n    <div class="text_body_light" style="padding-bottom: 16px;">\n      <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/announce-46ccd13b8b3307634f26e28cb655c48e24a4a58008caf3eb3044e7b98b2b52af.png" style="padding-right: 8px;padding-top: 8px;"></img>\n      No Registrations Yet. Invite People to the Event.\n    </div>\n    <div style="width: 50%;margin: auto;min-width: 200px;">\n      <div style="background-image: url(https://d26pkxyw9vw39t.cloudfront.net/assets/dots-47c2a5eb6bd82b4e7fe29d670cc7b5dfe32539b7f86de1b7dc91891e660755b1.png);width: 100%;height: 80px;background-size: contain;background-repeat: no-repeat;padding-top:16px;">\n        <div class="ac_button" style="width: 40%;margin: auto;" ng-click="showPromoteDetails()">Invite</div>\n      </div>\n    </div>\n    <div class="clear"></div>\n  </div>\n</div>\n\n<div ng-custom-if="event.can_see_rsvp_infos && event.rsvp_users.total > 0 && event.show_count_enabled">\n  <div class="box-shadow-content" style="margin: 24px 0px;padding: 24px 24px 16px;">\n    <div>\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="{{event.rsvp_users.total}}" ac-title-last="Registered"></div>\n      </div>\n      <div style="float: right;" class="ac_button_small" ng-click="showPromoteDetails()" ng-custom-if="currentUser.id">\n        Invite\n      </div>\n      <div style="clear: both;"></div>\n    </div>\n    <div style="padding: 8px 0px;">\n      <div ng-repeat="rsvp_user in event.rsvp_users.data | limitTo: rsvp_limit" style="float: left;width: 50%;padding: 8px 0px;" class="border-box">\n        <a ng-href="{{rsvp_user.profile_url}}" title="{{rsvp_user.name}}\'s profile" target="_self" style="position: relative;display: inline-block;vertical-align: middle;">\n          <img ng-src="{{$root.url(rsvp_user.image, {size: \'100x100\', type: \'crop\'})}}" style="height: 32px;width: 32px;display: block;border-radius: 16px;" />\n        </a>\n        <div style="display: inline-block;vertical-align: middle;padding-left: 12px;width: calc(100% - 36px);padding-right: 8px;" class="ellipsis border-box">\n          <span class="text_heading">\n            <a ng-href="{{rsvp_user.profile_url}}">{{rsvp_user.name}}</a>\n          </span>\n          <span class="text_body_light" ng-show="rsvp_user.batch_small">\'{{rsvp_user.batch_small}}</span>\n        </div>\n      </div>\n      <div style="clear: both;"></div>\n    </div>\n    <div class="ac_link text_link" ng-custom-if="event.rsvp_users.total > rsvp_limit" ng-click="showMoreRsvpUsers()" style="text-align: center;">\n      <div style="padding: 8px 0px;">\n        Show More\n      </div>\n    </div>\n  </div>\n\n</div>\n\n<div class="box-shadow-content" style="margin: 24px 0px;padding-top: 24px;padding-bottom: 24px;">\n  <div ac-section-title ac-title-first="Details" style="padding: 0px 24px;"></div>\n  <div style="padding: 16px 24px 8px;">\n    <div class="quill-content text_body">\n      <div ng-bind-html="trustAsHtml(event.description)"></div>\n    </div>\n  </div>\n\n  <div ng-custom-if="event.shared_files.length > 0 || event.shared_images.length > 0" style="padding: 8px 0px;">\n    <div shared-files-list="event.shared_files" style="padding: 0px 16px;"></div>\n    <div shared-images-list="event.shared_images"></div>\n  </div>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/past_events"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;" ng-custom-if="past_events.data.length > 0">\n  <div>\n    <div ac-section-title ac-title-first="{{past_events.total}}" ac-title-last="Past Event{{past_events.total > 1 ? \'s\' : \'\'}}" style="padding-bottom: 8px;"></div>\n\n    <div style="margin: 0px -8px;" class="flex_box">\n      <div ng-repeat="event in past_events.data | limitTo: past_events.limit" style="padding: 8px;min-width: 270px;" class="border-box flex3">\n        <div ng-include="\'event_calendar/templates/short_past_event\'"></div>\n      </div>\n      <div class="flex3" style="min-width: 270px;"></div>\n      <div class="flex3" style="min-width: 270px;"></div>\n    </div>\n  </div>\n\n  <div style="text-align: center;padding-top: 16px;" class="text_link" ng-click="loadPastEvents()"\n    ng-custom-if="past_events.total > past_events.data.length && !(loadingPastEvents)">\n    Show More\n  </div>\n\n  <div ng-custom-if="loadingPastEvents" style="text-align: center;padding: 8px 0px;">\n    <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/loader-4830e5040671b4b3999740d1a1ae3551768ca0336949f90fc893cb0fe075c21f.gif" style="max-width: 16px;" />\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/question_answer_form"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div ac-input-answers ac-questions="event.questions" ac-answers="event.answers" ac-validate="validateAnswers"\n  ac-payment-enabled="{{event.payment_enabled}}" ac--custom-payment-enabled="{{event.custom_payment_enabled}}" style="padding-bottom: 24px;">\n</div>\n\n<div ng-custom-if="event.payment_enabled && amount_payable > 0">\n  <div ac-input-checkbox ac-label="You agree to pay a registration amount of INR {{amount_payable}} {{txn_charges_suffix}}">\n    <input type="checkbox" ng-model="event.agree_for_pay" />\n  </div>\n\n  <div text="Pay Now" class="ac_button" ac-loading="{{saving_response}}" ng-class="{true: \'disabled\'}[!(event.agree_for_pay) || loading]"\n    style="float: left;"  ng-click="payViaRazorpay()" ng-disabled="!(event.agree_for_pay) || loading"></div>\n  <div style="clear: both;"></div>\n</div>\n\n<div class="text_success" ng-show="success_message" style="padding: 8px 0px;">\n  {{success_message}}\n</div>\n\n<div class="text_error" ng-show="error_message" style="padding-top: 8px;">\n  {{error_message}}\n</div>\n\n<div ng-custom-if="!(event.payment_enabled && amount_payable > 0)">\n  <div class="ac_button" ng-click="recordRsvp()" style="float: left;" ac-loading="{{saving_response}}" text="Register">\n  </div>\n  <div class="clear"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/short_past_event"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="border:1px solid #e7eceb;">\n  <a ng-href="{{event.event_url}}" static-bg-image="{{$root.url(event.cover_picture)}}"\n    style="cursor: pointer;height: 200px;background-size: cover;background-repeat: no-repeat;background-position: center;display: block;">\n  </a>\n  <div style="padding: 16px;">\n    <div style="float: left;position: relative;top: 3px;">\n      <i class="nicon-picture" style="font-size: 16px;"></i>\n    </div>\n    <div style="float: left;padding-left: 8px;width: calc(100% - 14px);">\n      <a class="text_heading ac_link ellipsis" ng-href="{{event.event_url}}" style="display: block;">\n        {{event.subject}}\n      </a>\n      <div class="ellipsis text_body_light">\n        {{event.short_description}}\n      </div>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/short_upcoming_event"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="border:1px solid #e7eceb;border-radius: 3px;">\n  <a ng-href="{{event.event_url}}">\n    <div class="border-box" static-bg-image="{{$root.url(event.cover_picture)}}"\n      style="cursor: pointer;height: 200px;background-size: cover;background-repeat: no-repeat;background-position: center;">\n    </div>\n  </a>\n  <div style="padding: 16px;padding-top: 0px;">\n    <div style="float: left;text-align: center;padding-right: 12px;margin-top: 16px;">\n      <div style="color: #ef5d60;text-transform: uppercase;font-size: 12px;font-weight: 600;">\n        {{event.start_date_month}}\n      </div>\n      <div class="text_title">\n        {{event.start_date_day}}\n      </div>\n    </div>\n\n    <div style="float: left;min-width: 200px;width: calc(100% - 114px);margin-top: 16px;">\n      <div style="width: 100%;" class="ellipsis text_heading">\n        <a class="ac_link" ng-href="{{event.event_url}}" style="width: 100%;">{{event.subject}}</a>\n      </div>\n      <div class="spaced-text text_body_light ellipsis" style="width: 100%;">\n        {{event.short_description}}\n      </div>\n      <div class="text_caption ellipsis" style="width: 100%;">\n        <span ng-show="event.rsvp_count>0">{{event.rsvp_count}} Going </span>\n        <span ng-show="event.rsvp_count==0">\n          <span class="text_caption">Created by&nbsp;</span>\n          <a ng-href="{{event.contributor.url}}" class="text_caption_dark">{{event.contributor.name}}</a>\n        </span>\n      </div>\n    </div>\n\n    <a ng-custom-if="event.reg_allowed && !event.current_user_registered" ng-href="{{event.registeration_url}}" style="display: block;float: left;margin-top: 16px;" class="ac_button_small">\n      Register\n    </a>\n\n    <div ng-custom-if="event.reg_allowed && event.current_user_registered" style="display: block;float: left;margin-top: 16px;" class="ac_sec_button_small">\n      Registered\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),
this.JST["event_calendar/templates/system_invitation"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div ng-click="hidePromoteDetails()" style="cursor: pointer;">\n    <span class="nicon-arrow-left" style="font-size: 16px;"></span>\n    <span class="text_title" style="padding-left: 32px;">Invite People</span>\n  </div>\n\n  <div ac-section-title ac-title-first="Share:" style="padding-top: 16px;"></div>\n  <div style="padding-top:16px;">\n    <span class="text_caption_dark">Link:&nbsp;</span>\n    <span class="text_caption" style="word-break:break-all; text-decoration:none;cursor:text;color: #666666;">\n      {{post.event.event_url}}\n    </span>\n  </div>\n\n  <div style="padding-top: 10px;">\n    <div ng-click="shareOnFacebook()" style="float: left;margin-right: 10px;">\n      <div ac-fb-button text="Share On Facebook"></div>\n    </div>\n\n    <div ng-click="shareOnLinkedin()" style="float: left;">\n      <div ac-ln-button text="Share On Linkedin"></div>\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n</div>\n\n<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div ac-section-title ac-title-first="Invite" ac-title-last="by Email:"></div>\n\n  <div ac-input-box ac-error="errors.shared_with">\n    <div ng-click="filterPopup.showPopup()" class="text_body ac_link" style="cursor:pointer;">\n      To: Select Members to Invite\n    </div>\n  </div>\n\n  <div ac-popup="filterPopup">\n\n    <div class="text_title" style="padding-bottom: 8px;">\n      Select Members to Invite\n    </div>\n\n    <div shared-with get-applied-tags="getAppliedTags">\n    </div>\n\n    <div ng-click="setAppliedTags(filterPopup, getAppliedTags())" class="ac_button" style="display:inline-block;">Done</div>\n  </div>\n\n  <div ac-input-box ac-label="Subject" ac-error="errors.subject">\n    <input type="text" ng-model="event.invitation_details.subject" />\n  </div>\n\n  <div ac-input-box ac-label="Content" ac-error="errors.content">\n    <textarea ng-model="event.invitation_details.content"></textarea>\n  </div>\n\n  <div ng-show="error_message" class="text_error" style="padding: 8px 0px;">\n    {{error_message}}\n  </div>\n\n  <div ng-show="success_message" class="text_success" style="padding: 8px 0px;">\n    {{success_message}}\n  </div>\n\n  <div style="padding-top: 8px;">\n    <div ng-click="sendAdminInvitation()" class="ac_button" style="float: left;" ac-loading="{{sending_invitation}}" text="Send">\n      Send\n    </div>\n    <div class="text_link" style="float: left;padding: 8px;" ng-click="toggleEmailPreview()">\n      <span ng-show="!email_preview">Preview</span>\n      <span ng-show="email_preview">Hide Preview</span>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n\n</div>\n\n<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;" ng-show="email_preview">\n  <div ng-include="\'event_calendar/templates/email_preview\'"></div>\n</div>\n\n<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;" ng-custom-if="event.promotions.length > 0">\n  <div ng-repeat="promotion in event.promotions" class="text_body" style="padding-bottom: 8px;">\n    <a ng-href="{{promotion.user.profile_path}}">{{promotion.user.name}}</a>\n    sent the invitation emails to\n    {{promotion.shared_with}} on {{promotion.created_at}}\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/upcoming_events"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div class="text_title" style="padding-bottom: 16px;">Events</div>\n\n  <div ng-custom-if="upcoming_events.data.length > 0">\n    <div style="padding-bottom: 8px;">\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="{{upcoming_events.total}}" ac-title-last="Upcoming Event{{upcoming_events.total > 1 ? \'s\' : \'\'}}"></div>\n      </div>\n      <a href="/event_calendar/new" class="ac_button" style="float: right;" ng-custom-if="currentInstitute.create_events">\n        + Create\n      </a>\n      <div style="clear: both;"></div>\n    </div>\n\n    <div style="margin: 0px -8px 8px;min-width: 0px;" class="flex_box">\n      <div ng-repeat="event in upcoming_events.data" style="padding: 8px;min-width: 288px;" class="flex2">\n        <div ng-include="\'event_calendar/templates/short_upcoming_event\'"></div>\n      </div>\n      <div class="flex2" style="min-width: 288px;"></div>\n    </div>\n  </div>\n\n  <div style="text-align: center;margin-top: 20px;" ng-show="loadingUpcomingEvents">\n    <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/loader-4830e5040671b4b3999740d1a1ae3551768ca0336949f90fc893cb0fe075c21f.gif" style="max-width: 24px;max-height: 24px;" />\n  </div>\n\n  <div ng-custom-if="upcoming_events.total == 0 " style="text-align: center;">\n    <div>\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="No" ac-title-last="Upcoming Event"></div>\n      </div>\n      <a href="/event_calendar/new" class="ac_button" style="float: right;" ng-custom-if="currentInstitute.create_events">\n        + Create\n      </a>\n      <div style="clear: both;"></div>\n    </div>\n\n    <div style="padding: 40px 24px;">\n      <div style="max-width: 600px;margin: auto;">\n        <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/decor-drum-5afc091bdac8abd56da9fe36aef409fcc687ef81333ababb3524e92ea76fb99f.png" style="max-width: 100%;" />\n      </div>\n      <div class="text_body_light" style="padding-top: 40px;">\n        No Upcoming Events\n      </div>\n      <div class="text_body_light" style="padding-top: 24px;" ng-custom-if="currentInstitute.create_events">\n        You can create one\n        <a href="/event_calendar/new" class="ac_link" style="color: #00bfa9;">from here</a>\n        right away\n      </div>\n    </div>\n\n  </div>\n\n  <div style="text-align: center;" class="text_link ac_link" ng-click="loadUpcomingEvents()"\n    ng-custom-if="upcoming_events.total > upcoming_events.data.length && !(loadingUpcomingEvents)">\n    <span style="padding-top: 8px;">Show More</span>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_calendar/templates/user_invitation"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div ng-click="hidePromoteDetails()" style="cursor: pointer;">\n    <span class="nicon-arrow-left" style="font-size: 16px;"></span>\n    <span class="text_title" style="padding-left: 32px;">Invite People</span>\n  </div>\n\n  <div ac-section-title ac-title-first="Share:" style="padding-top: 16px;"></div>\n\n  <div style="padding-top:16px;">\n    <span class="text_caption_dark">Link:&nbsp;</span>\n    <span class="text_caption" style="word-break:break-all; text-decoration:none;cursor:text;color: #666666;">\n      {{post.event.event_url}}\n    </span>\n  </div>\n\n  <div style="padding-top: 10px;">\n    <div ng-click="shareOnFacebook()" style="float: left;margin-right: 10px;">\n      <div ac-fb-button text="Share On Facebook"></div>\n    </div>\n\n    <div ng-click="shareOnLinkedin()" style="float: left;">\n      <div ac-ln-button text="Share On Linkedin"></div>\n    </div>\n\n    <div style="clear: both;"></div>\n  </div>\n</div>\n\n<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div ac-section-title ac-title-first="Invite" ac-title-last="by Email:"></div>\n\n  <div ac-input-box ac-label="Emails" ac-error="errors.emails" style="padding-top: 8px;">\n    <input type="text" ng-model="event.invitation_details.emails" placeholder="address1@gmail.com, address2@gmail.com" />\n  </div>\n\n  <div ac-input-box ac-error="errors.subject" ac-label="Subject">\n    <input type="text" ng-model="event.invitation_details.subject" placeholder="Subject" />\n  </div>\n\n  <div ac-input-box ac-error="errors.content" ac-label="Content">\n    <textarea ng-model="event.invitation_details.content" placeholder="content" flexible-area></textarea>\n  </div>\n\n  <div ng-show="error_message" class="text_error" style="padding: 8px 0px;">\n    {{error_message}}\n  </div>\n\n  <div ng-show="success_message" class="text_success" style="padding: 8px 0px;">\n    {{success_message}}\n  </div>\n\n  <div style="padding-top: 8px;">\n    <div ng-click="sendUserInvitation()" class="ac_button" style="float: left;" ac-loading="{{sending_invitation}}" text="Send">\n      Send\n    </div>\n    <div class="text_link" style="float: left;padding: 8px;" ng-click="toggleEmailPreview()">\n      <span ng-show="!email_preview">Preview</span>\n      <span ng-show="email_preview">Hide Preview</span>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n\n</div>\n\n<div class="box-shadow-content" style="margin: 16px 0px;padding: 24px;" ng-show="email_preview">\n  <div ng-include="\'event_calendar/templates/email_preview\'"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["event_share/templates/event_share"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div ng-controller="EventShareController">\n  <div class="text_body" style="padding-bottom: 16px;">\n    <div style="padding-bottom:8px;" ng-custom-if="success_message">{{success_message}}</div>\n    <div style="padding-bottom: 16px;" ng-custom-if="event.special_registration_note">\n      <strong>Special note:</strong> {{event.special_registration_note}}\n    </div>\n    <div>Let your friends know that you are participating in the event</div>\n  </div>\n\n  <div style="max-width: 220px;">\n    <div ng-click="shareOnFacebook()">\n      <div ac-fb-button text="Share on Facebook"></div>\n      <div style="clear: both;"></div>\n    </div>\n\n    <div ng-click="shareOnLinkedin()" style="margin-top: 16px;">\n      <div ac-ln-button text="Share On Linkedin"></div>\n      <div style="clear: both;"></div>\n    </div>\n\n    <div ng-click="shareOnTwitter()" style="margin-top: 16px;">\n      <div ac-tw-button text="Share on Twitter"></div>\n      <div style="clear: both;"></div>\n    </div>\n\n    <a ng-href="mailto:?Subject={{event.subject}}&body={{event.email_body}}" style="margin-top: 16px;display: block;" class="ac_button">\n      Email Your Friends\n    </a>\n\n    <a ng-href="{{add_to_calendar_url}}" style="margin-top: 16px;display: block;" class="ac_button" target="_blank">\n      Add to Calendar\n    </a>\n\n  </div>\n\n\n  <div style="padding-top: 16px;">\n    <span style="font-size: 15px;font-weight: 600;color: #000;">Share link with others:</span><br />\n    <a ng-href="{{event.event_url}}" class="text_link" style="word-wrap:break-word;">\n      {{event.event_url}}\n    </a>\n  </div>\n</div>\n');return __p.join("")}}.call(this),angular.module("EventShare",["ngSanitize","ac"]),angular.module("EventShare").config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self",/https?:\/\/[^\.\/]*\.cloudfront\.net\/assets\/.*\.html/])}]),angular.module("EventShare").controller("EventShareController",["$scope","$http","$timeout","$filter","$sce",function(n,e){setAngularCSRFToken(e),n.event.email_body=escape(n.event.subject+"\r\n"+n.event.event_url+"\r\n\r\n"+n.event.description),n.shareOnFacebook=function(){n.initFbJsSdk();var e=window.location.protocol+"//s3.amazonaws.com/almaconnect/uploads/AC_logo_icon_06.png";n.event.cover_picture.id&&(e=n.url(n.event.cover_picture));var t={method:"feed",picture:e,link:n.event.event_url,name:n.event.subject,caption:n.event.caption,description:n.event.description,display:"popup",version:"v3.2"};FB.ui(t,function(e){e?recordAnalyticsEvent("EventCalendar","EventCalendar ShareAfterRegistration Facebook Browse Success","PostId: "+n.event.id,1):recordAnalyticsEvent("EventCalendar","EventCalendar ShareAfterRegistration Facebook Browse Failure","PostId: "+n.event.id,0)})},n.shareOnLinkedin=function(){var e="https://www.linkedin.com/shareArticle?mini=true&url="+n.event.event_url+"&title="+n.event.subject+"&summary="+(n.event.content||n.event.description);window.open(e,"LinkedIn","width=660,height=400,scrollbars=no;resizable=no"),recordAnalyticsEvent("EventCalendar","EventCalendar ShareAfterRegistration LinkedIn Browse Open","PostId: "+n.event.id,1)},n.shareOnTwitter=function(){var e="https://twitter.com/intent/tweet?mini=true&url="+n.event.event_url+"&text="+n.event.subject+"&via=AlmaConnect";window.open(e,"Twitter","width=660,height=400,scrollbars=no;resizable=no"),recordAnalyticsEvent("EventCalendar","EventCalendar ShareAfterRegistration Twitter Browse Open","PostId: "+n.event.id,1)}}]),angular.module("SingleEventCalendar",["ngSanitize","ac","EventShare","CreatePosts"]),angular.module("SingleEventCalendar").config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self",/https?:\/\/[^\.\/]*\.cloudfront\.net\/assets\/.*\.html/])}]),angular.module("SingleEventCalendar").controller("DetailedEventController",["$scope","$http","$timeout","$filter","$sce",function(i,o,t){setAngularCSRFToken(o);var e=function(){o({method:"GET",url:"/event_calendar/more_events",params:{event_id:i.event.id}}).success(function(e){i.more_events=e.data})},n=function(){o({method:"GET",url:"/memories/more_memories"}).success(function(e){i.more_memories=e.data})},a=function(){if(i.event.invitation_details)return!0;o({method:"GET",url:"/event_calendar/invitations_list",params:{event_id:i.event.id}}).success(function(e){i.event.invitation_details=e.invitation_details,i.event.promotions=e.promotions})},s=!1,r=function(){if(!s)return!1;if(i.errors={},i.event.invitation_details||(i.event.invitation_details={}),i.currentUser.is_institute_coordinator||i.currentUser.id==i.event.contributor.id){var e={};i.state.shared_with&&i.state.shared_with.applied_tags&&(e=i.state.shared_with.applied_tags),0==Object.keys(e).length&&(i.errors.shared_with="Please select some criteria for members whom you want to invite")}else i.event.invitation_details.emails||(i.errors.emails="Emails can not be blank");i.event.invitation_details.subject||(i.errors.subject="Subject can not be blank"),i.event.invitation_details.salutation||(i.errors.salutation="Salutation can not be blank"),i.event.invitation_details.content||(i.errors.content="Content can not be blank");var t=Object.keys(i.errors);return!(t&&0<t.length)&&!(i.errors=null)};i.$watch("event.invitation_details",r,!0),i.$watch("state.shared_with",r,!0);var l=function(){i.shared_images=[],i.shared_files=[],i.event.shared_files&&angular.forEach(i.event.shared_files,function(e){e.image?i.shared_images.push(e):i.shared_files.push(e)})};i.toggleMarkPublic=function(e){var t=null;e&&(t="public"),params={event:{id:i.event.id,tags:t}},o({method:"POST",url:"/event_calendar/create_or_update",data:params}).success(function(){i.event.tags=t})},i.isMarkedPublic=function(){return!!i.event.tags};var c=["iima.almaconnect.com"];i.canMarkPublic=i.currentUser.is_institute_coordinator&&-1!=c.indexOf(i.currentInstitute.host),i.deleteContribution=function(){confirm("Are you sure you want to delete the contribution?")&&o({method:"DELETE",url:"/contributions/delete_post",params:{post_id:i.event.id}}).success(function(){location.reload()})},i.showMoreRsvpUsers=function(){if(i.rsvp_limit+=6,i.event.rsvp_users&&i.event.rsvp_users.data.length>=i.rsvp_limit)return!0;i.event.rsvp_users||(i.event.rsvp_users={data:[]}),i.event.rsvp_users.page||(i.event.rsvp_users.page=0),i.event.rsvp_users.page+=1,o({method:"GET",url:"/event_calendar/rsvp_users",params:{event_id:i.event.id,page:i.event.rsvp_users.page}}).success(function(e){angular.forEach(e.data,function(e){i.event.rsvp_users.data.push(e)}),i.event.rsvp_users.total=e.total,i.event.rsvp_users.total_pages=e.total_pages})},i.toggleEmailPreview=function(){i.email_preview=!i.email_preview},i.showPromoteDetails=function(){a(),i.show_promotion=!0,i.show_event_details=!1},i.hidePromoteDetails=function(){i.show_promotion=!1,i.show_event_details=!0},i.sendUserInvitation=function(){if(i.sending_invitation||i.success_message)return!0;if(i.success_message=null,i.error_message=null,s=!0,!r())return!1;var e={invitation_details:i.event.invitation_details,event_id:i.event.id};i.sending_invitation=!0,o({method:"POST",url:"/event_calendar/send_user_invitation",data:e}).success(function(){s=!1,i.event.invitation_details.emails=null,i.sending_invitation=!1,i.success_message="Your information has been saved and invitations to the respective users will be sent shortly.",i.event.invitation_details.emails=null,t(function(){i.success_message=null},5e3)}).error(function(e){i.sending_invitation=!1,i.error_message=e.server_message,t(function(){i.error_message=null},5e3)})},i.setAppliedTags=function(e,t){i.state.shared_with={applied_tags:t},e.closePopup()},i.sendAdminInvitation=function(){if(i.sending_invitation||i.success_message)return!0;if(i.success_message=null,i.error_message=null,s=!0,!r())return!1;var e={shared_with:i.state.shared_with,invitation_details:i.event.invitation_details,event_id:i.event.id};i.sending_invitation=!0,o({method:"POST",url:"/event_calendar/send_admin_invitation",data:e}).success(function(){s=!1,i.state.shared_with={text:null,applied_tags:{}},i.sending_invitation=!1,i.success_message="Your information has been saved and invitations to the respective users will be sent shortly.",t(function(){i.success_message=null},5e3)}).error(function(e){i.sending_invitation=!1,i.error_message=e.server_message,t(function(){i.error_message=null},5e3)})},i.downloadRegistrations=function(t,n){o({url:"/event_calendar/download",method:"GET",params:{event_id:i.event.id}}).success(function(e){e.url?document.getElementById("js_download_registration").src=e.url:(t.closeDropdown(),n.showPopup())})},i.event=$(".js_single_event").data("content"),e(),n(),l(),i.rsvp_limit=0,i.showMoreRsvpUsers(),i.moreContent=!1,i.event.description_short&&(i.moreContent=!0),i.show_event_details=!0,i.state={shared_with:null},t(function(){var e=getSearchString();"true"==convertSearchStringtoObject(e).share_dialogue&&(i.post_create_content=i.event.url,i.create_post_popup.showPopup())})}]),angular.module("SingleEventCalendar").controller("EcRegistrationController",["$scope","$http","$timeout","$filter","$sce",function(r,n){setAngularCSRFToken(n),r.amount_payable=r.event.registration_fee,r.txn_charges_suffix="","rp_customer"===r.currentInstitute.razorpay_account_type&&(r.txn_charges_suffix=" & transaction charges");var e=function(){r.event.answers&&(r.amount_payable=r.event.registration_fee,angular.forEach(r.event.questions,function(e){var t=r.event.answers[e.question_identifier];e.options&&0<e.options.length&&angular.forEach(e.options,function(e){e&&e.text&&e.amount&&0<e.amount&&-1!=t.indexOf(e.text)&&(r.amount_payable=r.amount_payable+e.amount)})}),r.event.custom_payment_enabled&&0<getValue(r.event.answers.amount,0)&&(r.amount_payable=getValue(r.event.answers.amount,0)),console.log(getValue(r.event.answers.amount,0)))};(r.event.payment_enabled&&r.event.questions&&0<r.event.questions.length||r.event.custom_payment_enabled)&&r.$watch("event.answers",e,!0);var i=function(){return{event_id:r.event.id,custom_amount:getValue(r.event.answers.amount,0),amount:r.amount_payable,currency:r.event.currency,username:getValue(r.event.answers,["user_name",0]),email:getValue(r.event.answers,["email",0]),mobile:getValue(r.event.answers,["mobile_number",0]),billing_address:getValue(r.event.answers,["current_city",0,"name"]),answers:r.event.answers,public_entity:{name:getValue(r.event.answers,["user_name",0]),email:getValue(r.event.answers,["email",0]),mobile:getValue(r.event.answers,["mobile_number",0]),current_city_id:getValue(r.event.answers,["current_city",0,"id"]),currently_at_id:getValue(r.event.answers,["current_company",0,"id"])}}};r.recordRsvp=function(){if(r.rsvp_submitted)return!1;if(r.validateAnswers&&!r.validateAnswers(!0))return!1;r.rsvp_submitted=!0;var e=i();r.saving_response=!0,n({method:"POST",url:"/event_calendar/record_response",data:e}).success(function(e){if(recordAnalyticsEvent("EventCalendar","EventCalendar RSVPSUBMIT EventCalendar Activity Success","EventId: "+r.event.id,1),r.success_message="Great! You have successfully registered for the event.",r.saving_response=!1,r.add_to_calendar_url=e.add_to_calendar_url,r.event.external_form_url){var t=document.createElement("a");t.href=r.event.external_form_url,t.target="_blank",document.body.appendChild(t),t.click()}}).error(function(e){recordAnalyticsEvent("EventCalendar","EventCalendar RSVPSubmit EventCalendar Activity Failure","EventId: "+r.event.id,1),r.error_message=e.server_message,r.saving_response=!1})};var l=function(e){n({method:"POST",url:"/payments/transaction/razorpay",data:{razorpay_payment_id:e}}).success(function(e){window.location=e.txn_url})},o=function(e,t,n,i,o,a){if(e){var s={key:$("meta[name=razorpay_api_key]").attr("content"),amount:100*t,currency:a,name:r.event.subject,description:r.currentInstitute.name,handler:function(e){l(e.razorpay_payment_id)},prefill:{name:n,email:i,contact:o},notes:{txn_id:e},theme:{color:"#00c4b5"},modal:{backdropclose:!1,escape:!1,ondismiss:function(){}}};new Razorpay(s).open()}};r.payViaRazorpay=function(){if(!r.validateAnswers(!0))return!1;var t=i();n({method:"POST",url:r.event.pay_razorpay_url,data:{razorpay:t}}).success(function(e){o(e.txn_id,t.amount,t.username,t.email,t.mobile,t.currency)}).error(function(e){r.error_message=e.server_message})},r.event.current_user_registered&&(r.success_message="You have already registered for the event.")}]),ac_bootstrap($(".js_single_event")[0],["SingleEventCalendar"]),function(){this.JST||(this.JST={}),this.JST["donations/templates/campaign"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div>\n\n  <div class="inner_sec_column">\n    <div class="box-shadow-content" style="margin: 24px 0px;padding: 24px 24px 16px;" ng-custom-if="more_campaigns.length > 0">\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="Also" ac-title-last="See"></div>\n      </div>\n      <a href="/donations" style="float: right;" class="text_link ac_link">\n        See All\n      </a>\n      <div style="clear: both;"></div>\n\n      <div style="padding: 8px 0px 0px;">\n        <div ng-repeat="more_campaign in more_campaigns" style="padding: 8px 0px;" class="border-box">\n          <a ng-href="{{more_campaign.url}}" target="_self" style="position: relative;display: block;float: left;width: 80px;">\n            <div static-bg-image="{{$root.url(more_campaign.cover_picture)}}" style="background-position: center;background-size: cover;width: 100%;padding-bottom: 80%;"></div>\n          </a>\n          <div style="display: inline-block;vertical-align: middle;padding-left: 8px;width: calc(100% - 80px);float: left;">\n            <a ng-href="{{more_campaign.url}}" target="_self">\n              <div class="text_heading ellipsis">\n                {{more_campaign.subject}}\n              </div>\n            </a>\n          </div>\n          <div style="clear: both;"></div>\n        </div>\n      </div>\n    </div>\n\n    <div class="box-shadow-content" style="margin: 24px 0px;padding: 16px;">\n      <div ac-section-title ac-title-first="Payment" ac-title-last="Integrated For:"></div>\n      <div style="padding-top: 16px;text-align: center;">\n        <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/payments-c4f264028cfa5fe15b7f226f53e407bf36baaf3973498948121114d3928e0484.png">\n      </div>\n    </div>\n\n  </div>\n\n  <div class="inner_main_column">\n    <div ng-custom-include="\'donations/templates/campaign_info\'"></div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/campaign_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;">\n  <div ng-click="cover_picture_popup.showPopup()" static-bg-image="{{$root.url(campaign.cover_picture)}}"\n    style="cursor: pointer;width: 100%;padding-bottom:44%;background-size: cover;background-repeat: no-repeat;background-position: center;">\n  </div>\n  <div ac-popup="cover_picture_popup" min-width="80%" height="90%">\n    <div static-bg-image="{{$root.url(campaign.cover_picture)}}" style="background-repeat: no-repeat;height: 100%;width: 100%;background-position: center;background-size: contain;"></div>\n  </div>\n\n  <div style="padding: 24px;padding-bottom: 8px;">\n    <a ng-href="/donations/{{campaign.id}}" target="_self" class="text_title" title="{{campaign.subject}}" style="display: block;padding-right: 20px;">\n      {{campaign.subject}}\n    </a>\n\n    <div class="ellipsis text_caption" style="max-width: 100%;">\n      <a ng-href="{{campaign.contributor.url}}" class="text_caption_dark">{{campaign.contributor.name}}</a>\n      <span ng-custom-if="campaign.on_behalf_of" class="text_caption">\n        on behalf of {{campaign.on_behalf_of}}\n      </span>\n    </div>\n\n    <div style="margin-top: 24px;margin-bottom: 8px;">\n      <div style="background: #f8f8f8;height: 3px;width: 100%;"></div>\n      <div style="background: #00c4b5;height: 3px;width: {{campaign.amount_donated_in_percent}}%;position: absolute;top: 0px;"></div>\n    </div>\n\n    <div>\n      <div style="float: left;width: calc(100% - 117px);min-width: 250px;margin-bottom: 16px;">\n        <div style="display: inline-block;padding-right: 16px;text-align: center;">\n          <div class="text_caption_dark">\n            \u20b9 {{campaign.amount_donated}}\n          </div>\n          <div class="text_caption">\n            Contributed\n          </div>\n        </div>\n\n        <div style="display: inline-block;padding-right: 16px;text-align: center;">\n          <div class="text_caption_dark">\n            \u20b9 {{campaign.goal_amount}}\n          </div>\n          <div class="text_caption">\n            Goal Amount\n          </div>\n        </div>\n\n        <div ng-custom-if="campaign.show_count_enabled || currentUser.is_institute_coordinator" style="display: inline-block;padding-right: 16px;text-align: center;">\n          <div class="text_caption_dark">\n            {{campaign.donors_count}}\n          </div>\n          <div class="text_caption">\n            Donors\n          </div>\n        </div>\n      </div>\n\n      <a ng-href="{{campaign.donate_url}}" class="ac_button" ng-custom-if="!(campaign.past_campaign)" style="float: left;display: block;margin-bottom: 16px;">\n        Contribute\n      </a>\n\n      <div style="clear: both;"></div>\n    </div>\n\n    <div style=" position: absolute;right: 24px;top: 16px;cursor: pointer;">\n      <div style="padding-top: 8px;" ng-custom-if="currentUser.is_institute_coordinator">\n        <span class="link_text js_donation_options" style="font-weight: 600" ng-click="setting_dropdown.showDropdown()">\n          <i class="icon-7" style="cursor: pointer;position: relative;float: right;font-size: 22px;font-weight: 600;\n            top: -5px;right: -5px;"></i>\n        </span>\n\n        <div ac-dropdown="setting_dropdown" style="width: 200px;position: absolute;top: 24px;right: -8px;">\n          <a ng-href="/donations/{{campaign.id}}/edit" class="dd_item">\n            Edit Campaign\n          </a>\n          <div ng-click="deleteContribution()" class="dd_item">\n            Delete Campaign\n          </div>\n          <a ng-href="/donations/{{campaign.id}}/add_donor" class="dd_item">\n            Add Donors\n          </a>\n          <div ng-click="downloadDonations(setting_dropdown, excelPopup)" class="dd_item">\n            Download List\n          </div>\n          <iframe id="js_download_donation" style="display:none;"></iframe>\n        </div>\n        <div ng-custom-include="\'common/templates/excel_download_popup\'"></div>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n\n<div ng-custom-if="campaign.show_count_enabled" class="box-shadow-content" style="margin: 24px 0px;padding: 24px 24px 16px;">\n  <div ng-custom-include="\'donations/templates/donors_list\'"></div>\n</div>\n\n<div class="box-shadow-content" style="margin: 24px 0px;padding-top: 24px;padding-bottom: 24px;">\n  <div ac-section-title ac-title-first="Details" style="padding: 0px 24px;"></div>\n\n  <div class="text_body_light" style="padding: 8px 24px 0px;">\n    <div class="quill-content text_body">\n      <div ng-bind-html="trustAsHtml(campaign.content)"></div>\n    </div>\n  </div>\n\n  <div ng-custom-if="campaign.shared_files.length > 0 || campaign.shared_images.length > 0" style="padding: 8px 0px;">\n    <div shared-files-list="campaign.shared_files" style="padding: 0px 16px;"></div>\n    <div shared-images-list="campaign.shared_images"></div>\n  </div>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/create_or_update"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(
'<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;">\n  <div class="text_title">\n    <span ng-show="new_campaign">Create Campaign</span>\n    <span ng-show="!new_campaign">Edit Campaign</span>\n  </div>\n  <div style="margin: 16px 0px;position:relative;">\n    <div ng-show="campaignForm.cover_picture">\n      <div style="height: 200px;width: 100%;">\n        <div var-bg-image="$root.url(campaignForm.cover_picture)" ng-show="campaignForm.cover_picture.id" style="height: 100%;width: 100%;background-size: cover;background-repeat: no-repeat;background-position: center;">\n          <div style="background: black;height: 100%;width: 100%;opacity: 0.5;color: white;">\n          </div>\n        </div>\n      </div>\n      <div style="background: black;opacity: 0.8;">\n        <div ac-asset-upload class="file_upload_box ac_link" jfu-model="campaignForm.cover_picture" jfu-id-model="campaignForm.cover_picture_id"\n          style="padding: 5px 10px;font-size: 12px;font-weight: 700;color: #fff;" data-opts="{only_image: true, single_file: true}">\n          <div style="color: #fff;">Upload New Picture</div>\n        </div>\n        <div ng-click="campaignForm.cover_picture.remove()" class="ac_link" style="padding:5px 10px;font-size: 12px;color:white;font-weight: 700;float: left;">\n          Remove\n        </div>\n        <div class="clear"></div>\n        <div class="progressBarInProgress" style="width: {{campaignForm.cover_picture.progress}}%;" ng-hide="campaignForm.cover_picture.uploaded"></div>\n      </div>\n    </div>\n\n    <div ng-show="!(campaignForm.cover_picture)" style="background: #acc4bf;width: 100%;height: 258px;text-align: center;">\n      <div style="height: 100%;width: 0px;vertical-align: middle;display: inline-block;"></div>\n      <div ac-asset-upload class="file_upload_box ac_button" jfu-model="campaignForm.cover_picture" jfu-id-model="campaignForm.cover_picture_id"\n        style="vertical-align: middle;display: inline-block;float: none;" data-opts="{only_image: true, single_file: true}">\n        Upload Picture\n      </div>\n    </div>\n  </div>\n\n  <div ac-input-box ac-label="Campaign Title" ac-error="errors.subject">\n    <input type="text" ng-model="campaignForm.subject" placeholder="Fund Raising" />\n  </div>\n\n  <div ac-input-box ac-label="Goal Amount" ac-error="errors.goal_amount" style="max-width: 120px;">\n    <input type="text" ng-model="campaignForm.goal_amount" placeholder="100000" allow-only-numbers/>\n  </div>\n\n  <div ac-input-box ac-label="Campaign Duration">\n    <div ac-input-radio ac-label=\'Ongoing\'>\n      <input type="radio" ng-model=\'campaignForm.campaign_duration\' value="ongoing" />\n    </div>\n    <div ac-input-radio ac-label=\'End Date\'>\n      <input type="radio" ng-model=\'campaignForm.campaign_duration\' value="end_date" />\n    </div>\n    <div ac-input-box ac-error="errors.end_date" ng-custom-if="campaignForm.campaign_duration == \'end_date\'" style="padding-left: 20px;max-width: 160px;">\n      <input type="text" ng-model="campaignForm.end_date" placeholder="DD/MM/YYYY" ac-datepicker />\n    </div>\n  </div>\n\n  <div ac-input-box ac-label="Campaign is being run by">\n    <div ac-input-radio ac-label=\'You\'>\n      <input type="radio" ng-model=\'campaignForm.runner\' value="you" />\n    </div>\n    <div ac-input-radio ac-label=\'Some Other Name\'>\n      <input type="radio" ng-model=\'campaignForm.runner\' value="some_other_name" />\n    </div>\n    <div ac-input-box ac-error="errors.on_behalf_of" ng-custom-if="campaignForm.runner == \'some_other_name\'" style="padding-left: 20px;max-width: 180px;">\n      <input type="text" ng-model="campaignForm.on_behalf_of" placeholder="Placement Committee" />\n    </div>\n  </div>\n</div>\n\n<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;">\n  <div ac-section-title ac-title-first="Details" style="padding-bottom: 8px;"></div>\n\n  <div ac-input-box ac-label="Add preview content to be shared on other social media" ac-error="errors.sharable_content">\n    <textarea type="text" ng-model="campaignForm.sharable_content" placeholder="Enter Shareable content"></textarea>\n  </div>\n\n  <div ac-input-box ac-label="Add Details" ac-error="errors.content">\n    <div ac-text-editor ac-model="campaignForm.content">\n    </div>\n  </div>\n\n  <div ac-shared-file="campaignForm.shared_files"></div>\n  <div style="margin-bottom: 8px;">\n    <div ac-asset-upload class="file_upload_box text_link" jfu-model="campaignForm.shared_files" jfu-id-model="campaignForm.shared_file_ids">\n      <span>Attach File</span>\n    </div>\n    <div style="clear: both;"></div>\n  </div>\n\n  <div ac-input-box ac-label="Add special note for donor after successful donation">\n    <textarea ng-model="campaignForm.special_registration_note" placeholder="Enter Details"></textarea>\n  </div>\n</div>\n\n<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;" ng-custom-if="!(past_campaign)">\n  <div ac-section-title ac-title-first="Information that you need from the donor" style="padding-bottom: 8px;"></div>\n  <div ac-input-questions="campaignForm.questions" ac-validate="validateQuestions"></div>\n</div>\n\n<div class="box-shadow-content" style="margin-top: 24px;padding: 24px;" ng-custom-if="currentUser.is_institute_coordinator">\n  <div ac-section-title ac-title-first="Settings" style="padding-bottom: 8px;"></div>\n\n  <div ng-custom-if="currentUser.is_system_admin">\n    <div ac-input-checkbox ac-label=\'Allow non-signed up users to donate\'>\n      <input type="checkbox" ng-model=\'campaignForm.public\' />\n    </div>\n  </div>\n\n  <div ac-input-checkbox ac-label=\'Show counts & names of people who have donated for the campaign\'>\n    <input type="checkbox" ng-model=\'campaignForm.show_count_enabled\' />\n  </div>\n  <div ng-custom-if="new_campaign">\n    <div ng-custom-if="currentInstitute.post_as_official_enabled ">\n      <div ac-input-checkbox ac-label="Post as Official">\n        <input type="checkbox" ng-model="campaignForm.post_as_official" />\n      </div>\n    </div>\n  </div>\n\n  <div ng-custom-if="currentInstitute.multiple_pay_acc" ac-input-checkbox ac-label=\'Choose different payment bank\'>\n    <input type="checkbox" ng-model=\'campaignForm.select_pay\' ng-disabled="!(new_campaign || currentUser.is_system_admin)"/>\n  </div>\n\n  <div ng-custom-if="campaignForm.select_pay || campaignForm.payment_account_id" ac-input-box ac-label="Choose bank account" style="width: 200px;display: inline-block;margin-right: 24px;">\n    <select ng-options="acc for acc in currentInstitute.multiple_pay_accs_options" ng-model="campaignForm.payment_account_id"\n            placeholder="Choose Bank account" ng-class="{true: \'unselected\'}[!(campaignForm.payment_account_id)]">\n      <option value="">Choose bank account</option>\n    </select>\n  </div>\n\n  <div ac-input-checkbox ac-label=\'Accept payments from Indian bank accounts only\'>\n    <input type="checkbox" ng-model=\'campaignForm.native_currency\'/>\n  </div>\n</div>\n\n\n\n<div style="margin: 32px 0px;">\n  <div ng-show="dc_success_message" class="text_success" style="padding: 8px 0px;">\n    {{dc_success_message}}\n  </div>\n  <div ng-show="dc_error_message" class="text_error" style="padding: 8px 0px;">\n    {{dc_error_message}}\n  </div>\n  <div class="text_error" ng-show="errors" style="padding: 8px 0px;">\n    Please fill all the highlighted fields above\n  </div>\n\n  <div class="ac_button" style="float: left;" ng-click="createOrUpdateCampaign()"\n    ac-loading="{{creating_campaign}}" text="Create Campaign" ng-custom-if="new_campaign">\n  </div>\n\n  <div class="ac_button" style="float: left;" ng-click="createOrUpdateCampaign()"\n    ac-loading="{{creating_campaign}}" text="Update Campaign" ng-custom-if="!(new_campaign)">\n  </div>\n\n  <div style="clear: both;"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/donors_list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div ng-custom-if="campaign.donors.total == 0" style="text-align: center;">\n  <div style="height: 40px;">\n    <div class="vertical_middle"></div>\n    <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/announce-46ccd13b8b3307634f26e28cb655c48e24a4a58008caf3eb3044e7b98b2b52af.png" style="display: inline-block;vertical-align: middle;padding-right: 16px;"></img>\n    <div class="text_body_light" style="display: inline-block;vertical-align: middle;">No Donations Yet.</div>\n  </div>\n  <div style="width: 50%;margin: auto;">\n    <div style="background-image: url(https://d26pkxyw9vw39t.cloudfront.net/assets/dots-47c2a5eb6bd82b4e7fe29d670cc7b5dfe32539b7f86de1b7dc91891e660755b1.png);width: 100%;height: 80px;background-size: contain;background-repeat: no-repeat;padding-top:16px;">\n    </div>\n  </div>\n  <div class="clear"></div>\n</div>\n\n<div ng-custom-if="campaign.donors.total > 0">\n  <div ac-section-title ac-title-first="{{campaign.donors.total}}" ac-title-last="{{currentInstitute.collegiates}} Donated"></div>\n  <div style="padding: 8px 0px;" class="flex_box">\n    <div ng-repeat="donor in campaign.donors.data | limitTo: donor_limit" style="padding: 8px 0px;min-width: 0px;" class="border-box flex2">\n      <a ng-href="{{donor.profile_url}}" title="{{donor.name}}\'s profile" target="_self" style="position: relative;float: left;">\n        <img ng-src="{{$root.url(donor.image, {size: \'100x100\', type: \'crop\'})}}" style="height: 32px;width: 32px;display: block;border-radius: 16px;" />\n      </a>\n      <div style="padding-left: 12px;width: calc(100% - 36px);padding-right: 24px;float: left;" class="ellipsis border-box">\n        <div class="ellipsis text_heading" style="width: 100%;">\n          <a ng-href="{{donor.profile_url}}">\n            {{donor.name}}\n          </a>\n          <span class="text_caption_small" ng-show="donor.batch_small">{{donor.batch_small}}</span>\n        </div>\n        <div class="text_caption_dark">INR {{donor.amount_donated}}</div>\n        <div class="text_caption ellipsis">{{donor.comment}}</div>\n      </div>\n      <div style="cursor: pointer;right:12px;position: absolute;top: 0px;" ng-custom-if="(donor.is_offline || donor.is_public) && currentUser.is_institute_coordinator">\n        <span ng-click="donor_dropdown.showDropdown()">\n          <i class="icon-7" style="cursor: pointer;font-size: 22px;font-weight: 600;"></i>\n        </span>\n      </div>\n      <div style="clear: both;"></div>\n\n      <div ac-dropdown="donor_dropdown" style="width: 200px;position: absolute;right: 0px;top: 20px;">\n        <div ng-click="donor_dropdown.closeDropdown();tagUserPopup.showPopup()" class="dd_item" ng-custom-if="donor.is_public">\n          Tag User\n        </div>\n        <a href="/donations/{{campaign.id}}/edit_donor/{{donor.id}}" class="dd_item" ng-custom-if="donor.is_offline">\n          Edit\n        </a>\n        <div ng-click="delete_donor(donor, $index, donor_dropdown)" class="dd_item" ng-custom-if="donor.is_offline">\n          Delete\n        </div>\n      </div>\n\n      <div ac-popup="tagUserPopup">\n        <div class="text_title">\n          Tag User\n        </div>\n\n        <div style="padding: 8px 4px;display: inline-block;vertical-align: middle;width: calc(100% - 25px);">\n          <div ng-custom-if="!donor.tagged_user_present">\n            <div ac-suggestion-box ac-model="donor.tagged_user" ac-label="Tag User"\n              ac-url="/suggestions/username?institute_id={{currentInstitute.id}}&ignore_self=true">\n            </div>\n            <div ac-loading="{{userTaggingLoader}}" text="Update" class="ac_button" style="float:left;margin-top:8px;" ng-click="addUserTag(donor, tagUserPopup)"></div>\n            <div class="clear"></div>\n          </div>\n          <div ng-custom-if="donor.tagged_user_present">\n            <div ac-input-box ac-label="Tag User">\n              <input type="text" ng-model="donor.tagged_user.name" ng-disabled="true"/>\n            </div>\n            <div class="ac_button" style="float:left;margin-top:8px;" ng-disabled="true">Update</div>\n            <div class="clear"></div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <div class="flex2"></div>\n  </div>\n  <div class="ac_link text_link" ng-custom-if="campaign.donors.total > donor_limit" ng-click="showMoreDonors()" style="text-align: center;">\n    <div style="padding: 8px 0px;">\n      Show More\n    </div>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/past_campaigns"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div class="text_title" style="padding-bottom: 16px;">Campaigns</div>\n\n  <div ng-custom-if="past_campaigns.data.length > 0">\n    <div style="padding-bottom: 8px;">\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="{{past_campaigns.total}}" ac-title-last="Past Campaigns"></div>\n      </div>\n      <a href="/donations/new" class="text_link" style="float: right;" ng-custom-if="currentUser.is_institute_coordinator">\n        + Create\n      </a>\n      <div style="clear: both;"></div>\n    </div>\n\n    <div style="margin: 0px -8px 8px;">\n      <div ng-repeat="campaign in past_campaigns.data" style="padding: 8px;" class="border-box">\n        <div ng-include="\'donations/templates/short_campaign\'"></div>\n      </div>\n    </div>\n  </div>\n\n  <div style="text-align: center;margin-top: 20px;" ng-show="loadingPastCampaigns">\n    <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/loader-4830e5040671b4b3999740d1a1ae3551768ca0336949f90fc893cb0fe075c21f.gif">\n  </div>\n\n  <div ng-custom-if="past_campaigns.total == 0 " style="text-align: center;padding: 40px 24px;">\n    <div class="text_title" style="padding-bottom: 16px;">\n      No Past Campaigns\n    </div>\n    <a href="/donations/new" class="ac_button" style="display: inline-block;" ng-custom-if="currentUser.is_institute_coordinator">\n      + Create\n    </a>\n  </div>\n\n  <div style="text-align: center;" class="text_link ac_link" ng-click="loadPastCampaigns()"\n    ng-custom-if="past_campaigns.total > past_campaigns.data.length && !(loadingPastCampaigns)">\n    <span style="padding-top: 8px;">Show More</span>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/question_answer_form"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="inner_main_column" ng-controller="DonationController">\n  <div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n\n    <div style="padding-bottom: 8px;">\n      <a ng-href="{{campaign.url}}" style="padding-right: 16px;float: left;padding-top: 4px;">\n        <span class="nicon-arrow-left" style="font-size: 16px;"></span>\n      </a>\n      <div class="text_title" style="margin-left: 32px;">\n        {{campaign.subject}}\n      </div>\n      <div class="clear"></div>\n\n      <div style="padding-top: 16px;">\n        <div ng-custom-if="selected_page == \'add_donor\'">\n          <div ac-section-title ac-title-first="Add Donor form"></div>\n        </div>\n        <div ng-custom-if="selected_page == \'edit_donor\'">\n          <div ac-section-title ac-title-first="Edit Donor form"></div>\n        </div>\n        <div ng-custom-if="selected_page == \'make_donation\'">\n          <div ac-section-title ac-title-first="Donation" ac-title-last="Form"></div>\n        </div>\n      </div>\n\n    </div>\n\n    <div ac-input-answers ac-questions="campaign.questions" ac-answers="campaign.answers" ac-validate="validateAnswers" ac-payment-enabled="true">\n    </div>\n\n    <div style="padding-top: 24px;">\n      <div class="text_error" ng-show="error_message" style="padding-bottom: 8px;">\n        {{error_message}}\n      </div>\n      <div class="text_success" ng-show="success_message" style="padding-bottom: 8px;">\n        {{success_message}}\n      </div>\n      <div class="text_error" ng-show="campaign.native_currency && campaign.answers.currency[0] == \'Yes\'" style="padding: 8px 0px;">\n        We are currently accepting payments from Indian bank accounts only\n      </div>\n\n      <div ng-custom-if="selected_page==\'make_donation\'" style="padding-bottom: 8px;">\n        <div ng-custom-if="campaign.answers.currency[0] == \'Yes\'">\n          <form action="https://www.paypal.com/cgi-bin/webscr" method="post" class="js_paypal_form">\n            <input type="hidden" name="business" value="{{paypal.paypal_email}}">\n            <input type="hidden" name="cmd" value="_donations" />\n            <input type="hidden" name="amount" value="{{paypal.amount}}">\n            <input type="hidden" name="charset" value="utf-8">\n            <input type="hidden" name="return" value="" />\n            <input type="hidden" name="notify_url" value="{{paypal.url}}" />\n            <input type="hidden" name="currency_code" value="USD" />\n            <input type="hidden" name="item_name" value="{{paypal.item_name}}">\n            <input type="hidden" name="custom" value="{{paypal.title}}">\n          </form>\n\n          <div text="Pay Now" class="ac_button" ng-disabled="campaign.native_currency && campaign.answers.currency[0] == \'Yes\'" ac-loading="{{saving_response}}"\n            style="float: left;"  ng-click="payViaPaypal()" ></div>\n          <div style="clear: both;"></div>\n        </div>\n\n        <div ng-custom-if="campaign.answers.currency[0] == \'No\'">\n          <div text="Pay Now" class="ac_button" ac-loading="{{saving_response}}" ng-display="campaign.native_currency && campaign.answers.currency[0] == \'Yes\'"\n            style="float: left;"  ng-click="payViaRazorpay()"></div>\n          <div style="clear: both;"></div>\n        </div>\n      </div>\n\n      <div ng-custom-if="selected_page != \'make_donation\'" style="padding-bottom: 8px;">\n        <div ng-custom-if="selected_page == \'add_donor\'" class="ac_button" ng-click="addDonor()" style="float: left;" ac-loading="{{saving_response}}" text="Add Donor">\n        </div>\n        <div ng-custom-if="selected_page == \'edit_donor\'" class="ac_button" ng-click="addDonor()" style="float: left;" ac-loading="{{saving_response}}" text="Add Donor">\n        </div>\n        <div style="clear: both;"></div>\n      </div>\n    </div>\n\n\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/short_campaign"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div style="border:1px solid #e7eceb;border-radius: 3px;">\n  <a ng-href="/donations/{{campaign.id}}" style="display: block;">\n    <div style="width: 100%;height: 244px;background-size: cover;background-position: 50% 50%; background-repeat: no-repeat;"\n      static-bg-image="{{$root.url(campaign.cover_picture, {size: \'700x256\', type: \'crop\'})}}">\n    </div>\n  </a>\n\n  <div style="padding: 24px;padding-bottom: 8px;">\n    <a ng-href="/donations/{{campaign.id}}" target="_self" class="text_title_small ellipsis" title="{{campaign.subject}}" style="max-width: 100%;display: block;">\n      {{campaign.subject}}\n    </a>\n\n    <div class="ellipsis text_caption" style="max-width: 100%;">\n      <a ng-href="{{campaign.contributor.url}}" class="text_caption_dark">{{campaign.contributor.name}}</a>\n      <span ng-custom-if="campaign.on_behalf_of">\n        on behalf of {{campaign.on_behalf_of}}\n      </span>\n    </div>\n\n    <div style="margin-top: 24px;margin-bottom: 8px;">\n      <div style="background: #f8f8f8;height: 3px;width: 100%;"></div>\n      <div style="background: #00c4b5;height: 3px;width: {{campaign.amount_donated_in_percent}}%;position: absolute;top: 0px;"></div>\n    </div>\n\n    <div>\n      <div style="float: left;width: calc(100% - 117px);min-width: 250px;margin-bottom: 16px;">\n        <div style="display: inline-block;padding-right: 16px;text-align: center;">\n          <div class="text_caption_dark">\n            \u20b9 {{campaign.amount_donated}}\n          </div>\n          <div class="text_caption">\n            Contributed\n          </div>\n        </div>\n\n        <div style="display: inline-block;padding-right: 16px;text-align: center;">\n          <div class="text_caption_dark">\n            \u20b9 {{campaign.goal_amount}}\n          </div>\n          <div class="text_caption">\n            Goal Amount\n          </div>\n        </div>\n\n        <div ng-custom-if="campaign.show_count_enabled || currentUser.is_institute_coordinator" style="display: inline-block;padding-right: 16px;text-align: center;">\n          <div class="text_caption_dark">\n            {{campaign.donors_count}}\n          </div>\n          <div class="text_caption">\n            Donors\n          </div>\n        </div>\n      </div>\n\n      <a ng-href="{{campaign.donate_url}}" class="ac_button" ng-custom-if="!(campaign.past_campaign)" style="float: left;display: block;margin-bottom: 16px;">\n        Contribute\n      </a>\n\n      <div style="clear: both;"></div>\n    </div>\n\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["donations/templates/upcoming_campaigns"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box-shadow-content" style="margin: 24px 0px;padding: 24px;">\n  <div class="text_title" style="padding-bottom: 16px;">Campaigns</div>\n\n  <div ng-custom-if="upcoming_campaigns.data.length > 0">\n    <div style="padding-bottom: 8px;">\n      <div style="float: left;">\n        <div ac-section-title ac-title-first="{{upcoming_campaigns.total}}" ac-title-last="Ongoing Campaign{{upcoming_campaigns.total > 1 ? \'s\' : \'\'}}"></div>\n      </div>\n       <a href="/donations/new" class="text_link" style="float: right;" ng-custom-if="currentInstitute.create_donation_campaigns">\n        + Create\n      </a>\n     <div style="clear: both;"></div>\n    </div>\n\n    <div style="margin: 0px -8px 8px;">\n      <div ng-repeat="campaign in upcoming_campaigns.data" style="padding: 8px;" class="border-box">\n        <div ng-include="\'donations/templates/short_campaign\'"></div>\n      </div>\n    </div>\n  </div>\n\n  <div style="text-align: center;margin-top: 20px;" ng-show="loadingUpcomingCampaigns">\n    <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/loader-4830e5040671b4b3999740d1a1ae3551768ca0336949f90fc893cb0fe075c21f.gif">\n  </div>\n\n  <div ng-custom-if="upcoming_campaigns.total == 0 " style="text-align: center;padding: 40px 24px;">\n    <div>\n      <img src="https://d26pkxyw9vw39t.cloudfront.net/assets/decor-coin-stack-8a525377de227b9ff21be9a08bb08ee84f37ce7ef12c09a57aba5ca783adba4a.png" style="max-width: 100%;" />\n    </div>\n    <div class="text_body_light" style="padding-top: 40px;">\n      No Ongoing Campaigns\n    </div>\n    <div class="text_body_light" style="padding-top: 24px;" ng-custom-if="!(currentUser.is_institute_coordinator)">\n      Please contact coordinator If you want to create one\n    </div>\n    <div class="text_body_light" style="padding-top: 24px;" ng-custom-if="currentInstitute.create_donation_campaigns">\n      You can create one\n      <a href="/donations/new" class="ac_link" style="color: #00bfa9;">from here</a>\n      right away\n    </div>\n  </div>\n\n  <div style="text-align: center;" class="text_link ac_link" ng-click="loadUpcomingCampaigns()"\n    ng-custom-if="upcoming_campaigns.total > upcoming_campaigns.data.length && !(loadingUpcomingCampaigns)">\n    <span style="padding-top: 8px;">Show More</span>\n  </div>\n</div>\n');return __p.join("")}}.call(this),angular.module("SingleDonationCampaign",["ngSanitize","ac","CreatePosts"]),angular.module("SingleDonationCampaign").config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self",/https?:\/\/[^\.\/]*\.cloudfront\.net\/assets\/.*\.html/])}]),angular.module("SingleDonationCampaign").controller("DetailedCampaignController",["$scope","$http","$timeout","$filter","$sce",function(i,o,e){setAngularCSRFToken(o);var t=function(){o({method:"GET",url:"/donations/more_campaigns",params:{campaign_id:i.campaign.id}}).success(function(e){i.more_campaigns=e.data})};i.deleteContribution=function(){confirm("Are you sure you want to delete the contribution?")&&o({method:"DELETE",url:"/contributions/delete_post",params:{post_id:i.campaign.id}}).success(function(){location.reload()})},i.showMoreDonors=function(){if(i.donor_limit+=6,i.campaign.donors&&i.campaign.donors.data.length>=i.donor_limit)return!0;i.campaign.donors||(i.campaign.donors={data:[]}),i.campaign.donors.page||(i.campaign.donors.page=0),i.campaign.donors.page+=1,o({method:"GET",url:"/donations/donors",params:{campaign_id:i.campaign.id,page:i.campaign.donors.page}}).success(function(e){angular.forEach(e.data,function(e){i.campaign.donors.data.push(e)}),i.campaign.donors.total=e.total,i.campaign.donors.total_pages=e.total_pages})},i.addUserTag=function(e,t){i.userTaggingLoader=!0,o({method:"POST",url:"/donations/donors/add_user_tag",data:{id:i.campaign.id,donor_doc_id:e.id,tagged_user_id:e.tagged_user.id}}).success(function(){i.userTaggingLoader=!1,e.tagged_user_present=!0,t.closePopup()})},i.downloadDonations=function(t,n){o({url:"/donations/download",method:"GET",params:{campaign_id:i.campaign.id}}).success(function(e){e.url?document.getElementById("js_download_donation").src=e.url:(t.closeDropdown(),n.showPopup())})},i.delete_donor=function(e,t,n){window.confirm("Do you really want to delete this donor?")&&o({url:"/donations/delete_donor",method:"POST",data:{donor_doc_id:e.id,campaign_id:i.campaign.id}}).success(function(){i.campaign.donors.data.splice(t,1),i.campaign.donors.total-=1,n&&n.closeDropdown()})},i.showMoreContent=function(){i.moreContent=!1},i.campaign=$(".js_single_campaign").data("content"),t(),i.campaign.answers&&(i.campaign.answers.native_currency=i.campaign.native_currency),i.donor_limit=0,i.showMoreDonors();var n=new Date;new Date(i.campaign.from_time)<=n&&new Date(i.campaign.to_time)>=n&&(i.active_campaign=!0),i.moreContent=!1,i.campaign.content_short2&&(i.moreContent=!0),e(function(){var e=getSearchString();"true"==convertSearchStringtoObject(e).share_dialogue&&(i.post_create_content=i.campaign.url,i.create_post_popup.showPopup())})}]),angular.module("SingleDonationCampaign").controller("DonationController",["$scope","$http","$timeout","$filter","$sce",function(s,n,i){setAngularCSRFToken(n);var o=function(){var e=getValue(s.campaign.answers.anonymous,0),t={campaign_id:s.campaign.id,amount:getValue(s.campaign.answers.amount,0),username:getValue(s.campaign.answers.user_name,0),email:getValue(s.campaign.answers.email,0),mobile:getValue(s.campaign.answers.mobile_number,0),billing_address:getValue(s.campaign.answers.current_city,[0,"name"]),answers:s.campaign.answers,anonymous:e&&"Donate Anonymously"==e,tag_user_id:getValue(s.campaign.answers.tag_user,[0,"id"]),comment:getValue(s.campaign.answers.comment,0),public_entity:{name:getValue(s.campaign.answers.user_name,0),email:getValue(s.campaign.answers.email,0),mobile:getValue(s.campaign.answers.mobile_number,0),current_city_id:getValue(s.campaign.answers.current_city,"id"),currently_at_id:getValue(s.campaign.answers.current_company,"id")}};return delete t.answers.native_currency,t};s.addDonor=function(){if(s.error_message=null,s.success_message=null,!s.validateAnswers(!0))return!1;var e=o();s.saving_response=!0,n({url:"/donations/add_edit_donor",method:"POST",data:{form_data:e,campaign_id:s.campaign.id,donor_doc_id:s.campaign.donor_doc_id}}).success(function(){s.saving_response=!1,s.success_message="Donor Successfully Added",s.campaign.donor_doc_id&&(s.success_message="Donor Successfully Updated"),window.location=s.campaign.url}).error(function(e){s.saving_response=!1,s.error_message=e.server_message})};var r=function(e){n({method:"POST",url:"/payments/transaction/razorpay",data:{razorpay_payment_id:e}}).success(function(e){window.location=e.txn_url})},a=function(e,t,n,i,o){if(e){var a={key:$("meta[name=razorpay_api_key]").attr("content"),amount:100*t,name:s.campaign.subject,description:s.currentInstitute.name,handler:function(e){r(e.razorpay_payment_id)},prefill:{name:n,email:i,contact:o},notes:{txn_id:e},theme:{color:"#00c4b5"},modal:{backdropclose:!1,escape:!1,ondismiss:function(){}}};new Razorpay(a).open()}};s.payViaRazorpay=function(){if(!s.validateAnswers(!0))return!1;var t=o();n({method:"POST",url:s.campaign.pay_razorpay_url,data:{razorpay:t}}).success(function(e){a(e.txn_id,t.amount,t.username,t.email,t.mobile)}).error(function(e){s.error_message=e.server_message})},s.payViaPaypal=function(){if(!s.validateAnswers(!0))return!1;var e=o();s.paypal={amount:e.amount,item_name:s.campaign.subject,title:s.currentInstitute.title+" - AlmaConnect",paypal_email:s.currentInstitute.paypal_email};var t=e.public_entity;t.amount=e.amount,t.campaign_id=s.campaign.id,s.saving_response=!0,n({url:"/donations/paypal",method:"POST",data:{txn:t}}).success(function(e){s.paypal.url=e.callback_url,i(function(){$(".js_paypal_form").submit()})})};var e=window.location.pathname;s.selected_page=null,-1!=e.indexOf("donate")&&(s.selected_page="make_donation"),-1!=e.indexOf("add_donor")&&(s.selected_page="add_donor"),-1!=e.indexOf("edit_donor")&&(s.selected_page="edit_donor")}]),ac_bootstrap($(".js_single_campaign")[0],["SingleDonationCampaign"]),angular.module("SingleMemory",["ngSanitize","ac"]),angular.module("SingleMemory").config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self",/https?:\/\/[^\.\/]*\.cloudfront\.net\/assets\/.*\.html/])}]);var s=angular.module("SingleMemory").controller("SingleMemoryController",["$scope","$http","$timeout","FullMonthNames",function(n,i,t,e){setAngularCSRFToken(i);var o=function(){var e=".js_image_list",t=$(e+" .js_image_"+n.selected_photo.id).outerWidth()*n.selected_photo_index-$(e).outerWidth()/2+$(e+" .js_image_"+n.selected_photo.id).outerWidth()/2;0<$(e).length&&$(e).mCustomScrollbar("scrollTo",t)},a=function(){i({method:"GET",url:"/memories/more_memories",params:{memory_id:n.memory.id}}).success(function(e){n.more_memories=e.data})};n.deleteMemoryImage=function(){confirm("Are you sure you want to delete this image?")&&i({method:"DELETE",url:"/memories/delete_image",params:{image_id:n.selected_photo.id}}).success(function(){n.memory.images.data.splice(n.selected_photo_index,1),n.memory.images.total-=1,n.selected_photo=n.memory.images.data[n.selected_photo_index],n.selected_photo||n.selected_image_popup.closePopup()})},n.makeCover=function(){confirm("Are you sure you want to make this image as cover")&&i({method:"POST",url:"/memories/make_cover",params:{image_id:n.selected_photo.id,memory_id:n.memory.id}}).success(function(){n.selected_photo.is_cover=!0})},n.deleteMemory=function(){confirm("Are you sure you want to delete memory?")&&i({method:"DELETE",url:"/memories",params:{memory_id:n.memory.id}}).success(function(){window.location="/memories"})},n.openEditMemory=function(){n.memoryForm={memory_id:n.memory.id,title:n.memory.title,month:n.memory.month,year:n.memory.year},n.memory_options_dropdown.closeDropdown(),n.edit_memory_popup.showPopup()},n.updateMemory=function(){n.creating_memory=!0;var e=angular.copy(n.memoryForm);delete e.images,i({method:"POST",url:"/memories/update_memory",data:{memory:e}}).success(function(e){n.creating_memory=!1,n.success_message="Memory updated successfully",n.memory=e,t(function(){n.success_message=null,n.edit_memory_popup.closePopup()},1e4)}).error(function(e){n.creating_memory=!1,n.error_message=e.server_message,t(function(){n.error_message=null},1e4)})},n.shareOnFacebook=function(){n.initFbJsSdk();var e={method:"feed",picture:0<n.memory.images.length?n.memory.images[0].image_url.enlarged.url:window.location.protocol+"//s3.amazonaws.com/almaconnect/uploads/AC_logo_icon_06.png",link:window.location.protocol+"//"+window.location.host+"/memories/"+n.memory.id,name:n.currentInstitute.title+" AlmaConnect : "+n.memory.title.replace(/[\n]/g,""),description:n.memory.content,display:"popup",version:"v3.2"};FB.ui(e,function(e){e?recordAnalyticsEvent("Facebook","Facebook ShareMemory SingleMemory Browse Success","MemoryId: "+n.memory.id,1):recordAnalyticsEvent("Facebook","Facebook ShareMemory SingleMemory Browse Failure","MemoryId: "+n.memory.id,0)})},n.selectPhoto=function(e){n.selected_photo=e,n.selected_photo_index=n.memory.images.data.indexOf(n.selected_photo),
n.selected_image_popup.showPopup(),-1==n.selected_photo_index&&angular.forEach(n.memory.images.data,function(e,t){e.id==n.selected_photo.id&&(n.selected_photo_index=t)}),n.selected_photo_index>=n.memory.images.data.length-3&&!n.loadingMoreImages&&n.showMorePhotos(),o(),t(function(){o()},1e3)},n.showNextImage=function(){var e=n.selected_photo_index;return e!=n.memory.images.data.length-1&&(n.selectPhoto(n.memory.images.data[e+1]),!0)},n.showPreviousImage=function(){var e=n.selected_photo_index;return 0!=e&&(n.selectPhoto(n.memory.images.data[e-1]),!0)},n.showMorePhotos=function(){if(n.memory.images.data.length==n.memory.images.total||n.loadingMoreImages)return!0;n.loadingMoreImages=!0;var e={skip:n.memory.images.data.length,memory_id:n.memory.id,image_id:n.memory.images.primary_image_id};i({method:"POST",url:"/memories/show_more_photos",data:e}).success(function(e){angular.forEach(e.data,function(e){n.memory.images.data.push(e)}),n.memory.images.total=e.total,n.loadingMoreImages=!1}).error(function(){n.loadingMoreImages=!1})},n.showUploadStatus=function(){n.success_message=null,n.upload_status_popup.showPopup()},n.resetMemoryImages=function(){resetSharedFiles(n.state.memory_assets),n.success_message=null},n.afterEachUpload=function(e){i({method:"POST",url:"/memories/update_memory",data:{memory:{memory_id:n.memory.id,asset_ids:[e.id]}}}).success(function(e){n.memory=e})},n.showUploadSuccess=function(){n.success_message="Successfully Added"},n.toggleImageListDisplay=function(){n.image_list_displayed=!n.image_list_displayed},n.toggleMarkPublic=function(e){var t=null;e&&(t="public"),params={memory:{memory_id:n.memory.id,tags:t}},i({method:"POST",url:"/memories/update_memory",data:params}).success(function(){n.memory.tags=t})},n.isMarkedPublic=function(){return!!n.memory.tags};var s=["iima.almaconnect.com"];n.canMarkPublic=n.currentUser.is_institute_coordinator&&-1!=s.indexOf(n.currentInstitute.host),n.memory||(n.memory=$(".js_single_memory").data("content")),n.state={memory_images:[]},n.onHorizontalScrollEvent=function(e){this.width()-e.left>=this.find(".js_memory_images").width()-200&&!n.loadingMoreImages&&n.showMorePhotos()},n.memory.images.primary_image_id&&angular.forEach(n.memory.images.data,function(e){n.memory.images.primary_image_id==e.id&&t(function(){n.selectPhoto(e)},1e3)}),n.college_established_year=new Date(n.currentInstitute.established_at).getFullYear(),n.years=populateTime(n.college_established_year,(new Date).getFullYear()).reverse(),n.months=populateTime(1,12,e),a(),n.$watch("memory.year",function(){n.months=n.memory.year===(new Date).getFullYear()?populateTime(1,(new Date).getMonth()+1,e):populateTime(1,12,e)},!0)}]);ac_bootstrap($(".js_single_memory")[0],["SingleMemory"]),angular.module("SingleContribution",["ngSanitize","ac"]),angular.module("SingleContribution").controller("ContributionController",["$scope","$http","$timeout","$filter","$sce","$rootScope","FullMonthNames",function(s,n,t){setAngularCSRFToken(n);var e=function(){return!s.post||"Contribution::User::Introduction"==s.post.type},i=function(){var e=s.post&&s.post.whatsapp_title;e||(e="");var t=s.post.content_short;t||(t=s.post.content),t||(t=s.post.description),t||(t=s.post.short_description),!t&&s.post.shared_link&&s.post.shared_link.description&&(t=s.post.shared_link.description);for(var n,i=/@\[mention-tag\]\[([^\]]*)\]\[([^\]]*)\]\[([^\]]*)\]/;null!=(n=i.exec(t));)t=t.replace(n[0],n[3]);t||(t="");var o=s.post.short_url;o||(o=getValue(s.post.event,"event_url")),o||(o=window.location.protocol+"//"+window.location.host+"/contributions/"+s.post.id);var a=null;return!a&&s.post.shared_files&&0<s.post.shared_files.length&&(a=s.post.shared_files[0].url),!a&&s.post.cover_picture&&(a=s.url(s.post.cover_picture)),{title:e,content:t,url:o,image_url:a}},o=function(){var e={post_id:s.editPostForm.id,content:s.editPostForm.content_mentions,shared_link:s.editPostForm.shared_link,tagged_users:s.editPostForm.related_users};s.updating_post=!0,n({method:"POST",url:"/contributions/update_article",data:e}).success(function(e){s.updating_post=!1,s.success_message="Successfully updated",s.post=e,t(function(){s.edit_post_popup.closePopup()},5e3)}).error(function(e){s.updating_post=!1,s.error_message=e.server_message})},a=function(){var t=[];angular.forEach(s.editPostForm.shared_images,function(e){t.push(e.id)}),angular.forEach(s.editPostForm.shared_files,function(e){t.push(e.id)});var e={post_id:s.editPostForm.id,subject:s.editPostForm.subject,content:s.editPostForm.content_mentions,shared_link:s.editPostForm.shared_link,tagged_user_ids:s.editPostForm.tagged_user_ids,shared_file_ids:t};s.updating_post=!0,n({method:"POST",url:"/contributions/update_post",data:e}).success(function(e){s.updating_post=!1,s.success_message="Successfully updated",s.post=e,s.updateSharedFiles(),s.edit_post_popup.closePopup()}).error(function(e){s.updating_post=!1,s.error_message=e.server_message})},r=function(){s.maxVotes=0,angular.forEach(s.post.options,function(e,t){-1!=$.inArray(s.currentUser.id,e.poller_ids)&&(s.post.options[t].current_user_vote=!0,s.alreadyVoted=!0),s.maxVotes<e.poller_ids.length&&(s.maxVotes=e.poller_ids.length)}),angular.forEach(s.post.options,function(e,t){angular.equals(s.maxVotes,0)?s.post.options[t].width=0:s.post.options[t].width=100*e.poller_ids.length/s.maxVotes})};s.showMoreIntroductions=function(){n({method:"POST",url:"/contributions/more_introductions",data:{aggregate_id:s.post.id,ignored_ids:s.post.introductions.data.map(function(e){return e.id})}}).success(function(e){s.post.introductions.data=s.post.introductions.data.concat(e.data)})},s.expandShareIcons=function(){s.show_all_share_icons=!0,t(function(){s.show_all_share_icons=!1},2e4)},s.selectPhoto=function(e,t){s.selected_photo=e,s.selected_photo_index=s.shared_images.indexOf(s.selected_photo),t&&t.showPopup()},s.showNextImage=function(){var e=s.shared_images.indexOf(s.selected_photo);if(e==s.shared_images.length-1)return!0;s.selectPhoto(s.shared_images[e+1])},s.showPreviousImage=function(){var e=s.shared_images.indexOf(s.selected_photo);if(0==e)return!0;s.selectPhoto(s.shared_images[e-1])},s.shareOnLinkedin=function(){var e="https://www.linkedin.com/shareArticle?mini=true&url="+s.sharable_data.url+"&title="+s.sharable_data.title+"&summary="+s.sharable_data.content;window.open(e,"LinkedIn","width=660,height=400,scrollbars=no;resizable=no")},s.shareOnTwitter=function(){var e="https://twitter.com/intent/tweet?mini=true&url="+s.sharable_data.url+"&text="+(s.sharable_data.title||s.sharable_data.content)+"&via=AlmaConnect";window.open(e,"Twitter","width=660,height=400,scrollbars=no;resizable=no")},s.shareOnFacebook=function(){s.initFbJsSdk();var e={method:"feed",picture:s.sharable_data.image_url,link:s.sharable_data.url,name:s.currentInstitute.title+" AlmaConnect : "+s.sharable_data.title,description:s.sharable_data.content,display:"popup",version:"v3.2"};FB.ui(e,function(e){e?recordAnalyticsEvent("Facebook","Facebook ShareContribution SneakPeek Browse Success","PostId: "+s.post.id,1):recordAnalyticsEvent("Facebook","Facebook ShareContribution SneakPeek Browse Failure","PostId: "+s.post.id,0)})},s.showMoreContent=function(){s.moreContent=!1},s.fetchMoreViewers=function(){s.loading_viewers||(s.loading_viewers=!0,s.post.viewers||(s.post.viewers=[]),n({url:"/contributions/more_viewers",method:"GET",params:{skip:s.post.viewers.length,limit:10,viewable_id:s.post.id}}).success(function(e){s.loading_viewers=!1,s.post.viewers=s.post.viewers.concat(e.data),s.viewers_popup.showPopup()}))},s.fetchMoreLikers=function(){s.loading_likers||(s.loading_likers=!0,n({url:"/likes/more_likers",method:"GET",params:{skip:s.post.likers.data.length,limit:10,likeable_id:s.post.id}}).success(function(e){s.loading_likers=!1,s.post.likers.data=s.post.likers.data.concat(e.data)}))},s.like=function(){s.openLoginDialog()||s.postLiked||(s.postLiked=!0,n({method:"GET",url:"/likes/like",params:{likeable_id:s.post.id}}).success(function(){s.post.likers||(s.post.likers={data:[],total:0}),s.post.likers.data.unshift(s.current_short_profile),s.post.likers.total+=1,s.postLiked=!1}).error(function(){s.postLiked=!1}))},s.unlike=function(){s.postLiked||(s.postLiked=!0,n({method:"GET",url:"/likes/unlike",params:{likeable_id:s.post.id}}).success(function(){angular.forEach(s.post.likers.data,function(e,t){e.id==s.current_short_profile.id&&s.post.likers.data.splice(t,1)}),s.post.likers.total-=1,s.postLiked=!1}).error(function(){s.postLiked=!1}))},s.toggleCommentBox=function(){s.openLoginDialog()||(s.post_state.showCommentBox=!s.post_state.showCommentBox)},s.showSettingsMenu=function(){s.expanded_setting_menu?s.expanded_setting_menu=!1:s.expanded_setting_menu=!0},s.deleteContribution=function(){confirm("Are you sure you want to delete the contribution?")&&n({method:"DELETE",url:"/contributions/delete_post",params:{post_id:s.post.id}}).success(function(){s.removePost?s.removePost(s.post,s.$index):location.reload()})},s.showEditPopup=function(){s.editPostForm=angular.copy(s.post),s.editPostForm.tagged_user_ids=[],s.editPostForm.tagged_users&&0<s.editPostForm.tagged_users.total?angular.forEach(s.editPostForm.tagged_users.data,function(e){s.editPostForm.tagged_user_ids.push(e.id)}):s.editPostForm.tagged_users={data:[]},s.editPostForm.shared_images=s.shared_images,angular.forEach(s.editPostForm.shared_images,function(e){e.uploaded=!0}),s.editPostForm.shared_files=s.shared_files,s.setting_dropdown.closeDropdown(),s.edit_post_popup.showPopup(),t(function(){$(".js_content_box").trigger("updateHeight")},0)},s.showSpamReprtPopup=function(){s.setting_dropdown.closeDropdown(),s.spam_report_popup.showPopup()},s.updateContribution=function(){"Contribution::User::ExternalArticle"==s.editPostForm.type?o():a()},s.togglePinUnpin=function(){(s.post.pinned?confirm("Are you sure you want to unpin this post?"):confirm("Are you sure you want to pin this post to top?"))&&n({method:"PUT",url:"/contributions/toggle_pin_unpin",params:{post_id:s.post.id}}).success(function(){s.post.pinned=!s.post.pinned,s.setting_dropdown.closeDropdown()})},s.recordReportReason=function(){s.recording_report=!0,"custom"!=s.post.report_key&&(s.post.report_reason=s.report_reasons[s.post.report_key]),n({method:"PUT",url:"/moderation/report_post",data:{reason:s.post.report_reason,post_id:s.post.id}}).success(function(){s.recording_report=!1,s.success_message="Reported Successfully!"}).error(function(e){s.error_message=e.server_message,s.recording_report=!1})},s.boostContribution=function(){n({method:"POST",url:"/contributions/boost",data:{post_id:s.post.id}}).success(function(){s.post.boosted=!0}).error(function(){})},s.recordVote=function(t){t.loading||(t.loading=!0,n({method:"POST",url:"/contributions/polls/record_vote",data:{poll_option_id:t.id,poll_id:s.post.id}}).success(function(){recordAnalyticsEvent("Contribution","Contribution RecordVote Poll Activity Success","ContributionId: "+s.post.id,1),t.loading=!1,t.poller_ids.push(s.current_short_profile.id),t.pollers.push(s.current_short_profile),r()}).error(function(e){recordAnalyticsEvent("Contribution","Contribution RecordVote Poll Activity Failure","ContributionId: "+s.post.id,0),s.error_message=e.server_message,t.loading=!1}))},s.addNewPollOption=function(){s.post.new_option&&n({method:"POST",url:"/contributions/polls/add_option",data:{option:s.post.new_option,post_id:s.post.id}}).success(function(){recordAnalyticsEvent("Contribution","Contribution AddOption Poll Activity Success","ContributionId: "+s.post.id,1),window.location.reload()}).error(function(){recordAnalyticsEvent("Contribution","Contribution AddOption Poll Activity Success","ContributionId: "+s.post.id,0)})},s.downloadPollersList=function(e){var t=[];t.push("Name"),t.push("Profile Link"),t.push("Leaving Year"),t.push("Course/Designation"),t.push("Currently At");var n=t.join(",")+"\n";angular.forEach(e.pollers,function(e){var t=[];t.push(e.name),t.push(e.url),t.push(e.to_year),t.push(getValue(e.course,"name")),t.push(getValue(e.currently_at,"name")),n+='"'+t.join('","')+'"\n'});var i=document.createElement("a");i.href="data:text/csv;charset=utf-8,"+encodeURIComponent(n),i.target="_blank",i.download=s.answer+"_voters_list.csv",document.body.appendChild(i),i.click()},s.showShareMenu=function(){s.setting_dropdown.closeDropdown(),s.shareDropdown.showDropdown()},s.updateSharedFiles=function(){if("Contribution::User::Poll"==s.post.type&&(s.post.shared_link=null),s.shared_images=[],s.shared_files=[],s.post.shared_files){angular.forEach(s.post.shared_files,function(e){(e.content_type?null!=e.content_type.match(/image/):null!=e.url.match(/\.(jpeg|jpg|gif|png)$/))?s.shared_images.push(e):s.shared_files.push(e)})}0<s.shared_images.length&&(s.post.shared_link=null)},s.tokenInputOnAddCallback=function(){s.editPostForm.tagged_users.data.push(s.state.tagged_user),s.editPostForm.tagged_user_ids.push(s.state.tagged_user.id),s.state.tagged_user=null},s.unselectTaggedUser=function(e){var t=$.inArray(e,s.editPostForm.tagged_users.data);s.editPostForm.tagged_users.data.splice(t,1),s.editPostForm.tagged_user_ids.splice(t,1)},s.markAsTrending=function(){s.marking_as_trending||(s.marking_as_trending=!0,n({method:"POST",url:"/contributions/mark_as_trending",data:{post_id:s.post.id}}).success(function(){s.post.can_be_marked_as_trending=!1}))},s.markPostAsPublic=function(){confirm("Are you sure you want to make this post public?")&&n({method:"PUT",url:"/contributions/mark_as_public",params:{post_id:s.post.id}}).success(function(){s.post.can_be_marked_as_public=!1,s.success_message="The post is now public"}).error(function(e){s.error_message=e.server_message})},s.sendPostEmailToUnregistered=function(){s.sharing_with_unregistered=!0,n({method:"POST",url:"/contributions/share_with_unregistered",data:{post_id:s.post.id}}).success(function(){s.sharing_with_unregistered=!1,s.post.can_be_shared_with_unregistered=!1})},s.smsAction=function(){n({method:"GET",url:"/srt/sharable_url/"+s.post.id,params:{also_users_count:!0}}).success(function(e){s.sendable_users_count=e.sendable_users_count,s.sms_shorten_url=e.url,s.send_sms_popup.showPopup()})},s.sendAnnouncementsSMS=function(){s.smsForm.content?n({method:"POST",url:"/contributions/send_announcement_sms",data:{post_id:s.post.id,smsForm:s.smsForm,post_link:s.sms_shorten_url}}).success(function(){s.send_sms_popup.closePopup(),s.sms_success_popup.showPopup()}):s.sms_error="Content can not be empty"},angular.isDefined(s.post)||(s.post=$(".js_single_post").data("content")),s.sharable_data=i(),s.isSystemPost=e(),s.moreContent=!1,s.post.content_short&&(s.moreContent=!0),s.updateSharedFiles(),s.canSeeOptions=s.post.can_be_reported||s.post.can_be_deleted||s.post.can_be_pinned||s.post.can_be_edited,s.post_state={},s.post_state.showCommentBox=s.post.comments&&2<=s.post.comments.data.length,s.report_reasons={spam:"It's spam",disrespecting:"It's disrespecting",improper:"I don't think it should be on AlmaConnect",custom:"Custom"},angular.equals(s.post.type,"Contribution::User::Poll")&&r(),s.smsForm={content:s.post.content}}]),angular.module("SingleContribution").filter("smslength",function(){return function(e,t){var n=e.length+t.length;return n+"/"+Math.ceil(n/140)}}),angular.module("SingleContribution").controller("CommentsController",["$scope","$http","$timeout","$element",function(t,n,i){setAngularCSRFToken(n);var o=function(){t.resetMentionsInput&&t.resetMentionsInput(),t.commentForm.content=null};t.newComment=function(){if(!t.saving_comment&&t.commentForm.content){var e={post_id:t.post.id,comment:t.commentForm.content_mentions};t.saving_comment=!0,n({method:"POST",url:"/contributions/comments/create_comment",data:e}).success(function(e){t.saving_comment=!1,t.post.comments.data.push(e),t.post.comments.total+=1,o(),t.post_state.showCommentBox=!1,i(function(){$(".js_comments_list").scrollTop(1e7)})}).error(function(e){t.saving_comment=!1,t.error_message=e.server_message,t.timeOut=i(function(){t.error_message=null},1e4)})}},t.viewMoreComments=function(){n({method:"GET",url:"/contributions/comments/more_comments",params:{post_id:t.post.id,skip:t.post.comments.data.length,limit:5}}).success(function(e){t.post.comments.data=e.data.concat(t.post.comments.data)})},t.commentForm={content:null}}]),angular.module("SingleContribution").controller("CommentController",["$scope","$http","$timeout",function(e,t){setAngularCSRFToken(t),e.showMoreContent=function(){e.moreContent=!1},e.deleteComment=function(){confirm("Really want to delete this comment?")&&t({method:"DELETE",url:"/contributions/comments",params:{post_id:e.post.id,comment_id:e.comment.id}}).success(function(){e.post.comments.data.splice(e.$index,1),e.post.comments.total-=1})},e.moreContent=!1,e.comment.content_short&&(e.moreContent=!0)}]),angular.module("SingleContribution").directive("shareViaEmail",["$sce","$rootScope","$http",function(e,t,o){return{restrict:"A",transclude:!0,scope:{to:"=to",user:"=?user",post:"=post"},templateUrl:e.trustAsResourceUrl("common/templates/share_via_email"),link:function(n){var i=!1,e=function(){if(!i)return!1;var e=!0;n.errors={},n.emailForm.to||(n.errors.to="To email can not be blank"),n.emailForm.subject||(n.errors.subject="Subject can not be blank"),n.emailForm.content||(n.errors.content="content can not be blank");var t=Object.keys(n.errors);return!(t&&0<t.length)&&(n.errors=null,e)};n.$watch("emailForm",e,!0),n.prepareEmailPopup=function(){n.gift_officer_email_popup.showPopup()},n.sendToGiftOfficer=function(){if(i=!0,!e())return!1;n.sending_to_gift_officer||(n.sending_to_gift_officer=!0,o({method:"POST",url:"/contributions/send_to_gift_officer",data:{post_id:n.post.id,emailForm:n.emailForm}}).success(function(){n.sending_to_gift_officer=!1,n.gift_officer_email_popup.closePopup(),n.success_message_popup.showPopup()}))},n.user||(n.user=n.post.related_users[0]);var t="";t=n.user.course?n.user.name+", "+n.user.course.name+"'"+n.user.batch_small+" in news":n.user.name+" in news",n.emailForm={to:n.user.gift_officer_email,subject:t,content:""}}}}]),angular.module("SingleContribution").controller("PastEventsSnippetController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e),function(){if(t.loadingPastEvents)return;t.loadingPastEvents=!0,e({method:"GET",url:"/event_calendar/past",params:{limit:6}}).success(function(e){t.loadingPastEvents=!1,t.past_events=e.data,t.total=e.total,t.refreshBxSlider&&t.refreshBxSlider()}).error(function(){t.loadingPastEvents=!1})}()}]),angular.module("SingleContribution").controller("MemoriesSnippetController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e),function(){if(t.loadingMemories)return;t.loadingMemories=!0,e({method:"GET",url:"/memories",params:{skip:0,limit:6}}).success(function(e){t.loadingMemories=!1,t.memories=e.data,t.total=e.total,t.refreshBxSlider&&t.refreshBxSlider()}).error(function(){t.loadingMemories=!1})}()}]),angular.module("SingleContribution").controller("FollowSuggestSnippetController",["$scope","$http","$timeout",function(i,o,a){setAngularCSRFToken(o);var s=function(){if(i.loadingFollowSuggestions)return!0;i.loadingFollowSuggestions=!0;var t=[];angular.forEach(i.followables,function(e){t.push(e.id)}),o({method:"POST",url:"/follow_suggest/suggestions",data:{ignored_ids:t,limit:i.fetch}}).success(function(e){i.loadingFollowSuggestions=!1,i.followables=i.followables.concat(e.data),i.total=e.total,i.refreshBxSlider&&i.refreshBxSlider()}).error(function(){i.loadingFollowSuggestions=!1})};i.connect=function(t,n){t.loading=!0,o({method:"GET",url:"/user_connect/connect?frm=connect_suggestions_snippet",params:{user_id:t.id}}).success(function(e){t.connect_status=e.connect_status,t.loading=!1,t.removed=!0,a(function(){i.followables.splice(n,1),i.refreshBxSlider&&i.refreshBxSlider()},400),i.followables.length<i.limit&&i.total>i.followables.length&&s()})},i.ignore=function(e,t){o({method:"POST",url:"/follow_suggest/ignore",params:{user_id:e.id}}).success(function(){e.removed=!0,a(function(){i.followables.splice(t,1),i.refreshBxSlider&&i.refreshBxSlider()},400),i.followables.length<i.limit&&i.total>i.followables.length&&s()})},i.followables=[],i.state={},i.limit=10,i.fetch=30,s()}]),angular.module("SingleContribution").controller("FollowSnippetController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e);var n=function(){e({method:"GET",url:"/contributions/fetch_follow_snippet"}).success(function(e){t.bots=e.bots,t.users=e.users}).error(function(){})};t.show_more_bots=function(){t.bot_limit=t.bots.length},t.show_more_users=function(){t.user_limit=t.users.length},t.bot_limit=3,t.user_limit=3,n()}]),ac_bootstrap($(".js_single_post")[0],["SingleContribution"]),angular.module("ConnectSuggestions",["ngSanitize","ac"]),angular.module("ConnectSuggestions").controller("ConnectSuggestionsController",["$scope","$http","$timeout",function(n,e){setAngularCSRFToken(e),n.fetchMore=function(){n.limit+=5,n.connect_suggestions.length<n.limit&&n.fetchConnectSuggestions()},n.fetchConnectSuggestions=function(){n.loadingConnectSuggestions=!0;var t=[];angular.forEach(n.connect_suggestions,function(e){t.push(e.id)}),e({method:"POST",url:"/follow_suggest/suggestions",data:{ignored_ids:t,limit:10}}).success(function(e){n.connect_suggestions=n.connect_suggestions.concat(e.data),n.total_connect_suggestions=e.total}).then(function(){n.loadingConnectSuggestions=!1})},n.connect_suggestions=[],n.limit=5,n.fetchConnectSuggestions()}]),angular.module("CurrentWorkProfile",["ngSanitize","ac"]),angular.module("CurrentWorkProfile").controller("CurrentWorkProfilePopupController",["$scope","$http","$timeout","$sce",function(o,a){setAngularCSRFToken(a);var t=function(e){a({method:"POST",url:"/get_started/task_completed",data:{task_names:e}})};o.showPopup=function(){o.current_work_profile_popup.showPopup(),t("current_work_profile_popup_init")},o.saveCurrentWorkProfile=function(){o.errors={},o.loading=!0;var e={};if(!o.current_work_profile_form.functional_area)return o.errors.functional_area="Functional Area can not be blank",void(o.loading=!1);e.functional_area_id=o.current_work_profile_form.functional_area.id,0==o.current_work_profile_form.functional_area.sub_functional_areas.length&&(o.current_work_profile_form.sub_functional_area=null,e.sub_functional_area_id=null),o.current_work_profile_form.sub_functional_area?e.sub_functional_area_id=o.current_work_profile_form.sub_functional_area.id:e.sub_functional_area_id=null,o.current_work_profile_form.skills&&(e.preferred_skill_ids=o.current_work_profile_form.skills.map(function(e){return e.id})),e.relevant_exp=o.current_work_profile_form.relevant_exp,e.industry=o.current_work_profile_form.industry,a({method:"POST",url:"/profile/update_current_work_profile",data:e}).success(function(){o.current_work_profile_popup.closePopup(),o.loading=!1,t("current_work_profile_updated")}).error(function(){})};var n=function(){var e=window.location.pathname,n=window.location.search;"/"===e[0]&&(e=e.substring(1));var i=e.split("/"),t={functional_area:i[2],sub_functional_area:i[3],skill:i[4]};a({method:"GET",url:"/profile/current_work_profile",params:t}).success(function(t){o.current_work_profile_form.functional_area=o.functional_areas.filter(function(e){return e.id===t.functional_area_id})[0],o.current_work_profile_form.functional_area&&(o.current_work_profile_form.sub_functional_area=o.current_work_profile_form.functional_area.sub_functional_areas.filter(function(e){return e.id===t.sub_functional_area_id})[0]),o.current_work_profile_form.skills=t.skills,o.current_work_profile_form.relevant_exp=t.relevant_exp,o.current_work_profile_form.industry=t.industry,("jobs"===i[0]||n.includes("show_current_work_profile=true"))&&o.current_work_profile_popup.showPopup()}).error(function(){})},e=function(){a({method:"GET",url:"/jobs/functional_areas"}).success(function(e){o.functional_areas=e.functional_areas,o.all_industries=e.all_industries,n()}).error(function(){})};o.current_work_profile_form={functional_area:null,sub_functional_area:null,skills:[]},e()}]),ac_bootstrap($(".js_create_job_posting")[0],["CreateJobPosting"]),ac_bootstrap($(".js_create_super_job_posting")[0],["JobPosting"]),ac_bootstrap($(".js_create_public_job_posting")[0],["JobPosting"]),ac_bootstrap($(".js_list_job_postings")[0],["JobPosting","SingleContribution"]),ac_bootstrap($(".js_single_job_posting")[0],["JobPosting","SingleContribution"]),angular.module("EmployerSignup",["ngSanitize","ac"]),angular.module("EmployerSignup").controller("SignupController",["$scope","$http","$timeout","$rootScope",function(n,t,e,i){setAngularCSRFToken(t),n.saveCurrentInfo=function(){var e={profile_id:n.currentUser.id,work_status:n.userForm.work_status,profile_title:n.userForm.profile_title,currently_at_id:getValue(n.userForm.currently_at,"id"),current_city_id:getValue(n.userForm.current_city,"id"),phone_nos:n.userForm.phone_nos.split(",")};n.saving_data=!0,t({method:"POST",url:"/employer/update_info",data:{user:e}}).success(function(e){n.saving_data=!1,window.location="/company/"+e.slug+"?employer_access=true"}).error(function(e){n.saving_data=!1,n.ci_error_message=e.server_message})},n.importUsingLinkedin=function(){window.open("/profiles/social_sync/linkedin/import_profile_onboarding","Linkedin permissions","width=600,height=422,scrollbars,top=50,ScreenY=250,left=50,ScreenX=300")},n.fetchAndUpdateLn=function(){n.fetchingImportData=!0,t({method:"POST",url:"/profiles/fetch_and_update_linked_in"}).success(function(e){n.fetchingImportData=!1;var t=e.profile;i.currentUser.profile_title=t.profile_title,i.currentUser.currently_at=t.currently_at,i.currentUser.current_city=t.current_city,n.workStatusChanged()}).error(function(){n.fetchingImportData=!1})},n.userForm={profile_title:i.currentUser.profile_title,currently_at:i.currentUser.currently_at,current_city:i.currentUser.current_city,phone_nos:i.currentUser.phone_nos},n.is_get_started=!0}]),ac_bootstrap($(".js_employer_signup")[0],["EmployerSignup"]),angular.module("CreatePosts",["ngSanitize","ac"]),angular.module("CreatePosts").controller("CreatePostsController",["$scope","$http","$timeout","$compile","$rootScope","$element",function(n,e,t,i,o,a){console.log(a),setAngularCSRFToken(e);var s=function(){return n.currentUser.is_institute_moderator},r=function(){n.postForm&&resetSharedFiles(n.postForm.shared_files),n.postForm=angular.copy(_),n.options=[{text:""},{text:""}],n.showPollFields=!1,n.mark_announcement=!1,t(function(){$(".js_content_field").trigger("updateHeight"),n.resetMentionsInput&&n.resetMentionsInput()},0)},l=function(){var t=[];return angular.forEach(n.options,function(e){e.text&&t.push(e.text)}),t},c=function(){n.postForm.view_results||(n.postForm.show_voters=!1),n.postForm.options=l(),n.postForm.announcement&&(n.postForm.priority=10);var e=angular.copy(n.postForm);return e.ui_hack=!0,e.content=e.content_mentions,delete e.content_mentions,e.content&&(e.content=e.content.trim()),e.shared_link&&e.shared_link.original_url&&e.content&&e.content.endsWith(e.shared_link.original_url)&&(e.content=e.content.replace(e.shared_link.original_url,"")),e.shared_file_ids=e.shared_file_ids.concat(e.shared_image_ids),n.group&&(e.group_id=n.group.id),e},d=function(){n.creating_post=!0,e({method:"POST",url:"/contributions/updates",data:c()}).success(function(e){e.group&&n.posts.unshift(e),recordAnalyticsEvent("Contribution","Contribution Create Update Activity Success","ContributionId: "+e.id,1),r(),n.creating_post=!1,n.success_message="Your Post has been successfully created",n.togglePostForm(),n.create_post_popup&&n.create_post_popup.closePopup(),n.insertPost&&n.insertPost(e),t(function(){o.$broadcast("event:scroll")},0)}).error(function(e){recordAnalyticsEvent("Contribution","Contribution Create Update Activity Failure",null,0),n.creating_post=!1,n.error_message=e.server_message})},u=function(){n.creating_post=!0,e({method:"POST",url:"/contributions/polls",data:c()}).success(function(e){recordAnalyticsEvent("Contribution","Contribution Create Poll Activity Success","ContributionId: "+e.id,1),r(),n.creating_post=!1,n.create_post_popup.closePopup(),n.togglePostForm(),n.insertPost&&n.insertPost(e),t(function(){o.$broadcast("event:scroll")},0)}).error(function(e){recordAnalyticsEvent("Contribution","Contribution Create Poll Activity Failure",null,0),n.creating_post=!1,n.error_message=e.server_message})};n.addOption=function(){var t=!1;angular.forEach(n.options,function(e){e.text||(t=!0)}),t||n.options.push({text:""})},n.displayPollFields=function(){n.showPollFields=!n.showPollFields,g()},n.createPost=function(){if(n.uploadingFiles)n.error_message_files="Please wait for the file uploads to finish.";else{if(n.error_message_files=null,n.error_message=null,n.success_message=null,n.uploadingFiles&&n.creating_post)return!0;n.showPollFields?u():d()}},n.markPublic=function(){n.postForm.mark_public?n.postForm.tags="public":n.postForm.tags=null},n.tokenInputOnAddCallback=function(){n.postForm.tagged_users.push(n.state.tagged_user),n.postForm.tagged_user_ids.push(n.state.tagged_user.id),n.state.tagged_user=null},n.unselectTaggedUser=function(e){var t=$.inArray(e,n.postForm.tagged_users);n.postForm.tagged_users.splice(t,1),n.postForm.tagged_user_ids.splice(t,1)},n.togglePostForm=function(){n.show_full_form=!n.show_full_form,n.show_full_form&&t(function(){$(".js_content_box").focus()})},n.toggleMore=function(){n.show_more=!n.show_more},n.setAppliedTags=function(e){n.postForm.shared_with={applied_tags:e},n.sharedWithPopup.closePopup()},n.canCreateAnnouncement=s();var p=["greatlakes.almaconnect.com","iitd.almaconnect.com","irma.almaconnect.com"];n.canCreateNews=n.canCreateAnnouncement&&-1!=p.indexOf(n.currentInstitute.host);var _={content:"",shared_files:[],shared_images:[],is_multiple_choice:!(n.options=[{text:""},{text:""}]),user_change_vote:!0,is_addable:!1,view_results:!0,show_voters:!1,options:[],tagged_user_ids:[],tagged_users:[],shared_file_ids:[]};r(),n.show_full_form=!1,n.show_more=!1;var m=a.attr("content");m&&(m=n.$eval(m),t(function(){n.postForm.content=m})),n.placeholder=a.attr("placeholder"),n.placeholder||(n.placeholder="Share an Update (Type @name to mention someone)");var g=function(){if(n.showPollFields){if(!(n.postForm.shared_link||n.postForm.shared_images&&0<n.postForm.shared_images.length))return;n.postForm.shared_link=null}if(n.postForm.shared_images&&0<n.postForm.shared_images.length){if(!n.postForm.shared_link)return;n.postForm.shared_link=null}};n.$watch("postForm",g,!0),t(function(){$(".js_content_box").trigger("updateHeight")},0)}]),angular.module("GroupList",["ngSanitize","ac","CreateGroup"]),angular.module("GroupList").controller("GroupListController",["$scope","$http","$timeout",function(n,i){setAngularCSRFToken(i);var o=function(e){backgroundColors=["rgba(252, 217, 0, 0.15)","rgba(253, 91, 44, 0.10)","rgba(68, 190, 219, 0.15)","rgba(229, 56, 79, 0.10)","rgba(203, 225, 79, 0.15)"];var t=md5(e.name)||"";t=t.substring(0,16);var n=(parseInt(t,16)||0)%backgroundColors.length;e.backgroundColor=backgroundColors[n]},a=function(e){return e?n.state.keyword_for_sub:n.state.keyword};n.updateGroupData=function(e){n.subscribed_groups.splice(0,0,e),n.total+=1},n.show_more_groups=function(t){var e;t?(e=n.subscribed_groups.length,n.sub_fetching_groups=!0):(e=n.other_groups.length,n.fetching_groups=!0),i({method:"GET",url:"/groups/group_list",params:{subscribed:t,skip:e,type:n.state.active_tab,keyword:a(t)}}).success(function(e){0<e.data.length&&angular.forEach(e.data,function(e){o(e)}),t?(n.subscribed_groups=n.subscribed_groups.concat(e.data),n.total_subscribed_groups=e.total,n.sub_fetching_groups=!1):(n.other_groups=n.other_groups.concat(e.data),n.total_other_groups=e.total,n.fetching_groups=!1)})},n.setActiveTab=function(e){n.state.active_tab=e,n.filterGroups()},n.filterGroups=function(t){t?n.sub_fetching_groups=!0:n.fetching_groups=!0,i({method:"GET",url:"/groups/group_list",params:{subscribed:t,type:n.state.active_tab,keyword:a(t)}}).success(function(e){0<e.data.length&&angular.forEach(e.data,function(e){o(e)}),t?(n.subscribed_groups=e.data,n.total_subscribed_groups=e.total,n.sub_fetching_groups=!1):(n.other_groups=e.data,n.total_other_groups=e.total,n.fetching_groups=!1)})},n.leaveGroup=function(e){e.loading||(e.loading=!0,i({method:"GET",url:"/groups/leave",params:{group_id:e.id}}).success(function(){e.subscribed=!1,e.loading=!1,e.members_count-=1}))},n.joinGroup=function(e){e.loading||(e.loading=!0,i({method:"GET",url:"/groups/join",params:{group_id:e.id}}).success(function(){e.subscribed=!0,e.loading=!1,e.members_count+=1}))};var e=$(".js_group_list").data("content");n.group_types=$(".js_group_list").data("types"),n.subscribed_groups=e.subscribed_groups,n.other_groups=e.other_groups,n.total_subscribed_groups=e.total_subscribed_groups,
n.total_other_groups=e.total_other_groups,n.state={active_tab:"",keyword:"",keyword_for_sub:""},0<n.subscribed_groups.length&&angular.forEach(n.subscribed_groups,function(e){o(e)}),0<n.other_groups.length&&angular.forEach(n.other_groups,function(e){o(e)})}]),angular.module("GroupSingle",["ngSanitize","ac","CreatePosts","SingleContribution","CreateGroup"]),angular.module("GroupSingle").controller("GroupSingleController",["$scope","$http","$timeout","$rootScope",function(i,o,n,e){setAngularCSRFToken(o);var t=function(){var e=window.location.pathname;"/"==e.substr(e.length-1)&&(e=e.substring(0,e.length-1)),e==i.baseUrl?(i.state.selected_section="posts",i.selectPostSection()):(i.state.selected_section="members",i.selectMemberSection())},a=function(e){backgroundColors=["rgba(252, 217, 0, 0.15)","rgba(253, 91, 44, 0.10)","rgba(68, 190, 219, 0.15)","rgba(229, 56, 79, 0.10)","rgba(203, 225, 79, 0.15)"];var t=md5(e.name)||"";t=t.substring(0,16);var n=(parseInt(t,16)||0)%backgroundColors.length;e.backgroundColor=backgroundColors[n]},s=function(){o({method:"GET",url:"/groups/other_groups",params:{group_id:i.group.id}}).success(function(e){i.other_groups=e.data,angular.forEach(i.other_groups,function(e){a(e)})})},r=function(){i.loading_posts||(i.loading_posts=!0,o({method:"GET",url:"/groups/posts",params:{skip:i.posts.length,group_id:i.group.id}}).success(function(e){i.total_posts=e.total,i.total_post_pages=e.total_pages,angular.forEach(e.data,function(e){i.posts.push(e)}),i.loading_posts=!1}))},l=function(){i.loading_members||(i.loading_members=!0,o({method:"GET",url:"/groups/members",params:{skip:i.members.length,group_id:i.group.id,username_search:i.state.username_search}}).success(function(e){i.total_members=e.total,i.total_member_pages=e.total_pages,angular.forEach(e.data,function(e){i.members.push(e)}),i.loading_members=!1}))};i.selectPostSection=function(){i.state.selected_section="posts",History.pushState(null,i.currentInstitute.page_title,i.baseUrl),i.posts=[],r()},i.selectMemberSection=function(){i.state.selected_section="members",History.pushState(null,i.currentInstitute.page_title,i.baseUrl+"/members"),i.members=[],l()},i.updateGroupData=function(e){i.group=e},i.removeMember=function(e,t,n){o({method:"GET",url:"/groups/remove_member",params:{user_id:e.id,group_id:i.group.id}}).success(function(){i.members.splice(t,1),n.closeDropdown()})},i.removeAdmin=function(t,n){o({method:"GET",url:"/groups/remove_admin",params:{user_id:t.id,group_id:i.group.id}}).success(function(){var e=i.group.group_admin_ids.indexOf(t.id);-1!=e&&i.group.group_admin_ids.splice(e,1),n.closeDropdown()})},i.makeAdmin=function(e,t){o({method:"GET",url:"/groups/make_admin",params:{user_id:e.id,group_id:i.group.id}}).success(function(){-1==i.group.group_admin_ids.indexOf(e.id)&&i.group.group_admin_ids.push(e.id),t.closeDropdown()})},i.addMembers=function(){if(i.add_members_error=null,!i.adding_members){i.adding_members=!0;var e=i.state.selected_users.map(function(e){return e.id});o({method:"POST",url:"/groups/add_members",data:{user_ids:e,group_id:i.group.id}}).success(function(){i.selectMemberSection(),i.add_members_popup.closePopup(),i.adding_members=!1,i.state.selected_users=[],i.group.members_count+=e.length}).error(function(e){i.add_members_error=e.server_message,n(function(){i.add_members_error=null},5e3),i.adding_members=!1})}},i.addBulkMembers=function(e,t){i.add_bulk_members_success=null,i.add_bulk_members_error=null,i.adding_bulk_members||(i.adding_bulk_members=!0,o({method:"POST",url:"/groups/add_bulk_members",data:{applied_tags:t,group_id:i.group.id}}).success(function(){i.adding_bulk_members=!1,i.add_bulk_members_success="Your request has been accepted and will be processed soon",n(function(){i.add_bulk_members_success=null,i.add_bulk_members_popup.closePopup(),i.selectMemberSection()},5e3)}).error(function(e){i.add_bulk_members_error=e.server_message,n(function(){i.add_bulk_members_error=null},5e3),i.adding_bulk_members=!1}))},i.deleteGroup=function(){confirm("Are you sure you want to delete the group? All posts posted in this group will be deleted")&&(i.deleting_group||(i.deleting_group=!0,o({method:"GET",url:"/groups/delete_group",params:{group_id:i.group.id}}).success(function(){i.deleting_group=!1,window.location="/groups"}).error(function(e){i.deleting_group=!1,alert(e.server_message)})))},i.markOfficial=function(){o({method:"POST",url:"/groups/update_official_status",data:{group_id:i.group.id,official:!0}}).success(function(){i.group.official=!0}).error(function(){})},i.removeOfficial=function(){o({method:"POST",url:"/groups/update_official_status",data:{group_id:i.group.id,official:!1}}).success(function(){i.group.official=!1}).error(function(){})},i.joinGroup=function(){e.currentUser.id?(i.join_group_loading=!0,o({method:"GET",url:"/groups/join",params:{group_id:i.group.id}}).success(function(){i.group.subscribed=!0,i.join_group_loading=!1,i.group.members_count+=1})):i.open_login()},i.leaveGroup=function(){e.currentUser.id?(i.leave_group_loading=!0,o({method:"GET",url:"/groups/leave",params:{group_id:i.group.id}}).success(function(){i.group.subscribed=!1,i.leave_group_loading=!1,i.group.members_count-=1,window.location.reload()})):i.open_login()},i.recordReportReason=function(){i.recording_report=!0,"custom"!=i.group.report_key&&(i.group.report_reason=i.report_reasons[i.group.report_key]),o({method:"PUT",url:"/moderation/report_group",data:{reason:i.group.report_reason,group_id:i.group.id}}).success(function(){i.recording_report=!1,i.success_message="Reported Successfully!"}).error(function(e){i.error_message=e.server_message,i.recording_report=!1})},i.open_login=function(){e.openLoginDialog(window.location.href,null,null,!0)},i.group=$(".js_group_single").data("content"),i.duplicate_grp_message=window.location.search.includes("duplicate=true")?'The group "'+i.group.name+'" already exists':null,i.group_types=$(".js_group_single").data("types"),a(i.group),i.state={selected_section:null,selected_users:[],applied_tags:{},username_search:null},i.report_reasons={spam:"It's spam",disrespecting:"It's disrespecting",improper:"I don't think it should be on AlmaConnect",custom:"Custom"},i.baseUrl=i.group.url,t(),History.Adapter.bind(window,"statechange",function(){var e=History.getState();t(e.data),safeApply(i)}),s(),e.currentUser.id&&$(window).bind("scroll",function(){if("posts"==i.state.selected_section){if(i.loading_posts)return;if(i.total_posts<=i.posts.length)return;var e=$(window).scrollTop()+$(window).height();document.body.offsetHeight-200<=e&&r()}else if("members"==i.state.selected_section){if(i.loading_members)return;if(i.total_members<=i.members.length)return;e=$(window).scrollTop()+$(window).height();document.body.offsetHeight-200<=e&&l()}})}]),angular.module("CreateGroup",["ngSanitize","ac"]),angular.module("CreateGroup").controller("CreateGroupController",["$scope","$http","$timeout",function(t,e){setAngularCSRFToken(e);var n=!1,i=function(){if(n){t.errors={},t.groupForm.name||(t.errors.name="Group name can not be blank"),t.groupForm.description||(t.errors.description="About can not be blank"),t.groupForm.type||(t.errors.type="Type can not be blank");var e=Object.keys(t.errors);return!(e&&0<e.length)&&!(t.errors=null)}};t.$watch("groupForm",i,!0),t.createOrUpdateGroup=function(){return!!t.creating_group||(t.error_message=null,n=!0,!!i()&&(t.groupForm.group_logo&&(t.groupForm.group_logo_id=t.groupForm.group_logo.id),t.groupForm.background&&(t.groupForm.background_id=t.groupForm.background.id),t.creating_group=!0,void e({method:"POST",url:"/groups/create_or_update",data:{group:t.groupForm}}).success(function(e){e.redir_url?window.location.href=e.redir_url:(t.updateGroupData(e),t.creating_group=!1,n=!1,window.location.href.includes("?new")?window.location.href=window.location.origin+window.location.pathname:window.location.reload(),t.create_group_popup.closePopup())}).error(function(e){t.error_message=e.server_message})))},t.group?t.groupForm=angular.copy(t.group):t.groupForm={small_logo:null,small_logo_id:null,name:null,description:null,"public":!1}}]),ac_bootstrap($(".js_group_list")[0],["GroupList"]),ac_bootstrap($(".js_group_single")[0],["GroupSingle"]);